(()=>{var If=Object.create;var hl=Object.defineProperty;var Of=Object.getOwnPropertyDescriptor;var qf=Object.getOwnPropertyNames;var Ff=Object.getPrototypeOf,Hf=Object.prototype.hasOwnProperty;var Bf=(f,v)=>()=>(v||f((v={exports:{}}).exports,v),v.exports);var Uf=(f,v,w,S)=>{if(v&&typeof v=="object"||typeof v=="function")for(let L of qf(v))!Hf.call(f,L)&&L!==w&&hl(f,L,{get:()=>v[L],enumerable:!(S=Of(v,L))||S.enumerable});return f};var Nn=(f,v,w)=>(w=f!=null?If(Ff(f)):{},Uf(v||!f||!f.__esModule?hl(w,"default",{value:f,enumerable:!0}):w,f));var un=Bf((lh,Hr)=>{(function(){var f={version:"3.5.17"},v=[].slice,w=function(t){return v.call(t)},S=this.document;function L(t){return t&&(t.ownerDocument||t.document||t).documentElement}function E(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(S)try{w(S.documentElement.childNodes)[0].nodeType}catch{w=function(e){for(var n=e.length,r=new Array(n);n--;)r[n]=e[n];return r}}if(Date.now||(Date.now=function(){return+new Date}),S)try{S.createElement("DIV").style.setProperty("opacity",0,"")}catch{var z=this.Element.prototype,O=z.setAttribute,F=z.setAttributeNS,Z=this.CSSStyleDeclaration.prototype,K=Z.setProperty;z.setAttribute=function(e,n){O.call(this,e,n+"")},z.setAttributeNS=function(e,n,r){F.call(this,e,n,r+"")},Z.setProperty=function(e,n,r){K.call(this,e,n+"",r)}}f.ascending=et;function et(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}f.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},f.min=function(t,e){var n=-1,r=t.length,i,a;if(arguments.length===1){for(;++n<r;)if((a=t[n])!=null&&a>=a){i=a;break}for(;++n<r;)(a=t[n])!=null&&i>a&&(i=a)}else{for(;++n<r;)if((a=e.call(t,t[n],n))!=null&&a>=a){i=a;break}for(;++n<r;)(a=e.call(t,t[n],n))!=null&&i>a&&(i=a)}return i},f.max=function(t,e){var n=-1,r=t.length,i,a;if(arguments.length===1){for(;++n<r;)if((a=t[n])!=null&&a>=a){i=a;break}for(;++n<r;)(a=t[n])!=null&&a>i&&(i=a)}else{for(;++n<r;)if((a=e.call(t,t[n],n))!=null&&a>=a){i=a;break}for(;++n<r;)(a=e.call(t,t[n],n))!=null&&a>i&&(i=a)}return i},f.extent=function(t,e){var n=-1,r=t.length,i,a,o;if(arguments.length===1){for(;++n<r;)if((a=t[n])!=null&&a>=a){i=o=a;break}for(;++n<r;)(a=t[n])!=null&&(i>a&&(i=a),o<a&&(o=a))}else{for(;++n<r;)if((a=e.call(t,t[n],n))!=null&&a>=a){i=o=a;break}for(;++n<r;)(a=e.call(t,t[n],n))!=null&&(i>a&&(i=a),o<a&&(o=a))}return[i,o]};function rt(t){return t===null?NaN:+t}function lt(t){return!isNaN(t)}f.sum=function(t,e){var n=0,r=t.length,i,a=-1;if(arguments.length===1)for(;++a<r;)lt(i=+t[a])&&(n+=i);else for(;++a<r;)lt(i=+e.call(t,t[a],a))&&(n+=i);return n},f.mean=function(t,e){var n=0,r=t.length,i,a=-1,o=r;if(arguments.length===1)for(;++a<r;)lt(i=rt(t[a]))?n+=i:--o;else for(;++a<r;)lt(i=rt(e.call(t,t[a],a)))?n+=i:--o;if(o)return n/o},f.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},f.median=function(t,e){var n=[],r=t.length,i,a=-1;if(arguments.length===1)for(;++a<r;)lt(i=rt(t[a]))&&n.push(i);else for(;++a<r;)lt(i=rt(e.call(t,t[a],a)))&&n.push(i);if(n.length)return f.quantile(n.sort(et),.5)},f.variance=function(t,e){var n=t.length,r=0,i,a,o=0,u=-1,l=0;if(arguments.length===1)for(;++u<n;)lt(i=rt(t[u]))&&(a=i-r,r+=a/++l,o+=a*(i-r));else for(;++u<n;)lt(i=rt(e.call(t,t[u],u)))&&(a=i-r,r+=a/++l,o+=a*(i-r));if(l>1)return o/(l-1)},f.deviation=function(){var t=f.variance.apply(this,arguments);return t&&Math.sqrt(t)};function vt(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}var xt=vt(et);f.bisectLeft=xt.left,f.bisect=f.bisectRight=xt.right,f.bisector=function(t){return vt(t.length===1?function(e,n){return et(t(e),n)}:t)},f.shuffle=function(t,e,n){(r=arguments.length)<3&&(n=t.length,r<2&&(e=0));for(var r=n-e,i,a;r;)a=Math.random()*r--|0,i=t[r+e],t[r+e]=t[a+e],t[a+e]=i;return t},f.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},f.pairs=function(t){for(var e=0,n=t.length-1,r,i=t[0],a=new Array(n<0?0:n);e<n;)a[e]=[r=i,i=t[++e]];return a},f.transpose=function(t){if(!(a=t.length))return[];for(var e=-1,n=f.min(t,Et),r=new Array(n);++e<n;)for(var i=-1,a,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r};function Et(t){return t.length}f.zip=function(){return f.transpose(arguments)},f.keys=function(t){var e=[];for(var n in t)e.push(n);return e},f.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},f.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},f.merge=function(t){for(var e=t.length,n,r=-1,i=0,a,o;++r<e;)i+=t[r].length;for(a=new Array(i);--e>=0;)for(o=t[e],n=o.length;--n>=0;)a[--i]=o[n];return a};var V=Math.abs;f.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r=[],i=Qt(V(n)),a=-1,o;if(t*=i,e*=i,n*=i,n<0)for(;(o=t+n*++a)>e;)r.push(o/i);else for(;(o=t+n*++a)<e;)r.push(o/i);return r};function Qt(t){for(var e=1;t*e%1;)e*=10;return e}function It(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}f.map=function(t,e){var n=new Yt;if(t instanceof Yt)t.forEach(function(u,l){n.set(u,l)});else if(Array.isArray(t)){var r=-1,i=t.length,a;if(arguments.length===1)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e.call(t,a=t[r],r),a)}else for(var o in t)n.set(o,t[o]);return n};function Yt(){this._=Object.create(null)}var ri="__proto__",ht="\0";It(Yt,{has:ue,get:function(t){return this._[Ot(t)]},set:function(t,e){return this._[Ot(t)]=e},remove:te,keys:Ye,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:$t(e),value:this._[e]});return t},size:Ee,empty:In,forEach:function(t){for(var e in this._)t.call(this,$t(e),this._[e])}});function Ot(t){return(t+="")===ri||t[0]===ht?ht+t:t}function $t(t){return(t+="")[0]===ht?t.slice(1):t}function ue(t){return Ot(t)in this._}function te(t){return(t=Ot(t))in this._&&delete this._[t]}function Ye(){var t=[];for(var e in this._)t.push($t(e));return t}function Ee(){var t=0;for(var e in this._)++t;return t}function In(){for(var t in this._)return!1;return!0}f.nest=function(){var t={},e=[],n=[],r,i;function a(u,l,s){if(s>=e.length)return i?i.call(t,l):r?l.sort(r):l;for(var c=-1,h=l.length,g=e[s++],m,b,d,p=new Yt,y;++c<h;)(y=p.get(m=g(b=l[c])))?y.push(b):p.set(m,[b]);return u?(b=u(),d=function(M,_){b.set(M,a(u,_,s))}):(b={},d=function(M,_){b[M]=a(u,_,s)}),p.forEach(d),b}function o(u,l){if(l>=e.length)return u;var s=[],c=n[l++];return u.forEach(function(h,g){s.push({key:h,values:o(g,l)})}),c?s.sort(function(h,g){return c(h.key,g.key)}):s}return t.map=function(u,l){return a(l,u,0)},t.entries=function(u){return o(a(f.map,u,0),0)},t.key=function(u){return e.push(u),t},t.sortKeys=function(u){return n[e.length-1]=u,t},t.sortValues=function(u){return r=u,t},t.rollup=function(u){return i=u,t},t},f.set=function(t){var e=new oe;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e};function oe(){this._=Object.create(null)}It(oe,{has:ue,add:function(t){return this._[Ot(t+="")]=!0,t},remove:te,values:Ye,size:Ee,empty:In,forEach:function(t){for(var e in this._)t.call(this,$t(e))}}),f.behavior={};function ct(t){return t}f.rebind=function(t,e){for(var n=1,r=arguments.length,i;++n<r;)t[i=arguments[n]]=On(t,e,e[i]);return t};function On(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function ke(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=qn.length;n<r;++n){var i=qn[n]+e;if(i in t)return i}}var qn=["webkit","ms","moz","Moz","o","O"];function ft(){}f.dispatch=function(){for(var t=new ii,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=Ra(t);return t};function ii(){}ii.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(arguments.length===2){if(e==null)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}};function Ra(t){var e=[],n=new Yt;function r(){for(var i=e,a=-1,o=i.length,u;++a<o;)(u=i[a].on)&&u.apply(this,arguments);return t}return r.on=function(i,a){var o=n.get(i),u;return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,u=e.indexOf(o)).concat(e.slice(u+1)),n.remove(i)),a&&e.push(n.set(i,{on:a})),t)},r}f.event=null;function pe(){f.event.preventDefault()}function ai(){for(var t=f.event,e;e=t.sourceEvent;)t=e;return t}function ui(t){for(var e=new ii,n=0,r=arguments.length;++n<r;)e[arguments[n]]=Ra(e);return e.of=function(i,a){return function(o){try{var u=o.sourceEvent=f.event;o.target=t,f.event=o,e[o.type].apply(i,a)}finally{f.event=u}}},e}f.requote=function(t){return t.replace(Il,"\\$&")};var Il=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Fn={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function me(t){return Fn(t,it),t}var oi=function(t,e){return e.querySelector(t)},li=function(t,e){return e.querySelectorAll(t)},Hn=function(t,e){var n=t.matches||t[ke(t,"matchesSelector")];return Hn=function(r,i){return n.call(r,i)},Hn(t,e)};typeof Sizzle=="function"&&(oi=function(t,e){return Sizzle(t,e)[0]||null},li=Sizzle,Hn=Sizzle.matchesSelector),f.selection=function(){return f.select(S.documentElement)};var it=f.selection.prototype=[];it.select=function(t){var e=[],n,r,i,a;t=si(t);for(var o=-1,u=this.length;++o<u;){e.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var l=-1,s=i.length;++l<s;)(a=i[l])?(n.push(r=t.call(a,a.__data__,l,o)),r&&"__data__"in a&&(r.__data__=a.__data__)):n.push(null)}return me(e)};function si(t){return typeof t=="function"?t:function(){return oi(t,this)}}it.selectAll=function(t){var e=[],n,r;t=Pa(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,l=o.length;++u<l;)(r=o[u])&&(e.push(n=w(t.call(r,r.__data__,u,i))),n.parentNode=r);return me(e)};function Pa(t){return typeof t=="function"?t:function(){return li(t,this)}}var ci="http://www.w3.org/1999/xhtml",fi={svg:"http://www.w3.org/2000/svg",xhtml:ci,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};f.ns={prefix:fi,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),fi.hasOwnProperty(n)?{space:fi[n],local:t}:t}},it.attr=function(t,e){if(arguments.length<2){if(typeof t=="string"){var n=this.node();return t=f.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(Ca(e,t[e]));return this}return this.each(Ca(t,e))};function Ca(t,e){t=f.ns.qualify(t);function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var l=e.apply(this,arguments);l==null?this.removeAttribute(t):this.setAttribute(t,l)}function u(){var l=e.apply(this,arguments);l==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}return e==null?t.local?r:n:typeof e=="function"?t.local?u:o:t.local?a:i}function Ia(t){return t.trim().replace(/\s+/g," ")}it.classed=function(t,e){if(arguments.length<2){if(typeof t=="string"){var n=this.node(),r=(t=qa(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!Oa(t[i]).test(e))return!1;return!0}for(e in t)this.each(Fa(e,t[e]));return this}return this.each(Fa(t,e))};function Oa(t){return new RegExp("(?:^|\\s+)"+f.requote(t)+"(?:\\s+|$)","g")}function qa(t){return(t+"").trim().split(/^|\s+/)}function Fa(t,e){t=qa(t).map(Ol);var n=t.length;function r(){for(var a=-1;++a<n;)t[a](this,e)}function i(){for(var a=-1,o=e.apply(this,arguments);++a<n;)t[a](this,o)}return typeof e=="function"?i:r}function Ol(t){var e=Oa(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",Ia(i+" "+t))):n.setAttribute("class",Ia(i.replace(e," ")))}}it.style=function(t,e,n){var r=arguments.length;if(r<3){if(typeof t!="string"){r<2&&(e="");for(n in t)this.each(Ha(n,t[n],e));return this}if(r<2){var i=this.node();return E(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(Ha(t,e,n))};function Ha(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function a(){var o=e.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}return e==null?r:typeof e=="function"?a:i}it.property=function(t,e){if(arguments.length<2){if(typeof t=="string")return this.node()[t];for(e in t)this.each(Ba(e,t[e]));return this}return this.each(Ba(t,e))};function Ba(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var a=e.apply(this,arguments);a==null?delete this[t]:this[t]=a}return e==null?n:typeof e=="function"?i:r}it.text=function(t){return arguments.length?this.each(typeof t=="function"?function(){var e=t.apply(this,arguments);this.textContent=e??""}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},it.html=function(t){return arguments.length?this.each(typeof t=="function"?function(){var e=t.apply(this,arguments);this.innerHTML=e??""}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},it.append=function(t){return t=Ua(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})};function Ua(t){function e(){var r=this.ownerDocument,i=this.namespaceURI;return i===ci&&r.documentElement.namespaceURI===ci?r.createElement(t):r.createElementNS(i,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return typeof t=="function"?t:(t=f.ns.qualify(t)).local?n:e}it.insert=function(t,e){return t=Ua(t),e=si(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},it.remove=function(){return this.each(ql)};function ql(){var t=this.parentNode;t&&t.removeChild(this)}it.data=function(t,e){var n=-1,r=this.length,i,a;if(!arguments.length){for(t=new Array(r=(i=this[0]).length);++n<r;)(a=i[n])&&(t[n]=a.__data__);return t}function o(c,h){var g,m=c.length,b=h.length,d=Math.min(m,b),p=new Array(b),y=new Array(b),M=new Array(m),_,x;if(e){var D=new Yt,N=new Array(m),A;for(g=-1;++g<m;)(_=c[g])&&(D.has(A=e.call(_,_.__data__,g))?M[g]=_:D.set(A,_),N[g]=A);for(g=-1;++g<b;)(_=D.get(A=e.call(h,x=h[g],g)))?_!==!0&&(p[g]=_,_.__data__=x):y[g]=hi(x),D.set(A,!0);for(g=-1;++g<m;)g in N&&D.get(N[g])!==!0&&(M[g]=c[g])}else{for(g=-1;++g<d;)_=c[g],x=h[g],_?(_.__data__=x,p[g]=_):y[g]=hi(x);for(;g<b;++g)y[g]=hi(h[g]);for(;g<m;++g)M[g]=c[g]}y.update=p,y.parentNode=p.parentNode=M.parentNode=c.parentNode,u.push(y),l.push(p),s.push(M)}var u=$a([]),l=me([]),s=me([]);if(typeof t=="function")for(;++n<r;)o(i=this[n],t.call(i,i.parentNode.__data__,n));else for(;++n<r;)o(i=this[n],t);return l.enter=function(){return u},l.exit=function(){return s},l};function hi(t){return{__data__:t}}it.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},it.filter=function(t){var e=[],n,r,i;typeof t!="function"&&(t=Ya(t));for(var a=0,o=this.length;a<o;a++){e.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var u=0,l=r.length;u<l;u++)(i=r[u])&&t.call(i,i.__data__,u,a)&&n.push(i)}return me(e)};function Ya(t){return function(){return Hn(this,t)}}it.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n=this[t],r=n.length-1,i=n[r],a;--r>=0;)(a=n[r])&&(i&&i!==a.nextSibling&&i.parentNode.insertBefore(a,i),i=a);return this},it.sort=function(t){t=Fl.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()};function Fl(t){return arguments.length||(t=et),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}it.each=function(t){return le(this,function(e,n,r){t.call(e,e.__data__,n,r)})};function le(t,e){for(var n=0,r=t.length;n<r;n++)for(var i=t[n],a=0,o=i.length,u;a<o;a++)(u=i[a])&&e(u,a,n);return t}it.call=function(t){var e=w(arguments);return t.apply(e[0]=this,e),this},it.empty=function(){return!this.node()},it.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},it.size=function(){var t=0;return le(this,function(){++t}),t};function $a(t){return Fn(t,se),t}var se=[];f.selection.enter=$a,f.selection.enter.prototype=se,se.append=it.append,se.empty=it.empty,se.node=it.node,se.call=it.call,se.size=it.size,se.select=function(t){for(var e=[],n,r,i,a,o,u=-1,l=this.length;++u<l;){i=(a=this[u]).update,e.push(n=[]),n.parentNode=a.parentNode;for(var s=-1,c=a.length;++s<c;)(o=a[s])?(n.push(i[s]=r=t.call(a.parentNode,o.__data__,s,u)),r.__data__=o.__data__):n.push(null)}return me(e)},se.insert=function(t,e){return arguments.length<2&&(e=Hl(this)),it.insert.call(this,t,e)};function Hl(t){var e,n;return function(r,i,a){var o=t[a].update,u=o.length,l;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(l=o[e])&&++e<u;);return l}}f.select=function(t){var e;return typeof t=="string"?(e=[oi(t,S)],e.parentNode=S.documentElement):(e=[t],e.parentNode=L(t)),me([e])},f.selectAll=function(t){var e;return typeof t=="string"?(e=w(li(t,S)),e.parentNode=S.documentElement):(e=w(t),e.parentNode=null),me([e])},it.on=function(t,e,n){var r=arguments.length;if(r<3){if(typeof t!="string"){r<2&&(e=!1);for(n in t)this.each(Xa(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(Xa(t,e,n))};function Xa(t,e,n){var r="__on"+t,i=t.indexOf("."),a=ja;i>0&&(t=t.slice(0,i));var o=gi.get(t);o&&(t=o,a=Bl);function u(){var c=this[r];c&&(this.removeEventListener(t,c,c.$),delete this[r])}function l(){var c=a(e,w(arguments));u.call(this),this.addEventListener(t,this[r]=c,c.$=n),c._=e}function s(){var c=new RegExp("^__on([^.]+)"+f.requote(t)+"$"),h;for(var g in this)if(h=g.match(c)){var m=this[g];this.removeEventListener(h[1],m,m.$),delete this[g]}}return i?e?l:u:e?ft:s}var gi=f.map({mouseenter:"mouseover",mouseleave:"mouseout"});S&&gi.forEach(function(t){"on"+t in S&&gi.remove(t)});function ja(t,e){return function(n){var r=f.event;f.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{f.event=r}}}function Bl(t,e){var n=ja(t,e);return function(r){var i=this,a=r.relatedTarget;(!a||a!==i&&!(a.compareDocumentPosition(i)&8))&&n.call(i,r)}}var Ne,Ul=0;function Bn(t){var e=".dragsuppress-"+ ++Ul,n="click"+e,r=f.select(E(t)).on("touchmove"+e,pe).on("dragstart"+e,pe).on("selectstart"+e,pe);if(Ne==null&&(Ne="onselectstart"in t?!1:ke(t.style,"userSelect")),Ne){var i=L(t).style,a=i[Ne];i[Ne]="none"}return function(o){if(r.on(e,null),Ne&&(i[Ne]=a),o){var u=function(){r.on(n,null)};r.on(n,function(){pe(),u()},!0),setTimeout(u,0)}}}f.mouse=function(t){return pi(t,ai())};var di=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function pi(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(di<0){var i=E(t);if(i.scrollX||i.scrollY){n=f.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=n[0][0].getScreenCTM();di=!(a.f||a.e),n.remove()}}return di?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}f.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=ai().changedTouches),e){for(var r=0,i=e.length,a;r<i;++r)if((a=e[r]).identifier===n)return pi(t,a)}},f.behavior.drag=function(){var t=ui(i,"drag","dragstart","dragend"),e=null,n=a(ft,f.mouse,E,"mousemove","mouseup"),r=a(Yl,f.touch,ct,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(o,u,l,s,c){return function(){var h=this,g=f.event.target.correspondingElement||f.event.target,m=h.parentNode,b=t.of(h,arguments),d=0,p=o(),y=".drag"+(p==null?"":"-"+p),M,_=f.select(l(g)).on(s+y,N).on(c+y,A),x=Bn(g),D=u(m,p);e?(M=e.apply(h,arguments),M=[M.x-D[0],M.y-D[1]]):M=[0,0],b({type:"dragstart"});function N(){var k=u(m,p),P,I;k&&(P=k[0]-D[0],I=k[1]-D[1],d|=P|I,D=k,b({type:"drag",x:k[0]+M[0],y:k[1]+M[1],dx:P,dy:I}))}function A(){u(m,p)&&(_.on(s+y,null).on(c+y,null),x(d),b({type:"dragend"}))}}}return i.origin=function(o){return arguments.length?(e=o,i):e},f.rebind(i,t,"on")};function Yl(){return f.event.changedTouches[0].identifier}f.touches=function(t,e){return arguments.length<2&&(e=ai().touches),e?w(e).map(function(n){var r=pi(t,n);return r.identifier=n.identifier,r}):[]};var j=1e-6,Un=j*j,tt=Math.PI,Pt=2*tt,$l=Pt-j,gt=tt/2,Q=tt/180,st=180/tt;function Ga(t){return t>0?1:t<0?-1:0}function mi(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Wa(t){return t>1?0:t<-1?tt:Math.acos(t)}function ve(t){return t>1?gt:t<-1?-gt:Math.asin(t)}function Xl(t){return((t=Math.exp(t))-1/t)/2}function Za(t){return((t=Math.exp(t))+1/t)/2}function jl(t){return((t=Math.exp(2*t))-1)/(t+1)}function Va(t){return(t=Math.sin(t/2))*t}var hn=Math.SQRT2,vi=2,Ja=4;f.interpolateZoom=function(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],u=e[2],l=a-n,s=o-r,c=l*l+s*s,h,g;if(c<Un)g=Math.log(u/i)/hn,h=function(M){return[n+M*l,r+M*s,i*Math.exp(hn*M*g)]};else{var m=Math.sqrt(c),b=(u*u-i*i+Ja*c)/(2*i*vi*m),d=(u*u-i*i-Ja*c)/(2*u*vi*m),p=Math.log(Math.sqrt(b*b+1)-b),y=Math.log(Math.sqrt(d*d+1)-d);g=(y-p)/hn,h=function(M){var _=M*g,x=Za(p),D=i/(vi*m)*(x*jl(hn*_+p)-Xl(p));return[n+D*l,r+D*s,i*x/Za(hn*_+p)]}}return h.duration=g*1e3,h},f.behavior.zoom=function(){var t={x:0,y:0,k:1},e,n,r,i=[960,500],a=Ka,o=250,u=0,l="mousedown.zoom",s="mousemove.zoom",c="mouseup.zoom",h,g="touchstart.zoom",m,b=ui(_,"zoomstart","zoom","zoomend"),d,p,y,M;yi||(yi="onwheel"in S?(Yn=function(){return-f.event.deltaY*(f.event.deltaMode?120:1)},"wheel"):"onmousewheel"in S?(Yn=function(){return f.event.wheelDelta},"mousewheel"):(Yn=function(){return-f.event.detail},"MozMousePixelScroll"));function _(R){R.on(l,$).on(yi+".zoom",C).on("dblclick.zoom",H).on(g,T)}_.event=function(R){R.each(function(){var q=b.of(this,arguments),G=t;Oe?f.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},I(q)}).tween("zoom:zoom",function(){var J=i[0],nt=i[1],at=n?n[0]:J/2,ot=n?n[1]:nt/2,kt=f.interpolateZoom([(at-t.x)/t.k,(ot-t.y)/t.k,J/t.k],[(at-G.x)/G.k,(ot-G.y)/G.k,J/G.k]);return function(Lt){var Nt=kt(Lt),Tt=J/Nt[2];this.__chart__=t={x:at-Nt[0]*Tt,y:ot-Nt[1]*Tt,k:Tt},X(q)}}).each("interrupt.zoom",function(){B(q)}).each("end.zoom",function(){B(q)}):(this.__chart__=t,I(q),X(q),B(q))})},_.translate=function(R){return arguments.length?(t={x:+R[0],y:+R[1],k:t.k},P(),_):[t.x,t.y]},_.scale=function(R){return arguments.length?(t={x:t.x,y:t.y,k:null},N(+R),P(),_):t.k},_.scaleExtent=function(R){return arguments.length?(a=R==null?Ka:[+R[0],+R[1]],_):a},_.center=function(R){return arguments.length?(r=R&&[+R[0],+R[1]],_):r},_.size=function(R){return arguments.length?(i=R&&[+R[0],+R[1]],_):i},_.duration=function(R){return arguments.length?(o=+R,_):o},_.x=function(R){return arguments.length?(p=R,d=R.copy(),t={x:0,y:0,k:1},_):p},_.y=function(R){return arguments.length?(M=R,y=R.copy(),t={x:0,y:0,k:1},_):M};function x(R){return[(R[0]-t.x)/t.k,(R[1]-t.y)/t.k]}function D(R){return[R[0]*t.k+t.x,R[1]*t.k+t.y]}function N(R){t.k=Math.max(a[0],Math.min(a[1],R))}function A(R,q){q=D(q),t.x+=R[0]-q[0],t.y+=R[1]-q[1]}function k(R,q,G,J){R.__chart__={x:t.x,y:t.y,k:t.k},N(Math.pow(2,J)),A(n=q,G),R=f.select(R),o>0&&(R=R.transition().duration(o)),R.call(_.event)}function P(){p&&p.domain(d.range().map(function(R){return(R-t.x)/t.k}).map(d.invert)),M&&M.domain(y.range().map(function(R){return(R-t.y)/t.k}).map(y.invert))}function I(R){u++||R({type:"zoomstart"})}function X(R){P(),R({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function B(R){--u||(R({type:"zoomend"}),n=null)}function $(){var R=this,q=b.of(R,arguments),G=0,J=f.select(E(R)).on(s,ot).on(c,kt),nt=x(f.mouse(R)),at=Bn(R);Pr.call(R),I(q);function ot(){G=1,A(f.mouse(R),nt),X(q)}function kt(){J.on(s,null).on(c,null),at(G),B(q)}}function T(){var R=this,q=b.of(R,arguments),G={},J=0,nt,at=".zoom-"+f.event.changedTouches[0].identifier,ot="touchmove"+at,kt="touchend"+at,Lt=[],Nt=f.select(R),Tt=Bn(R);Rt(),I(q),Nt.on(l,null).on(g,Rt);function bt(){var Vt=f.touches(R);return nt=t.k,Vt.forEach(function(yt){yt.identifier in G&&(G[yt.identifier]=x(yt))}),Vt}function Rt(){var Vt=f.event.target;f.select(Vt).on(ot,Fe).on(kt,Cf),Lt.push(Vt);for(var yt=f.event.changedTouches,Ft=0,ie=yt.length;Ft<ie;++Ft)G[yt[Ft].identifier]=null;var Ht=bt(),rn=Date.now();if(Ht.length===1){if(rn-m<500){var He=Ht[0];k(R,He,G[He.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),pe()}m=rn}else if(Ht.length>1){var He=Ht[0],Se=Ht[1],qr=He[0]-Se[0],fl=He[1]-Se[1];J=qr*qr+fl*fl}}function Fe(){var Vt=f.touches(R),yt,Ft,ie,Ht;Pr.call(R);for(var rn=0,He=Vt.length;rn<He;++rn,Ht=null)if(ie=Vt[rn],Ht=G[ie.identifier]){if(Ft)break;yt=ie,Ft=Ht}if(Ht){var Se=(Se=ie[0]-yt[0])*Se+(Se=ie[1]-yt[1])*Se,qr=J&&Math.sqrt(Se/J);yt=[(yt[0]+ie[0])/2,(yt[1]+ie[1])/2],Ft=[(Ft[0]+Ht[0])/2,(Ft[1]+Ht[1])/2],N(qr*nt)}m=null,A(yt,Ft),X(q)}function Cf(){if(f.event.touches.length){for(var Vt=f.event.changedTouches,yt=0,Ft=Vt.length;yt<Ft;++yt)delete G[Vt[yt].identifier];for(var ie in G)return void bt()}f.selectAll(Lt).on(at,null),Nt.on(l,$).on(g,T),Tt(),B(q)}}function C(){var R=b.of(this,arguments);h?clearTimeout(h):(Pr.call(this),e=x(n=r||f.mouse(this)),I(R)),h=setTimeout(function(){h=null,B(R)},50),pe(),N(Math.pow(2,Yn()*.002)*t.k),A(n,e),X(R)}function H(){var R=f.mouse(this),q=Math.log(t.k)/Math.LN2;k(this,R,x(R),f.event.shiftKey?Math.ceil(q)-1:Math.floor(q)+1)}return f.rebind(_,b,"on")};var Ka=[0,1/0],Yn,yi;f.color=Ae;function Ae(){}Ae.prototype.toString=function(){return this.rgb()+""},f.hsl=ee;function ee(t,e,n){return this instanceof ee?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ee?new ee(t.h,t.s,t.l):au(""+t,uu,ee):new ee(t,e,n)}var _i=ee.prototype=new Ae;_i.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ee(this.h,this.s,this.l/t)},_i.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ee(this.h,this.s,t*this.l)},_i.rgb=function(){return xi(this.h,this.s,this.l)};function xi(t,e,n){var r,i;t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;function a(u){return u>360?u-=360:u<0&&(u+=360),u<60?r+(i-r)*u/60:u<180?i:u<240?r+(i-r)*(240-u)/60:r}function o(u){return Math.round(a(u)*255)}return new zt(o(t+120),o(t),o(t-120))}f.hcl=Xt;function Xt(t,e,n){return this instanceof Xt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Xt?new Xt(t.h,t.c,t.l):t instanceof jt?ru(t.l,t.a,t.b):ru((t=ou((t=f.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Xt(t,e,n)}var Mi=Xt.prototype=new Ae;Mi.brighter=function(t){return new Xt(this.h,this.c,Math.min(100,this.l+$n*(arguments.length?t:1)))},Mi.darker=function(t){return new Xt(this.h,this.c,Math.max(0,this.l-$n*(arguments.length?t:1)))},Mi.rgb=function(){return bi(this.h,this.c,this.l).rgb()};function bi(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new jt(n,Math.cos(t*=Q)*e,Math.sin(t)*e)}f.lab=jt;function jt(t,e,n){return this instanceof jt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof jt?new jt(t.l,t.a,t.b):t instanceof Xt?bi(t.h,t.c,t.l):ou((t=zt(t)).r,t.g,t.b):new jt(t,e,n)}var $n=18,Qa=.95047,tu=1,eu=1.08883,wi=jt.prototype=new Ae;wi.brighter=function(t){return new jt(Math.min(100,this.l+$n*(arguments.length?t:1)),this.a,this.b)},wi.darker=function(t){return new jt(Math.max(0,this.l-$n*(arguments.length?t:1)),this.a,this.b)},wi.rgb=function(){return nu(this.l,this.a,this.b)};function nu(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=Si(i)*Qa,r=Si(r)*tu,a=Si(a)*eu,new zt(ki(3.2404542*i-1.5371385*r-.4985314*a),ki(-.969266*i+1.8760108*r+.041556*a),ki(.0556434*i-.2040259*r+1.0572252*a))}function ru(t,e,n){return t>0?new Xt(Math.atan2(n,e)*st,Math.sqrt(e*e+n*n),t):new Xt(NaN,NaN,t)}function Si(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function Ei(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ki(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}f.rgb=zt;function zt(t,e,n){return this instanceof zt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof zt?new zt(t.r,t.g,t.b):au(""+t,zt,xi):new zt(t,e,n)}function iu(t){return new zt(t>>16,t>>8&255,t&255)}function Xn(t){return iu(t)+""}var jn=zt.prototype=new Ae;jn.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return!e&&!n&&!r?new zt(i,i,i):(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new zt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t)))},jn.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new zt(t*this.r,t*this.g,t*this.b)},jn.hsl=function(){return uu(this.r,this.g,this.b)},jn.toString=function(){return"#"+$e(this.r)+$e(this.g)+$e(this.b)};function $e(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function au(t,e,n){var r=0,i=0,a=0,o,u,l;if(o=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()),o)switch(u=o[2].split(","),o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return e(Ai(u[0]),Ai(u[1]),Ai(u[2]))}return(l=Gn.get(t))?e(l.r,l.g,l.b):(t!=null&&t.charAt(0)==="#"&&!isNaN(l=parseInt(t.slice(1),16))&&(t.length===4?(r=(l&3840)>>4,r=r>>4|r,i=l&240,i=i>>4|i,a=l&15,a=a<<4|a):t.length===7&&(r=(l&16711680)>>16,i=(l&65280)>>8,a=l&255)),e(r,i,a))}function uu(t,e,n){var r=Math.min(t/=255,e/=255,n/=255),i=Math.max(t,e,n),a=i-r,o,u,l=(i+r)/2;return a?(u=l<.5?a/(i+r):a/(2-i-r),t==i?o=(e-n)/a+(e<n?6:0):e==i?o=(n-t)/a+2:o=(t-e)/a+4,o*=60):(o=NaN,u=l>0&&l<1?0:o),new ee(o,u,l)}function ou(t,e,n){t=Ni(t),e=Ni(e),n=Ni(n);var r=Ei((.4124564*t+.3575761*e+.1804375*n)/Qa),i=Ei((.2126729*t+.7151522*e+.072175*n)/tu),a=Ei((.0193339*t+.119192*e+.9503041*n)/eu);return jt(116*i-16,500*(r-i),200*(i-a))}function Ni(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ai(t){var e=parseFloat(t);return t.charAt(t.length-1)==="%"?Math.round(e*2.55):e}var Gn=f.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Gn.forEach(function(t,e){Gn.set(t,iu(e))});function ut(t){return typeof t=="function"?t:function(){return t}}f.functor=ut,f.xhr=Di(ct);function Di(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=null),Wn(e,n,t,r)}}function Wn(t,e,n,r){var i={},a=f.dispatch("beforesend","progress","load","error"),o={},u=new XMLHttpRequest,l=null;this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(t)&&(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=s:u.onreadystatechange=function(){u.readyState>3&&s()};function s(){var c=u.status,h;if(!c&&Wl(u)||c>=200&&c<300||c===304){try{h=n.call(i,u)}catch(g){a.error.call(i,g);return}a.load.call(i,h)}else a.error.call(i,u)}return u.onprogress=function(c){var h=f.event;f.event=c;try{a.progress.call(i,u)}finally{f.event=h}},i.header=function(c,h){return c=(c+"").toLowerCase(),arguments.length<2?o[c]:(h==null?delete o[c]:o[c]=h+"",i)},i.mimeType=function(c){return arguments.length?(e=c==null?null:c+"",i):e},i.responseType=function(c){return arguments.length?(l=c,i):l},i.response=function(c){return n=c,i},["get","post"].forEach(function(c){i[c]=function(){return i.send.apply(i,[c].concat(w(arguments)))}}),i.send=function(c,h,g){if(arguments.length===2&&typeof h=="function"&&(g=h,h=null),u.open(c,t,!0),e!=null&&!("accept"in o)&&(o.accept=e+",*/*"),u.setRequestHeader)for(var m in o)u.setRequestHeader(m,o[m]);return e!=null&&u.overrideMimeType&&u.overrideMimeType(e),l!=null&&(u.responseType=l),g!=null&&i.on("error",g).on("load",function(b){g(null,b)}),a.beforesend.call(i,u),u.send(h??null),i},i.abort=function(){return u.abort(),i},f.rebind(i,a,"on"),r==null?i:i.get(Gl(r))}function Gl(t){return t.length===1?function(e,n){t(e==null?n:null)}:t}function Wl(t){var e=t.responseType;return e&&e!=="text"?t.response:t.responseText}f.dsv=function(t,e){var n=new RegExp('["'+t+`
]`),r=t.charCodeAt(0);function i(s,c,h){arguments.length<3&&(h=c,c=null);var g=Wn(s,e,c==null?a:o(c),h);return g.row=function(m){return arguments.length?g.response((c=m)==null?a:o(m)):c},g}function a(s){return i.parse(s.responseText)}function o(s){return function(c){return i.parse(c.responseText,s)}}i.parse=function(s,c){var h;return i.parseRows(s,function(g,m){if(h)return h(g,m-1);var b=new Function("d","return {"+g.map(function(d,p){return JSON.stringify(d)+": d["+p+"]"}).join(",")+"}");h=c?function(d,p){return c(b(d),p)}:b})},i.parseRows=function(s,c){var h={},g={},m=[],b=s.length,d=0,p=0,y,M;function _(){if(d>=b)return g;if(M)return M=!1,h;var D=d;if(s.charCodeAt(D)===34){for(var N=D;N++<b;)if(s.charCodeAt(N)===34){if(s.charCodeAt(N+1)!==34)break;++N}d=N+2;var A=s.charCodeAt(N+1);return A===13?(M=!0,s.charCodeAt(N+2)===10&&++d):A===10&&(M=!0),s.slice(D+1,N).replace(/""/g,'"')}for(;d<b;){var A=s.charCodeAt(d++),k=1;if(A===10)M=!0;else if(A===13)M=!0,s.charCodeAt(d)===10&&(++d,++k);else if(A!==r)continue;return s.slice(D,d-k)}return s.slice(D)}for(;(y=_())!==g;){for(var x=[];y!==h&&y!==g;)x.push(y),y=_();c&&(x=c(x,p++))==null||m.push(x)}return m},i.format=function(s){if(Array.isArray(s[0]))return i.formatRows(s);var c=new oe,h=[];return s.forEach(function(g){for(var m in g)c.has(m)||h.push(c.add(m))}),[h.map(l).join(t)].concat(s.map(function(g){return h.map(function(m){return l(g[m])}).join(t)})).join(`
`)},i.formatRows=function(s){return s.map(u).join(`
`)};function u(s){return s.map(l).join(t)}function l(s){return n.test(s)?'"'+s.replace(/\"/g,'""')+'"':s}return i},f.csv=f.dsv(",","text/csv"),f.tsv=f.dsv("	","text/tab-separated-values");var Zn,Vn,Jn,Kn,lu=this[ke(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};f.timer=function(){Qn.apply(this,arguments)};function Qn(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,a={c:t,t:i,n:null};return Vn?Vn.n=a:Zn=a,Vn=a,Jn||(Kn=clearTimeout(Kn),Jn=1,lu(Li)),a}function Li(){var t=su(),e=cu()-t;e>24?(isFinite(e)&&(clearTimeout(Kn),Kn=setTimeout(Li,e)),Jn=0):(Jn=1,lu(Li))}f.timer.flush=function(){su(),cu()};function su(){for(var t=Date.now(),e=Zn;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function cu(){for(var t,e=Zn,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Zn=e.n;return Vn=t,n}function zi(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}f.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Zl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"].map(Vl);f.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=f.round(t,zi(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))),Zl[8+n/3]};function Vl(t,e){var n=Math.pow(10,V(8-e)*3);return{scale:e>8?function(r){return r/n}:function(r){return r*n},symbol:t}}function Jl(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(o,u){for(var l=o.length,s=[],c=0,h=r[0],g=0;l>0&&h>0&&(g+h+1>u&&(h=Math.max(1,u-g)),s.push(o.substring(l-=h,l+h)),!((g+=h+1)>u));)h=r[c=(c+1)%r.length];return s.reverse().join(n)}:ct;return function(o){var u=fu.exec(o),l=u[1]||" ",s=u[2]||">",c=u[3]||"-",h=u[4]||"",g=u[5],m=+u[6],b=u[7],d=u[8],p=u[9],y=1,M="",_="",x=!1,D=!0;switch(d&&(d=+d.substring(1)),(g||l==="0"&&s==="=")&&(g=l="0",s="="),p){case"n":b=!0,p="g";break;case"%":y=100,_="%",p="f";break;case"p":y=100,_="%",p="r";break;case"b":case"o":case"x":case"X":h==="#"&&(M="0"+p.toLowerCase());case"c":D=!1;case"d":x=!0,d=0;break;case"s":y=-1,p="r";break}h==="$"&&(M=i[0],_=i[1]),p=="r"&&!d&&(p="g"),d!=null&&(p=="g"?d=Math.max(1,Math.min(21,d)):(p=="e"||p=="f")&&(d=Math.max(0,Math.min(20,d)))),p=Kl.get(p)||Ql;var N=g&&b;return function(A){var k=_;if(x&&A%1)return"";var P=A<0||A===0&&1/A<0?(A=-A,"-"):c==="-"?"":c;if(y<0){var I=f.formatPrefix(A,d);A=I.scale(A),k=I.symbol+_}else A*=y;A=p(A,d);var X=A.lastIndexOf("."),B,$;if(X<0){var T=D?A.lastIndexOf("e"):-1;T<0?(B=A,$=""):(B=A.substring(0,T),$=A.substring(T))}else B=A.substring(0,X),$=e+A.substring(X+1);!g&&b&&(B=a(B,1/0));var C=M.length+B.length+$.length+(N?0:P.length),H=C<m?new Array(C=m-C+1).join(l):"";return N&&(B=a(H+B,H.length?m-$.length:1/0)),P+=M,A=B+$,(s==="<"?P+A+H:s===">"?H+P+A:s==="^"?H.substring(0,C>>=1)+P+A+H.substring(C):P+(N?A:H+A))+k}}}var fu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Kl=f.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=f.round(t,zi(t,e))).toFixed(Math.max(0,Math.min(20,zi(t*(1+1e-15),e))))}});function Ql(t){return t+""}var W=f.time={},Mt=Date;function ce(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}ce.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){fe.setUTCDate.apply(this._,arguments)},setDay:function(){fe.setUTCDay.apply(this._,arguments)},setFullYear:function(){fe.setUTCFullYear.apply(this._,arguments)},setHours:function(){fe.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fe.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fe.setUTCMinutes.apply(this._,arguments)},setMonth:function(){fe.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fe.setUTCSeconds.apply(this._,arguments)},setTime:function(){fe.setTime.apply(this._,arguments)}};var fe=Date.prototype;function De(t,e,n){function r(s){var c=t(s),h=a(c,1);return s-c<h-s?c:h}function i(s){return e(s=t(new Mt(s-1)),1),s}function a(s,c){return e(s=new Mt(+s),c),s}function o(s,c,h){var g=i(s),m=[];if(h>1)for(;g<c;)n(g)%h||m.push(new Date(+g)),e(g,1);else for(;g<c;)m.push(new Date(+g)),e(g,1);return m}function u(s,c,h){try{Mt=ce;var g=new ce;return g._=s,o(g,c,h)}finally{Mt=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var l=t.utc=tr(t);return l.floor=l,l.round=tr(r),l.ceil=tr(i),l.offset=tr(a),l.range=u,t}function tr(t){return function(e,n){try{Mt=ce;var r=new ce;return r._=e,t(r,n)._}finally{Mt=Date}}}W.year=De(function(t){return t=W.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),W.years=W.year.range,W.years.utc=W.year.utc.range,W.day=De(function(t){var e=new Mt(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),W.days=W.day.range,W.days.utc=W.day.utc.range,W.dayOfYear=function(t){var e=W.year(t);return Math.floor((t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=W[t]=De(function(r){return(r=W.day(r)).setDate(r.getDate()-(r.getDay()+e)%7),r},function(r,i){r.setDate(r.getDate()+Math.floor(i)*7)},function(r){var i=W.year(r).getDay();return Math.floor((W.dayOfYear(r)+(i+e)%7)/7)-(i!==e)});W[t+"s"]=n.range,W[t+"s"].utc=n.utc.range,W[t+"OfYear"]=function(r){var i=W.year(r).getDay();return Math.floor((W.dayOfYear(r)+(i+e)%7)/7)}}),W.week=W.sunday,W.weeks=W.sunday.range,W.weeks.utc=W.sunday.utc.range,W.weekOfYear=W.sundayOfYear;function ts(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,u=t.months,l=t.shortMonths;function s(T){var C=T.length;function H(R){for(var q=[],G=-1,J=0,nt,at,ot;++G<C;)T.charCodeAt(G)===37&&(q.push(T.slice(J,G)),(at=hu[nt=T.charAt(++G)])!=null&&(nt=T.charAt(++G)),(ot=x[nt])&&(nt=ot(R,at??(nt==="e"?" ":"0"))),q.push(nt),J=G+1);return q.push(T.slice(J,G)),q.join("")}return H.parse=function(R){var q={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},G=c(q,T,R,0);if(G!=R.length)return null;"p"in q&&(q.H=q.H%12+q.p*12);var J=q.Z!=null&&Mt!==ce,nt=new(J?ce:Mt);return"j"in q?nt.setFullYear(q.y,0,q.j):"W"in q||"U"in q?("w"in q||(q.w="W"in q?1:0),nt.setFullYear(q.y,0,1),nt.setFullYear(q.y,0,"W"in q?(q.w+6)%7+q.W*7-(nt.getDay()+5)%7:q.w+q.U*7-(nt.getDay()+6)%7)):nt.setFullYear(q.y,q.m,q.d),nt.setHours(q.H+(q.Z/100|0),q.M+q.Z%100,q.S,q.L),J?nt._:nt},H.toString=function(){return T},H}function c(T,C,H,R){for(var q,G,J,nt=0,at=C.length,ot=H.length;nt<at;){if(R>=ot)return-1;if(q=C.charCodeAt(nt++),q===37){if(J=C.charAt(nt++),G=D[J in hu?C.charAt(nt++):J],!G||(R=G(T,H,R))<0)return-1}else if(q!=H.charCodeAt(R++))return-1}return R}s.utc=function(T){var C=s(T);function H(R){try{Mt=ce;var q=new Mt;return q._=R,C(q)}finally{Mt=Date}}return H.parse=function(R){try{Mt=ce;var q=C.parse(R);return q&&q._}finally{Mt=Date}},H.toString=C.toString,H},s.multi=s.utc.multi=ps;var h=f.map(),g=er(a),m=nr(a),b=er(o),d=nr(o),p=er(u),y=nr(u),M=er(l),_=nr(l);i.forEach(function(T,C){h.set(T.toLowerCase(),C)});var x={a:function(T){return o[T.getDay()]},A:function(T){return a[T.getDay()]},b:function(T){return l[T.getMonth()]},B:function(T){return u[T.getMonth()]},c:s(e),d:function(T,C){return Dt(T.getDate(),C,2)},e:function(T,C){return Dt(T.getDate(),C,2)},H:function(T,C){return Dt(T.getHours(),C,2)},I:function(T,C){return Dt(T.getHours()%12||12,C,2)},j:function(T,C){return Dt(1+W.dayOfYear(T),C,3)},L:function(T,C){return Dt(T.getMilliseconds(),C,3)},m:function(T,C){return Dt(T.getMonth()+1,C,2)},M:function(T,C){return Dt(T.getMinutes(),C,2)},p:function(T){return i[+(T.getHours()>=12)]},S:function(T,C){return Dt(T.getSeconds(),C,2)},U:function(T,C){return Dt(W.sundayOfYear(T),C,2)},w:function(T){return T.getDay()},W:function(T,C){return Dt(W.mondayOfYear(T),C,2)},x:s(n),X:s(r),y:function(T,C){return Dt(T.getFullYear()%100,C,2)},Y:function(T,C){return Dt(T.getFullYear()%1e4,C,4)},Z:gs,"%":function(){return"%"}},D={a:N,A,b:k,B:P,c:I,d:du,e:du,H:pu,I:pu,j:ss,L:hs,m:ls,M:cs,p:$,S:fs,U:ns,w:es,W:rs,x:X,X:B,y:as,Y:is,Z:us,"%":ds};function N(T,C,H){b.lastIndex=0;var R=b.exec(C.slice(H));return R?(T.w=d.get(R[0].toLowerCase()),H+R[0].length):-1}function A(T,C,H){g.lastIndex=0;var R=g.exec(C.slice(H));return R?(T.w=m.get(R[0].toLowerCase()),H+R[0].length):-1}function k(T,C,H){M.lastIndex=0;var R=M.exec(C.slice(H));return R?(T.m=_.get(R[0].toLowerCase()),H+R[0].length):-1}function P(T,C,H){p.lastIndex=0;var R=p.exec(C.slice(H));return R?(T.m=y.get(R[0].toLowerCase()),H+R[0].length):-1}function I(T,C,H){return c(T,x.c.toString(),C,H)}function X(T,C,H){return c(T,x.x.toString(),C,H)}function B(T,C,H){return c(T,x.X.toString(),C,H)}function $(T,C,H){var R=h.get(C.slice(H,H+=2).toLowerCase());return R==null?-1:(T.p=R,H)}return s}var hu={"-":"",_:" ",0:"0"},dt=/^\s*\d+/,gu=/^%/;function Dt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function er(t){return new RegExp("^(?:"+t.map(f.requote).join("|")+")","i")}function nr(t){for(var e=new Yt,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function es(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ns(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function rs(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function is(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function as(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+2));return r?(t.y=os(+r[0]),n+r[0].length):-1}function us(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function os(t){return t+(t>68?1900:2e3)}function ls(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function du(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ss(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function pu(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function cs(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function fs(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function hs(t,e,n){dt.lastIndex=0;var r=dt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function gs(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=V(e)/60|0,i=V(e)%60;return n+Dt(r,"0",2)+Dt(i,"0",2)}function ds(t,e,n){gu.lastIndex=0;var r=gu.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ps(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(r){for(var i=0,a=t[i];!a[1](r);)a=t[++i];return a[0](r)}}f.locale=function(t){return{numberFormat:Jl(t),timeFormat:ts(t)}};var mu=f.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});f.format=mu.numberFormat,f.geo={};function Ti(){}Ti.prototype={s:0,t:0,add:function(t){vu(t,this.t,rr),vu(rr.s,this.s,this),this.s?this.t+=rr.t:this.s=rr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rr=new Ti;function vu(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}f.geo.stream=function(t,e){t&&yu.hasOwnProperty(t.type)?yu[t.type](t,e):ir(t,e)};function ir(t,e){t&&_u.hasOwnProperty(t.type)&&_u[t.type](t,e)}var yu={Feature:function(t,e){ir(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ir(n[r].geometry,e)}},_u={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ri(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ri(n[r],e,0)},Polygon:function(t,e){xu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xu(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ir(n[r],e)}};function Ri(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function xu(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ri(t[n],e,1);e.polygonEnd()}f.geo.area=function(t){return ar=0,f.geo.stream(t,Ct),ar};var ar,Le=new Ti,Ct={sphere:function(){ar+=4*tt},point:ft,lineStart:ft,lineEnd:ft,polygonStart:function(){Le.reset(),Ct.lineStart=ms},polygonEnd:function(){var t=2*Le;ar+=t<0?4*tt+t:t,Ct.lineStart=Ct.lineEnd=Ct.point=ft}};function ms(){var t,e,n,r,i;Ct.point=function(o,u){Ct.point=a,n=(t=o)*Q,r=Math.cos(u=(e=u)*Q/2+tt/4),i=Math.sin(u)};function a(o,u){o*=Q,u=u*Q/2+tt/4;var l=o-n,s=l>=0?1:-1,c=s*l,h=Math.cos(u),g=Math.sin(u),m=i*g,b=r*h+m*Math.cos(c),d=m*s*Math.sin(c);Le.add(Math.atan2(d,b)),n=o,r=h,i=g}Ct.lineEnd=function(){a(t,e)}}function ze(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ur(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Xe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function or(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function lr(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function sr(t){return[Math.atan2(t[1],t[0]),ve(t[2])]}function cr(t,e){return V(t[0]-e[0])<j&&V(t[1]-e[1])<j}f.geo.bounds=(function(){var t,e,n,r,i,a,o,u,l,s,c,h={point:g,lineStart:b,lineEnd:d,polygonStart:function(){h.point=p,h.lineStart=y,h.lineEnd=M,l=0,Ct.polygonStart()},polygonEnd:function(){Ct.polygonEnd(),h.point=g,h.lineStart=b,h.lineEnd=d,Le<0?(t=-(n=180),e=-(r=90)):l>j?r=90:l<-j&&(e=-90),c[0]=t,c[1]=n}};function g(N,A){s.push(c=[t=N,n=N]),A<e&&(e=A),A>r&&(r=A)}function m(N,A){var k=ze([N*Q,A*Q]);if(u){var P=Xe(u,k),I=[P[1],-P[0],0],X=Xe(I,P);lr(X),X=sr(X);var B=N-i,$=B>0?1:-1,T=X[0]*st*$,C=V(B)>180;if(C^($*i<T&&T<$*N)){var H=X[1]*st;H>r&&(r=H)}else if(T=(T+360)%360-180,C^($*i<T&&T<$*N)){var H=-X[1]*st;H<e&&(e=H)}else A<e&&(e=A),A>r&&(r=A);C?N<i?_(t,N)>_(t,n)&&(n=N):_(N,n)>_(t,n)&&(t=N):n>=t?(N<t&&(t=N),N>n&&(n=N)):N>i?_(t,N)>_(t,n)&&(n=N):_(N,n)>_(t,n)&&(t=N)}else g(N,A);u=k,i=N}function b(){h.point=m}function d(){c[0]=t,c[1]=n,h.point=g,u=null}function p(N,A){if(u){var k=N-i;l+=V(k)>180?k+(k>0?360:-360):k}else a=N,o=A;Ct.point(N,A),m(N,A)}function y(){Ct.lineStart()}function M(){p(a,o),Ct.lineEnd(),V(l)>j&&(t=-(n=180)),c[0]=t,c[1]=n,u=null}function _(N,A){return(A-=N)<0?A+360:A}function x(N,A){return N[0]-A[0]}function D(N,A){return A[0]<=A[1]?A[0]<=N&&N<=A[1]:N<A[0]||A[1]<N}return function(N){r=n=-(t=e=1/0),s=[],f.geo.stream(N,h);var A=s.length;if(A){s.sort(x);for(var k=1,P=s[0],I,X=[P];k<A;++k)I=s[k],D(I[0],P)||D(I[1],P)?(_(P[0],I[1])>_(P[0],P[1])&&(P[1]=I[1]),_(I[0],P[1])>_(P[0],P[1])&&(P[0]=I[0])):X.push(P=I);for(var B=-1/0,$,A=X.length-1,k=0,P=X[A],I;k<=A;P=I,++k)I=X[k],($=_(P[1],I[0]))>B&&(B=$,t=I[0],n=P[1])}return s=c=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}})(),f.geo.centroid=function(t){gn=fr=Te=Re=he=ye=_e=ne=je=Ge=xe=0,f.geo.stream(t,Gt);var e=je,n=Ge,r=xe,i=e*e+n*n+r*r;return i<Un&&(e=ye,n=_e,r=ne,fr<j&&(e=Te,n=Re,r=he),i=e*e+n*n+r*r,i<Un)?[NaN,NaN]:[Math.atan2(n,e)*st,ve(r/Math.sqrt(i))*st]};var gn,fr,Te,Re,he,ye,_e,ne,je,Ge,xe,Gt={sphere:ft,point:Ci,lineStart:Mu,lineEnd:bu,polygonStart:function(){Gt.lineStart=vs},polygonEnd:function(){Gt.lineStart=Mu}};function Ci(t,e){t*=Q;var n=Math.cos(e*=Q);dn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function dn(t,e,n){++gn,Te+=(t-Te)/gn,Re+=(e-Re)/gn,he+=(n-he)/gn}function Mu(){var t,e,n;Gt.point=function(i,a){i*=Q;var o=Math.cos(a*=Q);t=o*Math.cos(i),e=o*Math.sin(i),n=Math.sin(a),Gt.point=r,dn(t,e,n)};function r(i,a){i*=Q;var o=Math.cos(a*=Q),u=o*Math.cos(i),l=o*Math.sin(i),s=Math.sin(a),c=Math.atan2(Math.sqrt((c=e*s-n*l)*c+(c=n*u-t*s)*c+(c=t*l-e*u)*c),t*u+e*l+n*s);fr+=c,ye+=c*(t+(t=u)),_e+=c*(e+(e=l)),ne+=c*(n+(n=s)),dn(t,e,n)}}function bu(){Gt.point=Ci}function vs(){var t,e,n,r,i;Gt.point=function(o,u){t=o,e=u,Gt.point=a,o*=Q;var l=Math.cos(u*=Q);n=l*Math.cos(o),r=l*Math.sin(o),i=Math.sin(u),dn(n,r,i)},Gt.lineEnd=function(){a(t,e),Gt.lineEnd=bu,Gt.point=Ci};function a(o,u){o*=Q;var l=Math.cos(u*=Q),s=l*Math.cos(o),c=l*Math.sin(o),h=Math.sin(u),g=r*h-i*c,m=i*s-n*h,b=n*c-r*s,d=Math.sqrt(g*g+m*m+b*b),p=n*s+r*c+i*h,y=d&&-Wa(p)/d,M=Math.atan2(d,p);je+=y*g,Ge+=y*m,xe+=y*b,fr+=M,ye+=M*(n+(n=s)),_e+=M*(r+(r=c)),ne+=M*(i+(i=h)),dn(n,r,i)}}function wu(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function pn(){return!0}function Su(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(d){if(!((p=d.length-1)<=0)){var p,y=d[0],M=d[p];if(cr(y,M)){i.lineStart();for(var _=0;_<p;++_)i.point((y=d[_])[0],y[1]);i.lineEnd();return}var x=new hr(y,d,null,!0),D=new hr(y,null,x,!1);x.o=D,a.push(x),o.push(D),x=new hr(M,d,null,!1),D=new hr(M,null,x,!0),x.o=D,a.push(x),o.push(D)}}),o.sort(e),Eu(a),Eu(o),!!a.length){for(var u=0,l=n,s=o.length;u<s;++u)o[u].e=l=!l;for(var c=a[0],h,g;;){for(var m=c,b=!0;m.v;)if((m=m.n)===c)return;h=m.z,i.lineStart();do{if(m.v=m.o.v=!0,m.e){if(b)for(var u=0,s=h.length;u<s;++u)i.point((g=h[u])[0],g[1]);else r(m.x,m.n.x,1,i);m=m.n}else{if(b){h=m.p.z;for(var u=h.length-1;u>=0;--u)i.point((g=h[u])[0],g[1])}else r(m.x,m.p.x,-1,i);m=m.p}m=m.o,h=m.z,b=!b}while(!m.v);i.lineEnd()}}}function Eu(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function hr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ku(t,e,n,r){return function(i,a){var o=e(a),u=i.invert(r[0],r[1]),l={point:s,lineStart:h,lineEnd:g,polygonStart:function(){l.point=_,l.lineStart=x,l.lineEnd=D,m=[],y=[]},polygonEnd:function(){l.point=s,l.lineStart=h,l.lineEnd=g,m=f.merge(m);var N=ws(u,y);m.length?(p||(a.polygonStart(),p=!0),Su(m,_s,N,n,a)):N&&(p||(a.polygonStart(),p=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),p&&(a.polygonEnd(),p=!1),m=y=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function s(N,A){var k=i(N,A);t(N=k[0],A=k[1])&&a.point(N,A)}function c(N,A){var k=i(N,A);o.point(k[0],k[1])}function h(){l.point=c,o.lineStart()}function g(){l.point=s,o.lineEnd()}var m,b=Nu(),d=e(b),p=!1,y,M;function _(N,A){M.push([N,A]);var k=i(N,A);d.point(k[0],k[1])}function x(){d.lineStart(),M=[]}function D(){_(M[0][0],M[0][1]),d.lineEnd();var N=d.clean(),A=b.buffer(),k,P=A.length;if(M.pop(),y.push(M),M=null,!!P){if(N&1){k=A[0];var P=k.length-1,I=-1,X;if(P>0){for(p||(a.polygonStart(),p=!0),a.lineStart();++I<P;)a.point((X=k[I])[0],X[1]);a.lineEnd()}return}P>1&&N&2&&A.push(A.pop().concat(A.shift())),m.push(A.filter(ys))}}return l}}function ys(t){return t.length>1}function Nu(){var t=[],e;return{lineStart:function(){t.push(e=[])},point:function(n,r){e.push([n,r])},lineEnd:ft,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function _s(t,e){return((t=t.x)[0]<0?t[1]-gt-j:gt-t[1])-((e=e.x)[0]<0?e[1]-gt-j:gt-e[1])}var Au=ku(pn,xs,bs,[-tt,-tt/2]);function xs(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,o){var u=a>0?tt:-tt,l=V(a-e);V(l-tt)<j?(t.point(e,n=(n+o)/2>0?gt:-gt),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(u,n),t.point(a,n),i=0):r!==u&&l>=tt&&(V(e-r)<j&&(e-=r*j),V(a-u)<j&&(a-=u*j),n=Ms(e,n,a,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(u,n),i=0),t.point(e=a,n=o),r=u},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Ms(t,e,n,r){var i,a,o=Math.sin(t-n);return V(o)>j?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function bs(t,e,n,r){var i;if(t==null)i=n*gt,r.point(-tt,i),r.point(0,i),r.point(tt,i),r.point(tt,0),r.point(tt,-i),r.point(0,-i),r.point(-tt,-i),r.point(-tt,0),r.point(-tt,i);else if(V(t[0]-e[0])>j){var a=t[0]<e[0]?tt:-tt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function ws(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Le.reset();for(var u=0,l=e.length;u<l;++u){var s=e[u],c=s.length;if(c)for(var h=s[0],g=h[0],m=h[1]/2+tt/4,b=Math.sin(m),d=Math.cos(m),p=1;;){p===c&&(p=0),t=s[p];var y=t[0],M=t[1]/2+tt/4,_=Math.sin(M),x=Math.cos(M),D=y-g,N=D>=0?1:-1,A=N*D,k=A>tt,P=b*_;if(Le.add(Math.atan2(P*N*Math.sin(A),d*x+P*Math.cos(A))),a+=k?D+N*Pt:D,k^g>=n^y>=n){var I=Xe(ze(h),ze(t));lr(I);var X=Xe(i,I);lr(X);var B=(k^D>=0?-1:1)*ve(X[2]);(r>B||r===B&&(I[0]||I[1]))&&(o+=k^D>=0?1:-1)}if(!p++)break;g=y,b=_,d=x,h=t}}return(a<-j||a<j&&Le<-j)^o&1}function Ss(t){var e=Math.cos(t),n=e>0,r=V(e)>j,i=Bi(t,6*Q);return ku(a,o,i,n?[0,-t]:[-tt,t-tt]);function a(s,c){return Math.cos(s)*Math.cos(c)>e}function o(s){var c,h,g,m,b;return{lineStart:function(){m=g=!1,b=1},point:function(d,p){var y=[d,p],M,_=a(d,p),x=n?_?0:l(d,p):_?l(d+(d<0?tt:-tt),p):0;if(!c&&(m=g=_)&&s.lineStart(),_!==g&&(M=u(c,y),(cr(c,M)||cr(y,M))&&(y[0]+=j,y[1]+=j,_=a(y[0],y[1]))),_!==g)b=0,_?(s.lineStart(),M=u(y,c),s.point(M[0],M[1])):(M=u(c,y),s.point(M[0],M[1]),s.lineEnd()),c=M;else if(r&&c&&n^_){var D;!(x&h)&&(D=u(y,c,!0))&&(b=0,n?(s.lineStart(),s.point(D[0][0],D[0][1]),s.point(D[1][0],D[1][1]),s.lineEnd()):(s.point(D[1][0],D[1][1]),s.lineEnd(),s.lineStart(),s.point(D[0][0],D[0][1])))}_&&(!c||!cr(c,y))&&s.point(y[0],y[1]),c=y,g=_,h=x},lineEnd:function(){g&&s.lineEnd(),c=null},clean:function(){return b|(m&&g)<<1}}}function u(s,c,h){var g=ze(s),m=ze(c),b=[1,0,0],d=Xe(g,m),p=ur(d,d),y=d[0],M=p-y*y;if(!M)return!h&&s;var _=e*p/M,x=-e*y/M,D=Xe(b,d),N=or(b,_),A=or(d,x);Pi(N,A);var k=D,P=ur(N,k),I=ur(k,k),X=P*P-I*(ur(N,N)-1);if(!(X<0)){var B=Math.sqrt(X),$=or(k,(-P-B)/I);if(Pi($,N),$=sr($),!h)return $;var T=s[0],C=c[0],H=s[1],R=c[1],q;C<T&&(q=T,T=C,C=q);var G=C-T,J=V(G-tt)<j,nt=J||G<j;if(!J&&R<H&&(q=H,H=R,R=q),nt?J?H+R>0^$[1]<(V($[0]-T)<j?H:R):H<=$[1]&&$[1]<=R:G>tt^(T<=$[0]&&$[0]<=C)){var at=or(k,(-P+B)/I);return Pi(at,N),[$,sr(at)]}}}function l(s,c){var h=n?t:tt-t,g=0;return s<-h?g|=1:s>h&&(g|=2),c<-h?g|=4:c>h&&(g|=8),g}}function Du(t,e,n,r){return function(i){var a=i.a,o=i.b,u=a.x,l=a.y,s=o.x,c=o.y,h=0,g=1,m=s-u,b=c-l,d;if(d=t-u,!(!m&&d>0)){if(d/=m,m<0){if(d<h)return;d<g&&(g=d)}else if(m>0){if(d>g)return;d>h&&(h=d)}if(d=n-u,!(!m&&d<0)){if(d/=m,m<0){if(d>g)return;d>h&&(h=d)}else if(m>0){if(d<h)return;d<g&&(g=d)}if(d=e-l,!(!b&&d>0)){if(d/=b,b<0){if(d<h)return;d<g&&(g=d)}else if(b>0){if(d>g)return;d>h&&(h=d)}if(d=r-l,!(!b&&d<0)){if(d/=b,b<0){if(d>g)return;d>h&&(h=d)}else if(b>0){if(d<h)return;d<g&&(g=d)}return h>0&&(i.a={x:u+h*m,y:l+h*b}),g<1&&(i.b={x:u+g*m,y:l+g*b}),i}}}}}}var gr=1e9;f.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(u){return i&&(i.valid=!1),i=a(u),i.valid=!0,i},extent:function(u){return arguments.length?(a=Lu(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])};function Lu(t,e,n,r){return function(u){var l=u,s=Nu(),c=Du(t,e,n,r),h,g,m,b={point:M,lineStart:X,lineEnd:B,polygonStart:function(){u=s,h=[],g=[],I=!0},polygonEnd:function(){u=l,h=f.merge(h);var T=d([t,r]),C=I&&T,H=h.length;(C||H)&&(u.polygonStart(),C&&(u.lineStart(),p(null,null,1,u),u.lineEnd()),H&&Su(h,a,T,p,u),u.polygonEnd()),h=g=m=null}};function d(T){for(var C=0,H=g.length,R=T[1],q=0;q<H;++q)for(var G=1,J=g[q],nt=J.length,at=J[0],ot;G<nt;++G)ot=J[G],at[1]<=R?ot[1]>R&&mi(at,ot,T)>0&&++C:ot[1]<=R&&mi(at,ot,T)<0&&--C,at=ot;return C!==0}function p(T,C,H,R){var q=0,G=0;if(T==null||(q=i(T,H))!==(G=i(C,H))||o(T,C)<0^H>0)do R.point(q===0||q===3?t:n,q>1?r:e);while((q=(q+H+4)%4)!==G);else R.point(C[0],C[1])}function y(T,C){return t<=T&&T<=n&&e<=C&&C<=r}function M(T,C){y(T,C)&&u.point(T,C)}var _,x,D,N,A,k,P,I;function X(){b.point=$,g&&g.push(m=[]),P=!0,k=!1,N=A=NaN}function B(){h&&($(_,x),D&&k&&s.rejoin(),h.push(s.buffer())),b.point=M,k&&u.lineEnd()}function $(T,C){T=Math.max(-gr,Math.min(gr,T)),C=Math.max(-gr,Math.min(gr,C));var H=y(T,C);if(g&&m.push([T,C]),P)_=T,x=C,D=H,P=!1,H&&(u.lineStart(),u.point(T,C));else if(H&&k)u.point(T,C);else{var R={a:{x:N,y:A},b:{x:T,y:C}};c(R)?(k||(u.lineStart(),u.point(R.a.x,R.a.y)),u.point(R.b.x,R.b.y),H||u.lineEnd(),I=!1):H&&(u.lineStart(),u.point(T,C),I=!1)}N=T,A=C,k=H}return b};function i(u,l){return V(u[0]-t)<j?l>0?0:3:V(u[0]-n)<j?l>0?2:1:V(u[1]-e)<j?l>0?1:0:l>0?3:2}function a(u,l){return o(u.x,l.x)}function o(u,l){var s=i(u,1),c=i(l,1);return s!==c?s-c:s===0?l[1]-u[1]:s===1?u[0]-l[0]:s===2?u[1]-l[1]:l[0]-u[0]}}function Ii(t){var e=0,n=tt/3,r=Fi(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*tt/180,n=a[1]*tt/180):[e/tt*180,n/tt*180]},i}function zu(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(u,l){var s=Math.sqrt(i-2*r*Math.sin(l))/r;return[s*Math.sin(u*=r),a-s*Math.cos(u)]}return o.invert=function(u,l){var s=a-l;return[Math.atan2(u,s)/r,ve((i-(u*u+s*s)*r*r)/(2*r))]},o}(f.geo.conicEqualArea=function(){return Ii(zu)}).raw=zu,f.geo.albers=function(){return f.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},f.geo.albersUsa=function(){var t=f.geo.albers(),e=f.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),n=f.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),r,i={point:function(s,c){r=[s,c]}},a,o,u;function l(s){var c=s[0],h=s[1];return r=null,a(c,h),r||(o(c,h),r)||u(c,h),r}return l.invert=function(s){var c=t.scale(),h=t.translate(),g=(s[0]-h[0])/c,m=(s[1]-h[1])/c;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?e:m>=.166&&m<.234&&g>=-.214&&g<-.115?n:t).invert(s)},l.stream=function(s){var c=t.stream(s),h=e.stream(s),g=n.stream(s);return{point:function(m,b){c.point(m,b),h.point(m,b),g.point(m,b)},sphere:function(){c.sphere(),h.sphere(),g.sphere()},lineStart:function(){c.lineStart(),h.lineStart(),g.lineStart()},lineEnd:function(){c.lineEnd(),h.lineEnd(),g.lineEnd()},polygonStart:function(){c.polygonStart(),h.polygonStart(),g.polygonStart()},polygonEnd:function(){c.polygonEnd(),h.polygonEnd(),g.polygonEnd()}}},l.precision=function(s){return arguments.length?(t.precision(s),e.precision(s),n.precision(s),l):t.precision()},l.scale=function(s){return arguments.length?(t.scale(s),e.scale(s*.35),n.scale(s),l.translate(t.translate())):t.scale()},l.translate=function(s){if(!arguments.length)return t.translate();var c=t.scale(),h=+s[0],g=+s[1];return a=t.translate(s).clipExtent([[h-.455*c,g-.238*c],[h+.455*c,g+.238*c]]).stream(i).point,o=e.translate([h-.307*c,g+.201*c]).clipExtent([[h-.425*c+j,g+.12*c+j],[h-.214*c-j,g+.234*c-j]]).stream(i).point,u=n.translate([h-.205*c,g+.212*c]).clipExtent([[h-.214*c+j,g+.166*c+j],[h-.115*c-j,g+.234*c-j]]).stream(i).point,l},l.scale(1070)};var Oi,qi,Me={point:ft,lineStart:ft,lineEnd:ft,polygonStart:function(){qi=0,Me.lineStart=Es},polygonEnd:function(){Me.lineStart=Me.lineEnd=Me.point=ft,Oi+=V(qi/2)}};function Es(){var t,e,n,r;Me.point=function(a,o){Me.point=i,t=n=a,e=r=o};function i(a,o){qi+=r*a-n*o,n=a,r=o}Me.lineEnd=function(){i(t,e)}}var dr,pr,mr,vr,ks={point:Ns,lineStart:ft,lineEnd:ft,polygonStart:ft,polygonEnd:ft};function Ns(t,e){t<dr&&(dr=t),t>mr&&(mr=t),e<pr&&(pr=e),e>vr&&(vr=e)}function As(){var t=Tu(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(l){return t=Tu(l),n},result:function(){if(e.length){var l=e.join("");return e=[],l}}};function r(l,s){e.push("M",l,",",s,t)}function i(l,s){e.push("M",l,",",s),n.point=a}function a(l,s){e.push("L",l,",",s)}function o(){n.point=r}function u(){e.push("Z")}return n}function Tu(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Wt={point:Pe,lineStart:Ru,lineEnd:Pu,polygonStart:function(){Wt.lineStart=Ds},polygonEnd:function(){Wt.point=Pe,Wt.lineStart=Ru,Wt.lineEnd=Pu}};function Pe(t,e){Te+=t,Re+=e,++he}function Ru(){var t,e;Wt.point=function(r,i){Wt.point=n,Pe(t=r,e=i)};function n(r,i){var a=r-t,o=i-e,u=Math.sqrt(a*a+o*o);ye+=u*(t+r)/2,_e+=u*(e+i)/2,ne+=u,Pe(t=r,e=i)}}function Pu(){Wt.point=Pe}function Ds(){var t,e,n,r;Wt.point=function(a,o){Wt.point=i,Pe(t=n=a,e=r=o)};function i(a,o){var u=a-n,l=o-r,s=Math.sqrt(u*u+l*l);ye+=s*(n+a)/2,_e+=s*(r+o)/2,ne+=s,s=r*a-n*o,je+=s*(n+a),Ge+=s*(r+o),xe+=s*3,Pe(n=a,r=o)}Wt.lineEnd=function(){i(t,e)}}function Ls(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(l){return e=l,n},result:ft};function r(l,s){t.moveTo(l+e,s),t.arc(l,s,e,0,Pt)}function i(l,s){t.moveTo(l,s),n.point=a}function a(l,s){t.lineTo(l,s)}function o(){n.point=r}function u(){t.closePath()}return n}function Cu(t){var e=.5,n=Math.cos(30*Q),r=16;function i(l){return(r?o:a)(l)}function a(l){return Ou(l,function(s,c){s=t(s,c),l.point(s[0],s[1])})}function o(l){var s,c,h,g,m,b,d,p,y,M,_,x,D,N={point:A,lineStart:k,lineEnd:I,polygonStart:function(){l.polygonStart(),N.lineStart=X},polygonEnd:function(){l.polygonEnd(),N.lineStart=k}};function A(T,C){T=t(T,C),l.point(T[0],T[1])}function k(){y=NaN,N.point=P,l.lineStart()}function P(T,C){var H=ze([T,C]),R=t(T,C);u(y,M,p,_,x,D,y=R[0],M=R[1],p=T,_=H[0],x=H[1],D=H[2],r,l),l.point(y,M)}function I(){N.point=A,l.lineEnd()}function X(){k(),N.point=B,N.lineEnd=$}function B(T,C){P(s=T,c=C),h=y,g=M,m=_,b=x,d=D,N.point=P}function $(){u(y,M,p,_,x,D,h,g,s,m,b,d,r,l),N.lineEnd=I,I()}return N}function u(l,s,c,h,g,m,b,d,p,y,M,_,x,D){var N=b-l,A=d-s,k=N*N+A*A;if(k>4*e&&x--){var P=h+y,I=g+M,X=m+_,B=Math.sqrt(P*P+I*I+X*X),$=Math.asin(X/=B),T=V(V(X)-1)<j||V(c-p)<j?(c+p)/2:Math.atan2(I,P),C=t(T,$),H=C[0],R=C[1],q=H-l,G=R-s,J=A*q-N*G;(J*J/k>e||V((N*q+A*G)/k-.5)>.3||h*y+g*M+m*_<n)&&(u(l,s,c,h,g,m,H,R,T,P/=B,I/=B,X,x,D),D.point(H,R),u(H,R,T,P,I,X,b,d,p,y,M,_,x,D))}}return i.precision=function(l){return arguments.length?(r=(e=l*l)>0&&16,i):Math.sqrt(e)},i}f.geo.path=function(){var t=4.5,e,n,r,i,a;function o(l){return l&&(typeof t=="function"&&i.pointRadius(+t.apply(this,arguments)),(!a||!a.valid)&&(a=r(i)),f.geo.stream(l,a)),i.result()}o.area=function(l){return Oi=0,f.geo.stream(l,r(Me)),Oi},o.centroid=function(l){return Te=Re=he=ye=_e=ne=je=Ge=xe=0,f.geo.stream(l,r(Wt)),xe?[je/xe,Ge/xe]:ne?[ye/ne,_e/ne]:he?[Te/he,Re/he]:[NaN,NaN]},o.bounds=function(l){return mr=vr=-(dr=pr=1/0),f.geo.stream(l,r(ks)),[[dr,pr],[mr,vr]]},o.projection=function(l){return arguments.length?(r=(e=l)?l.stream||zs(l):ct,u()):e},o.context=function(l){return arguments.length?(i=(n=l)==null?new As:new Ls(l),typeof t!="function"&&i.pointRadius(t),u()):n},o.pointRadius=function(l){return arguments.length?(t=typeof l=="function"?l:(i.pointRadius(+l),+l),o):t};function u(){return a=null,o}return o.projection(f.geo.albersUsa()).context(null)};function zs(t){var e=Cu(function(n,r){return t([n*st,r*st])});return function(n){return qu(e(n))}}f.geo.transform=function(t){return{stream:function(e){var n=new Iu(e);for(var r in t)n[r]=t[r];return n}}};function Iu(t){this.stream=t}Iu.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ou(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}f.geo.projection=be,f.geo.projectionMutator=Fi;function be(t){return Fi(function(){return t})()}function Fi(t){var e,n,r,i=Cu(function(k,P){return k=e(k,P),[k[0]*a+m,b-k[1]*a]}),a=150,o=480,u=250,l=0,s=0,c=0,h=0,g=0,m,b,d=Au,p=ct,y=null,M=null,_;function x(k){return k=r(k[0]*Q,k[1]*Q),[k[0]*a+m,b-k[1]*a]}function D(k){return k=r.invert((k[0]-m)/a,(b-k[1])/a),k&&[k[0]*st,k[1]*st]}x.stream=function(k){return _&&(_.valid=!1),_=qu(d(n,i(p(k)))),_.valid=!0,_},x.clipAngle=function(k){return arguments.length?(d=k==null?(y=k,Au):Ss((y=+k)*Q),A()):y},x.clipExtent=function(k){return arguments.length?(M=k,p=k?Lu(k[0][0],k[0][1],k[1][0],k[1][1]):ct,A()):M},x.scale=function(k){return arguments.length?(a=+k,N()):a},x.translate=function(k){return arguments.length?(o=+k[0],u=+k[1],N()):[o,u]},x.center=function(k){return arguments.length?(l=k[0]%360*Q,s=k[1]%360*Q,N()):[l*st,s*st]},x.rotate=function(k){return arguments.length?(c=k[0]%360*Q,h=k[1]%360*Q,g=k.length>2?k[2]%360*Q:0,N()):[c*st,h*st,g*st]},f.rebind(x,i,"precision");function N(){r=wu(n=Hi(c,h,g),e);var k=e(l,s);return m=o-k[0]*a,b=u+k[1]*a,A()}function A(){return _&&(_.valid=!1,_=null),x}return function(){return e=t.apply(this,arguments),x.invert=e.invert&&D,N()}}function qu(t){return Ou(t,function(e,n){t.point(e*Q,n*Q)})}function mn(t,e){return[t,e]}(f.geo.equirectangular=function(){return be(mn)}).raw=mn.invert=mn,f.geo.rotation=function(t){t=Hi(t[0]%360*Q,t[1]*Q,t.length>2?t[2]*Q:0);function e(n){return n=t(n[0]*Q,n[1]*Q),n[0]*=st,n[1]*=st,n}return e.invert=function(n){return n=t.invert(n[0]*Q,n[1]*Q),n[0]*=st,n[1]*=st,n},e};function Fu(t,e){return[t>tt?t-Pt:t<-tt?t+Pt:t,e]}Fu.invert=mn;function Hi(t,e,n){return t?e||n?wu(Bu(t),Uu(e,n)):Bu(t):e||n?Uu(e,n):Fu}function Hu(t){return function(e,n){return e+=t,[e>tt?e-Pt:e<-tt?e+Pt:e,n]}}function Bu(t){var e=Hu(t);return e.invert=Hu(-t),e}function Uu(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),a=Math.sin(e);function o(u,l){var s=Math.cos(l),c=Math.cos(u)*s,h=Math.sin(u)*s,g=Math.sin(l),m=g*n+c*r;return[Math.atan2(h*i-m*a,c*n-g*r),ve(m*i+h*a)]}return o.invert=function(u,l){var s=Math.cos(l),c=Math.cos(u)*s,h=Math.sin(u)*s,g=Math.sin(l),m=g*i-h*a;return[Math.atan2(h*i+g*a,c*n+m*r),ve(m*n-c*r)]},o}f.geo.circle=function(){var t=[0,0],e,n=6,r;function i(){var a=typeof t=="function"?t.apply(this,arguments):t,o=Hi(-a[0]*Q,-a[1]*Q,0).invert,u=[];return r(null,null,1,{point:function(l,s){u.push(l=o(l,s)),l[0]*=st,l[1]*=st}}),{type:"Polygon",coordinates:[u]}}return i.origin=function(a){return arguments.length?(t=a,i):t},i.angle=function(a){return arguments.length?(r=Bi((e=+a)*Q,n*Q),i):e},i.precision=function(a){return arguments.length?(r=Bi(e*Q,(n=+a)*Q),i):n},i.angle(90)};function Bi(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,u){var l=o*e;i!=null?(i=Yu(n,i),a=Yu(n,a),(o>0?i<a:i>a)&&(i+=o*Pt)):(i=t+o*Pt,a=t-.5*l);for(var s,c=i;o>0?c>a:c<a;c-=l)u.point((s=sr([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function Yu(t,e){var n=ze(e);n[0]-=t,lr(n);var r=Wa(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-j)%(2*Math.PI)}f.geo.distance=function(t,e){var n=(e[0]-t[0])*Q,r=t[1]*Q,i=e[1]*Q,a=Math.sin(n),o=Math.cos(n),u=Math.sin(r),l=Math.cos(r),s=Math.sin(i),c=Math.cos(i),h;return Math.atan2(Math.sqrt((h=c*a)*h+(h=l*s-u*c*o)*h),u*s+l*c*o)},f.geo.graticule=function(){var t,e,n,r,i,a,o,u,l=10,s=l,c=90,h=360,g,m,b,d,p=2.5;function y(){return{type:"MultiLineString",coordinates:M()}}function M(){return f.range(Math.ceil(r/c)*c,n,c).map(b).concat(f.range(Math.ceil(u/h)*h,o,h).map(d)).concat(f.range(Math.ceil(e/l)*l,t,l).filter(function(_){return V(_%c)>j}).map(g)).concat(f.range(Math.ceil(a/s)*s,i,s).filter(function(_){return V(_%h)>j}).map(m))}return y.lines=function(){return M().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[b(r).concat(d(o).slice(1),b(n).reverse().slice(1),d(u).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.majorExtent(_).minorExtent(_):y.minorExtent()},y.majorExtent=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],u=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),u>o&&(_=u,u=o,o=_),y.precision(p)):[[r,u],[n,o]]},y.minorExtent=function(_){return arguments.length?(e=+_[0][0],t=+_[1][0],a=+_[0][1],i=+_[1][1],e>t&&(_=e,e=t,t=_),a>i&&(_=a,a=i,i=_),y.precision(p)):[[e,a],[t,i]]},y.step=function(_){return arguments.length?y.majorStep(_).minorStep(_):y.minorStep()},y.majorStep=function(_){return arguments.length?(c=+_[0],h=+_[1],y):[c,h]},y.minorStep=function(_){return arguments.length?(l=+_[0],s=+_[1],y):[l,s]},y.precision=function(_){return arguments.length?(p=+_,g=$u(a,i,90),m=Xu(e,t,p),b=$u(u,o,90),d=Xu(r,n,p),y):p},y.majorExtent([[-180,-90+j],[180,90-j]]).minorExtent([[-180,-80-j],[180,80+j]])};function $u(t,e,n){var r=f.range(t,e-j,n).concat(e);return function(i){return r.map(function(a){return[i,a]})}}function Xu(t,e,n){var r=f.range(t,e-j,n).concat(e);return function(i){return r.map(function(a){return[a,i]})}}function Ui(t){return t.source}function Yi(t){return t.target}f.geo.greatArc=function(){var t=Ui,e,n=Yi,r;function i(){return{type:"LineString",coordinates:[e||t.apply(this,arguments),r||n.apply(this,arguments)]}}return i.distance=function(){return f.geo.distance(e||t.apply(this,arguments),r||n.apply(this,arguments))},i.source=function(a){return arguments.length?(t=a,e=typeof a=="function"?null:a,i):t},i.target=function(a){return arguments.length?(n=a,r=typeof a=="function"?null:a,i):n},i.precision=function(){return arguments.length?i:0},i},f.geo.interpolate=function(t,e){return Ts(t[0]*Q,t[1]*Q,e[0]*Q,e[1]*Q)};function Ts(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),u=Math.sin(r),l=i*Math.cos(t),s=i*Math.sin(t),c=o*Math.cos(n),h=o*Math.sin(n),g=2*Math.asin(Math.sqrt(Va(r-e)+i*o*Va(n-t))),m=1/Math.sin(g),b=g?function(d){var p=Math.sin(d*=g)*m,y=Math.sin(g-d)*m,M=y*l+p*c,_=y*s+p*h,x=y*a+p*u;return[Math.atan2(_,M)*st,Math.atan2(x,Math.sqrt(M*M+_*_))*st]}:function(){return[t*st,e*st]};return b.distance=g,b}f.geo.length=function(t){return $i=0,f.geo.stream(t,We),$i};var $i,We={sphere:ft,point:ft,lineStart:Rs,lineEnd:ft,polygonStart:ft,polygonEnd:ft};function Rs(){var t,e,n;We.point=function(i,a){t=i*Q,e=Math.sin(a*=Q),n=Math.cos(a),We.point=r},We.lineEnd=function(){We.point=We.lineEnd=ft};function r(i,a){var o=Math.sin(a*=Q),u=Math.cos(a),l=V((i*=Q)-t),s=Math.cos(l);$i+=Math.atan2(Math.sqrt((l=u*Math.sin(l))*l+(l=n*o-e*u*s)*l),e*o+n*u*s),t=i,e=o,n=u}}function vn(t,e){function n(r,i){var a=Math.cos(r),o=Math.cos(i),u=t(a*o);return[u*o*Math.sin(r),u*Math.sin(i)]}return n.invert=function(r,i){var a=Math.sqrt(r*r+i*i),o=e(a),u=Math.sin(o),l=Math.cos(o);return[Math.atan2(r*u,a*l),Math.asin(a&&i*u/a)]},n}var ju=vn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(f.geo.azimuthalEqualArea=function(){return be(ju)}).raw=ju;var Gu=vn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},ct);(f.geo.azimuthalEquidistant=function(){return be(Gu)}).raw=Gu;function Wu(t,e){var n=Math.cos(t),r=function(u){return Math.tan(tt/4+u/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),i)/i;if(!i)return yr;function o(u,l){a>0?l<-gt+j&&(l=-gt+j):l>gt-j&&(l=gt-j);var s=a/Math.pow(r(l),i);return[s*Math.sin(i*u),a-s*Math.cos(i*u)]}return o.invert=function(u,l){var s=a-l,c=Ga(i)*Math.sqrt(u*u+s*s);return[Math.atan2(u,s)/i,2*Math.atan(Math.pow(a/c,1/i))-gt]},o}(f.geo.conicConformal=function(){return Ii(Wu)}).raw=Wu;function Zu(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(V(r)<j)return mn;function a(o,u){var l=i-u;return[l*Math.sin(r*o),i-l*Math.cos(r*o)]}return a.invert=function(o,u){var l=i-u;return[Math.atan2(o,l)/r,i-Ga(r)*Math.sqrt(o*o+l*l)]},a}(f.geo.conicEquidistant=function(){return Ii(Zu)}).raw=Zu;var Vu=vn(function(t){return 1/t},Math.atan);(f.geo.gnomonic=function(){return be(Vu)}).raw=Vu;function yr(t,e){return[t,Math.log(Math.tan(tt/4+e/2))]}yr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-gt]};function Ju(t){var e=be(t),n=e.scale,r=e.translate,i=e.clipExtent,a;return e.scale=function(){var o=n.apply(e,arguments);return o===e?a?e.clipExtent(null):e:o},e.translate=function(){var o=r.apply(e,arguments);return o===e?a?e.clipExtent(null):e:o},e.clipExtent=function(o){var u=i.apply(e,arguments);if(u===e){if(a=o==null){var l=tt*n(),s=r();i([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else a&&(u=null);return u},e.clipExtent(null)}(f.geo.mercator=function(){return Ju(yr)}).raw=yr;var Ku=vn(function(){return 1},Math.asin);(f.geo.orthographic=function(){return be(Ku)}).raw=Ku;var Qu=vn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(f.geo.stereographic=function(){return be(Qu)}).raw=Qu;function Xi(t,e){return[Math.log(Math.tan(tt/4+e/2)),-t]}Xi.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-gt]},(f.geo.transverseMercator=function(){var t=Ju(Xi),e=t.center,n=t.rotate;return t.center=function(r){return r?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return r?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90])}).raw=Xi,f.geom={};function Ze(t){return t[0]}function yn(t){return t[1]}f.geom.hull=function(t){var e=Ze,n=yn;if(arguments.length)return r(t);function r(i){if(i.length<3)return[];var a=ut(e),o=ut(n),u,l=i.length,s=[],c=[];for(u=0;u<l;u++)s.push([+a.call(this,i[u],u),+o.call(this,i[u],u),u]);for(s.sort(Ps),u=0;u<l;u++)c.push([s[u][0],-s[u][1]]);var h=to(s),g=to(c),m=g[0]===h[0],b=g[g.length-1]===h[h.length-1],d=[];for(u=h.length-1;u>=0;--u)d.push(i[s[h[u]][2]]);for(u=+m;u<g.length-b;++u)d.push(i[s[g[u]][2]]);return d}return r.x=function(i){return arguments.length?(e=i,r):e},r.y=function(i){return arguments.length?(n=i,r):n},r};function to(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&mi(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Ps(t,e){return t[0]-e[0]||t[1]-e[1]}f.geom.polygon=function(t){return Fn(t,_r),t};var _r=f.geom.polygon.prototype=[];_r.area=function(){for(var t=-1,e=this.length,n,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return i*.5},_r.centroid=function(t){var e=-1,n=this.length,r=0,i=0,a,o=this[n-1],u;for(arguments.length||(t=-1/(6*this.area()));++e<n;)a=o,o=this[e],u=a[0]*o[1]-o[0]*a[1],r+=(a[0]+o[0])*u,i+=(a[1]+o[1])*u;return[r*t,i*t]},_r.clip=function(t){for(var e,n=eo(t),r=-1,i=this.length-eo(this),a,o,u=this[i-1],l,s,c;++r<i;){for(e=t.slice(),t.length=0,l=this[r],s=e[(o=e.length-n)-1],a=-1;++a<o;)c=e[a],ji(c,u,l)?(ji(s,u,l)||t.push(Gi(s,c,u,l)),t.push(c)):ji(s,u,l)&&t.push(Gi(s,c,u,l)),s=c;n&&t.push(t[0]),u=l}return t};function ji(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Gi(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,u=r[0]-a,l=t[1],s=n[1],c=e[1]-l,h=r[1]-s,g=(u*(l-s)-h*(i-a))/(h*o-u*c);return[i+g*o,l+g*c]}function eo(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}var Ve,Ce,Je,no=[],Wi,_n,ro=[];function Cs(){br(this),this.edge=this.site=this.circle=null}function io(t){var e=no.pop()||new Cs;return e.site=t,e}function Zi(t){Qe(t),Je.remove(t),no.push(t),br(t)}function Is(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,u=[t];Zi(t);for(var l=a;l.circle&&V(n-l.circle.x)<j&&V(r-l.circle.cy)<j;)a=l.P,u.unshift(l),Zi(l),l=a;u.unshift(l),Qe(l);for(var s=o;s.circle&&V(n-s.circle.x)<j&&V(r-s.circle.cy)<j;)o=s.N,u.push(s),Zi(s),s=o;u.push(s),Qe(s);var c=u.length,h;for(h=1;h<c;++h)s=u[h],l=u[h-1],xr(s.edge,l.site,s.site,i);l=u[0],s=u[c-1],s.edge=xn(l.site,s.site,null,i),Ke(l),Ke(s)}function Os(t){for(var e=t.x,n=t.y,r,i,a,o,u=Je._;u;)if(a=ao(u,n)-e,a>j)u=u.L;else if(o=e-qs(u,n),o>j){if(!u.R){r=u;break}u=u.R}else{a>-j?(r=u.P,i=u):o>-j?(r=u,i=u.N):r=i=u;break}var l=io(t);if(Je.insert(r,l),!(!r&&!i)){if(r===i){Qe(r),i=io(r.site),Je.insert(l,i),l.edge=i.edge=xn(r.site,l.site),Ke(r),Ke(i);return}if(!i){l.edge=xn(r.site,l.site);return}Qe(r),Qe(i);var s=r.site,c=s.x,h=s.y,g=t.x-c,m=t.y-h,b=i.site,d=b.x-c,p=b.y-h,y=2*(g*p-m*d),M=g*g+m*m,_=d*d+p*p,x={x:(p*M-m*_)/y+c,y:(g*_-d*M)/y+h};xr(i.edge,s,b,x),l.edge=xn(s,t,null,x),i.edge=xn(t,b,null,x),Ke(r),Ke(i)}}function ao(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;n=o.site;var u=n.x,l=n.y,s=l-e;if(!s)return u;var c=u-r,h=1/a-1/s,g=c/s;return h?(-g+Math.sqrt(g*g-2*h*(c*c/(-2*s)-l+s/2+i-a/2)))/h+r:(r+u)/2}function qs(t,e){var n=t.N;if(n)return ao(n,e);var r=t.site;return r.y===e?r.x:1/0}function uo(t){this.site=t,this.edges=[]}uo.prototype.prepare=function(){for(var t=this.edges,e=t.length,n;e--;)n=t[e].edge,(!n.b||!n.a)&&t.splice(e,1);return t.sort(oo),t.length};function Fs(t){for(var e=t[0][0],n=t[1][0],r=t[0][1],i=t[1][1],a,o,u,l,s=Ce,c=s.length,h,g,m,b,d,p;c--;)if(h=s[c],!(!h||!h.prepare()))for(m=h.edges,b=m.length,g=0;g<b;)p=m[g].end(),u=p.x,l=p.y,d=m[++g%b].start(),a=d.x,o=d.y,(V(u-a)>j||V(l-o)>j)&&(m.splice(g,0,new Mr(Ys(h.site,p,V(u-e)<j&&i-l>j?{x:e,y:V(a-e)<j?o:i}:V(l-i)<j&&n-u>j?{x:V(o-i)<j?a:n,y:i}:V(u-n)<j&&l-r>j?{x:n,y:V(a-n)<j?o:r}:V(l-r)<j&&u-e>j?{x:V(o-r)<j?a:e,y:r}:null),h.site,null)),++b)}function oo(t,e){return e.angle-t.angle}function Hs(){br(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ke(t){var e=t.P,n=t.N;if(!(!e||!n)){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,u=i.y,l=r.x-o,s=r.y-u,c=a.x-o,p=a.y-u,h=2*(l*p-s*c);if(!(h>=-Un)){var g=l*l+s*s,m=c*c+p*p,b=(p*g-s*m)/h,d=(l*m-c*g)/h,p=d+u,y=ro.pop()||new Hs;y.arc=t,y.site=i,y.x=b+o,y.y=p+Math.sqrt(b*b+d*d),y.cy=p,t.circle=y;for(var M=null,_=_n._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x)if(_.L)_=_.L;else{M=_.P;break}else if(_.R)_=_.R;else{M=_;break}_n.insert(M,y),M||(Wi=y)}}}}function Qe(t){var e=t.circle;e&&(e.P||(Wi=e.N),_n.remove(e),ro.push(e),br(e),t.circle=null)}function Bs(t){for(var e=Ve,n=Du(t[0][0],t[0][1],t[1][0],t[1][1]),r=e.length,i;r--;)i=e[r],(!Us(i,t)||!n(i)||V(i.a.x-i.b.x)<j&&V(i.a.y-i.b.y)<j)&&(i.a=i.b=null,e.splice(r,1))}function Us(t,e){var n=t.b;if(n)return!0;var r=t.a,i=e[0][0],a=e[1][0],o=e[0][1],u=e[1][1],l=t.l,s=t.r,c=l.x,h=l.y,g=s.x,m=s.y,b=(c+g)/2,d=(h+m)/2,p,y;if(m===h){if(b<i||b>=a)return;if(c>g){if(!r)r={x:b,y:o};else if(r.y>=u)return;n={x:b,y:u}}else{if(!r)r={x:b,y:u};else if(r.y<o)return;n={x:b,y:o}}}else if(p=(c-g)/(m-h),y=d-p*b,p<-1||p>1)if(c>g){if(!r)r={x:(o-y)/p,y:o};else if(r.y>=u)return;n={x:(u-y)/p,y:u}}else{if(!r)r={x:(u-y)/p,y:u};else if(r.y<o)return;n={x:(o-y)/p,y:o}}else if(h<m){if(!r)r={x:i,y:p*i+y};else if(r.x>=a)return;n={x:a,y:p*a+y}}else{if(!r)r={x:a,y:p*a+y};else if(r.x<i)return;n={x:i,y:p*i+y}}return t.a=r,t.b=n,!0}function lo(t,e){this.l=t,this.r=e,this.a=this.b=null}function xn(t,e,n,r){var i=new lo(t,e);return Ve.push(i),n&&xr(i,t,e,n),r&&xr(i,e,t,r),Ce[t.i].edges.push(new Mr(i,t,e)),Ce[e.i].edges.push(new Mr(i,e,t)),i}function Ys(t,e,n){var r=new lo(t,null);return r.a=e,r.b=n,Ve.push(r),r}function xr(t,e,n,r){!t.a&&!t.b?(t.a=r,t.l=e,t.r=n):t.l===n?t.b=r:t.a=r}function Mr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}Mr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Vi(){this._=null}function br(t){t.U=t.C=t.L=t.R=t.P=t.N=null}Vi.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=so(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Mn(this,n),t=n,n=t.U),n.C=!1,r.C=!0,bn(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(bn(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Mn(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,a,o;if(r?i?a=so(i):a=r:a=i,e?e.L===t?e.L=a:e.R=a:this._=a,r&&i?(o=a.C,a.C=t.C,a.L=r,r.U=a,a!==i?(e=a.U,a.U=t.U,t=a.R,e.L=t,a.R=i,i.U=a):(a.U=e,e=a,t=a.R)):(o=t.C,t=a),t&&(t.U=e),!o){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,Mn(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,bn(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,Mn(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,bn(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,Mn(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,bn(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function Mn(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function bn(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function so(t){for(;t.L;)t=t.L;return t}function Ji(t,e){var n=t.sort($s).pop(),r,i,a;for(Ve=[],Ce=new Array(t.length),Je=new Vi,_n=new Vi;;)if(a=Wi,n&&(!a||n.y<a.y||n.y===a.y&&n.x<a.x))(n.x!==r||n.y!==i)&&(Ce[n.i]=new uo(n),Os(n),r=n.x,i=n.y),n=t.pop();else if(a)Is(a.arc);else break;e&&(Bs(e),Fs(e));var o={cells:Ce,edges:Ve};return Je=_n=Ve=Ce=null,o}function $s(t,e){return e.y-t.y||e.x-t.x}f.geom.voronoi=function(t){var e=Ze,n=yn,r=e,i=n,a=wr;if(t)return o(t);function o(l){var s=new Array(l.length),c=a[0][0],h=a[0][1],g=a[1][0],m=a[1][1];return Ji(u(l),a).cells.forEach(function(b,d){var p=b.edges,y=b.site,M=s[d]=p.length?p.map(function(_){var x=_.start();return[x.x,x.y]}):y.x>=c&&y.x<=g&&y.y>=h&&y.y<=m?[[c,m],[g,m],[g,h],[c,h]]:[];M.point=l[d]}),s}function u(l){return l.map(function(s,c){return{x:Math.round(r(s,c)/j)*j,y:Math.round(i(s,c)/j)*j,i:c}})}return o.links=function(l){return Ji(u(l)).edges.filter(function(s){return s.l&&s.r}).map(function(s){return{source:l[s.l.i],target:l[s.r.i]}})},o.triangles=function(l){var s=[];return Ji(u(l)).cells.forEach(function(c,h){for(var g=c.site,m=c.edges.sort(oo),b=-1,d=m.length,p,y,M=m[d-1].edge,_=M.l===g?M.r:M.l;++b<d;)p=M,y=_,M=m[b].edge,_=M.l===g?M.r:M.l,h<y.i&&h<_.i&&Xs(g,y,_)<0&&s.push([l[h],l[y.i],l[_.i]])}),s},o.x=function(l){return arguments.length?(r=ut(e=l),o):e},o.y=function(l){return arguments.length?(i=ut(n=l),o):n},o.clipExtent=function(l){return arguments.length?(a=l??wr,o):a===wr?null:a},o.size=function(l){return arguments.length?o.clipExtent(l&&[[0,0],l]):a===wr?null:a&&a[1]},o};var wr=[[-1e6,-1e6],[1e6,1e6]];function Xs(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}f.geom.delaunay=function(t){return f.geom.voronoi().triangles(t)},f.geom.quadtree=function(t,e,n,r,i){var a=Ze,o=yn,u;if(u=arguments.length)return a=js,o=Gs,u===3&&(i=n,r=e,n=e=0),l(t);function l(s){var c,h=ut(a),g=ut(o),m,b,d,p,y,M,_,x;if(e!=null)y=e,M=n,_=r,x=i;else if(_=x=-(y=M=1/0),m=[],b=[],p=s.length,u)for(d=0;d<p;++d)c=s[d],c.x<y&&(y=c.x),c.y<M&&(M=c.y),c.x>_&&(_=c.x),c.y>x&&(x=c.y),m.push(c.x),b.push(c.y);else for(d=0;d<p;++d){var D=+h(c=s[d],d),N=+g(c,d);D<y&&(y=D),N<M&&(M=N),D>_&&(_=D),N>x&&(x=N),m.push(D),b.push(N)}var A=_-y,k=x-M;A>k?x=M+A:_=y+k;function P(B,$,T,C,H,R,q,G){if(!(isNaN(T)||isNaN(C)))if(B.leaf){var J=B.x,nt=B.y;if(J!=null)if(V(J-T)+V(nt-C)<.01)I(B,$,T,C,H,R,q,G);else{var at=B.point;B.x=B.y=B.point=null,I(B,at,J,nt,H,R,q,G),I(B,$,T,C,H,R,q,G)}else B.x=T,B.y=C,B.point=$}else I(B,$,T,C,H,R,q,G)}function I(B,$,T,C,H,R,q,G){var J=(H+q)*.5,nt=(R+G)*.5,at=T>=J,ot=C>=nt,kt=ot<<1|at;B.leaf=!1,B=B.nodes[kt]||(B.nodes[kt]=co()),at?H=J:q=J,ot?R=nt:G=nt,P(B,$,T,C,H,R,q,G)}var X=co();if(X.add=function(B){P(X,B,+h(B,++d),+g(B,d),y,M,_,x)},X.visit=function(B){wn(B,X,y,M,_,x)},X.find=function(B){return Ws(X,B[0],B[1],y,M,_,x)},d=-1,e==null){for(;++d<p;)P(X,s[d],m[d],b[d],y,M,_,x);--d}else s.forEach(X.add);return m=b=s=c=null,X}return l.x=function(s){return arguments.length?(a=s,l):a},l.y=function(s){return arguments.length?(o=s,l):o},l.extent=function(s){return arguments.length?(s==null?e=n=r=i=null:(e=+s[0][0],n=+s[0][1],r=+s[1][0],i=+s[1][1]),l):e==null?null:[[e,n],[r,i]]},l.size=function(s){return arguments.length?(s==null?e=n=r=i=null:(e=n=0,r=+s[0],i=+s[1]),l):e==null?null:[r-e,i-n]},l};function js(t){return t.x}function Gs(t){return t.y}function co(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function wn(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=(n+i)*.5,u=(r+a)*.5,l=e.nodes;l[0]&&wn(t,l[0],n,r,o,u),l[1]&&wn(t,l[1],o,r,i,u),l[2]&&wn(t,l[2],n,u,o,a),l[3]&&wn(t,l[3],o,u,i,a)}}function Ws(t,e,n,r,i,a,o){var u=1/0,l;return(function s(c,h,g,m,b){if(!(h>a||g>o||m<r||b<i)){if(d=c.point){var d,p=e-c.x,y=n-c.y,M=p*p+y*y;if(M<u){var _=Math.sqrt(u=M);r=e-_,i=n-_,a=e+_,o=n+_,l=d}}for(var x=c.nodes,D=(h+m)*.5,N=(g+b)*.5,A=e>=D,k=n>=N,P=k<<1|A,I=P+4;P<I;++P)if(c=x[P&3])switch(P&3){case 0:s(c,h,g,D,N);break;case 1:s(c,D,g,m,N);break;case 2:s(c,h,N,D,b);break;case 3:s(c,D,N,m,b);break}}})(t,r,i,a,o),l}f.interpolateRgb=Ki;function Ki(t,e){t=f.rgb(t),e=f.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,u=e.b-i;return function(l){return"#"+$e(Math.round(n+a*l))+$e(Math.round(r+o*l))+$e(Math.round(i+u*l))}}f.interpolateObject=fo;function fo(t,e){var n={},r={},i;for(i in t)i in e?n[i]=Ie(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(a){for(i in n)r[i]=n[i](a);return r}}f.interpolateNumber=ge;function ge(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}f.interpolateString=ho;function ho(t,e){var n=Qi.lastIndex=ta.lastIndex=0,r,i,a,o=-1,u=[],l=[];for(t=t+"",e=e+"";(r=Qi.exec(t))&&(i=ta.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,l.push({i:o,x:ge(r,i)})),n=ta.lastIndex;return n<e.length&&(a=e.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?l[0]?(e=l[0].x,function(s){return e(s)+""}):function(){return e}:(e=l.length,function(s){for(var c=0,h;c<e;++c)u[(h=l[c]).i]=h.x(s);return u.join("")})}var Qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ta=new RegExp(Qi.source,"g");f.interpolate=Ie;function Ie(t,e){for(var n=f.interpolators.length,r;--n>=0&&!(r=f.interpolators[n](t,e)););return r}f.interpolators=[function(t,e){var n=typeof e;return(n==="string"?Gn.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Ki:ho:e instanceof Ae?Ki:Array.isArray(e)?Sr:n==="object"&&isNaN(e)?fo:ge)(t,e)}],f.interpolateArray=Sr;function Sr(t,e){var n=[],r=[],i=t.length,a=e.length,o=Math.min(t.length,e.length),u;for(u=0;u<o;++u)n.push(Ie(t[u],e[u]));for(;u<i;++u)r[u]=t[u];for(;u<a;++u)r[u]=e[u];return function(l){for(u=0;u<o;++u)r[u]=n[u](l);return r}}var go=function(){return ct},Zs=f.map({linear:go,poly:ec,quad:function(){return Ks},cubic:function(){return Qs},sin:function(){return nc},exp:function(){return rc},circle:function(){return ic},elastic:ac,back:uc,bounce:function(){return oc}}),Vs=f.map({in:ct,out:po,"in-out":mo,"out-in":function(t){return mo(po(t))}});f.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=Zs.get(n)||go,r=Vs.get(r)||ct,Js(r(n.apply(null,v.call(arguments,1))))};function Js(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function po(t){return function(e){return 1-t(1-e)}}function mo(t){return function(e){return .5*(e<.5?t(2*e):2-t(2-2*e))}}function Ks(t){return t*t}function Qs(t){return t*t*t}function tc(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ec(t){return function(e){return Math.pow(e,t)}}function nc(t){return 1-Math.cos(t*gt)}function rc(t){return Math.pow(2,10*(t-1))}function ic(t){return 1-Math.sqrt(1-t*t)}function ac(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Pt*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Pt/e)}}function uc(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function oc(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}f.interpolateHcl=lc;function lc(t,e){t=f.hcl(t),e=f.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,u=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(l){return bi(n+a*l,r+o*l,i+u*l)+""}}f.interpolateHsl=sc;function sc(t,e){t=f.hsl(t),e=f.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,u=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(l){return xi(n+a*l,r+o*l,i+u*l)+""}}f.interpolateLab=cc;function cc(t,e){t=f.lab(t),e=f.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,u=e.b-i;return function(l){return nu(n+a*l,r+o*l,i+u*l)+""}}f.interpolateRound=vo;function vo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}f.transform=function(t){var e=S.createElementNS(f.ns.prefix.svg,"g");return(f.transform=function(n){if(n!=null){e.setAttribute("transform",n);var r=e.transform.baseVal.consolidate()}return new yo(r?r.matrix:hc)})(t)};function yo(t){var e=[t.a,t.b],n=[t.c,t.d],r=xo(e),i=_o(e,n),a=xo(fc(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*st,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*st:0}yo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function _o(t,e){return t[0]*e[0]+t[1]*e[1]}function xo(t){var e=Math.sqrt(_o(t,t));return e&&(t[0]/=e,t[1]/=e),e}function fc(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}var hc={a:1,b:0,c:0,d:1,e:0,f:0};f.interpolateTransform=Mo;function tn(t){return t.length?t.pop()+",":""}function gc(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:ge(t[0],e[0])},{i:i-2,x:ge(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function dc(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(tn(n)+"rotate(",null,")")-2,x:ge(t,e)})):e&&n.push(tn(n)+"rotate("+e+")")}function pc(t,e,n,r){t!==e?r.push({i:n.push(tn(n)+"skewX(",null,")")-2,x:ge(t,e)}):e&&n.push(tn(n)+"skewX("+e+")")}function mc(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(tn(n)+"scale(",null,",",null,")");r.push({i:i-4,x:ge(t[0],e[0])},{i:i-2,x:ge(t[1],e[1])})}else(e[0]!==1||e[1]!==1)&&n.push(tn(n)+"scale("+e+")")}function Mo(t,e){var n=[],r=[];return t=f.transform(t),e=f.transform(e),gc(t.translate,e.translate,n,r),dc(t.rotate,e.rotate,n,r),pc(t.skew,e.skew,n,r),mc(t.scale,e.scale,n,r),t=e=null,function(i){for(var a=-1,o=r.length,u;++a<o;)n[(u=r[a]).i]=u.x(i);return n.join("")}}function vc(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function yc(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}f.layout={},f.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(_c(t[n]));return e}};function _c(t){for(var e=t.source,n=t.target,r=xc(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function bo(t){for(var e=[],n=t.parent;n!=null;)e.push(t),t=n,n=n.parent;return e.push(t),e}function xc(t,e){if(t===e)return t;for(var n=bo(t),r=bo(e),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}f.layout.chord=function(){var t={},e,n,r,i,a=0,o,u,l;function s(){var h={},g=[],m=f.range(i),b=[],d,p,y,M,_;for(e=[],n=[],d=0,M=-1;++M<i;){for(p=0,_=-1;++_<i;)p+=r[M][_];g.push(p),b.push(f.range(i)),d+=p}for(o&&m.sort(function(X,B){return o(g[X],g[B])}),u&&b.forEach(function(X,B){X.sort(function($,T){return u(r[B][$],r[B][T])})}),d=(Pt-a*i)/d,p=0,M=-1;++M<i;){for(y=p,_=-1;++_<i;){var x=m[M],D=b[x][_],N=r[x][D],A=p,k=p+=N*d;h[x+"-"+D]={index:x,subindex:D,startAngle:A,endAngle:k,value:N}}n[x]={index:x,startAngle:y,endAngle:p,value:g[x]},p+=a}for(M=-1;++M<i;)for(_=M-1;++_<i;){var P=h[M+"-"+_],I=h[_+"-"+M];(P.value||I.value)&&e.push(P.value<I.value?{source:I,target:P}:{source:P,target:I})}l&&c()}function c(){e.sort(function(h,g){return l((h.source.value+h.target.value)/2,(g.source.value+g.target.value)/2)})}return t.matrix=function(h){return arguments.length?(i=(r=h)&&r.length,e=n=null,t):r},t.padding=function(h){return arguments.length?(a=h,e=n=null,t):a},t.sortGroups=function(h){return arguments.length?(o=h,e=n=null,t):o},t.sortSubgroups=function(h){return arguments.length?(u=h,e=null,t):u},t.sortChords=function(h){return arguments.length?(l=h,e&&c(),t):l},t.chords=function(){return e||s(),e},t.groups=function(){return n||s(),n},t},f.layout.force=function(){var t={},e=f.dispatch("start","tick","end"),n,r=[1,1],i,a,o=.9,u=Ec,l=kc,s=-30,c=Nc,h=.1,g=.64,m=[],b=[],d,p,y;function M(x){return function(D,N,A,k){if(D.point!==x){var P=D.cx-x.x,I=D.cy-x.y,X=k-N,B=P*P+I*I;if(X*X/g<B){if(B<c){var $=D.charge/B;x.px-=P*$,x.py-=I*$}return!0}if(D.point&&B&&B<c){var $=D.pointCharge/B;x.px-=P*$,x.py-=I*$}}return!D.charge}}t.tick=function(){if((a*=.99)<.005)return n=null,e.end({type:"end",alpha:a=0}),!0;var x=m.length,D=b.length,N,A,k,P,I,X,B,$,T;for(A=0;A<D;++A)k=b[A],P=k.source,I=k.target,$=I.x-P.x,T=I.y-P.y,(X=$*$+T*T)&&(X=a*p[A]*((X=Math.sqrt(X))-d[A])/X,$*=X,T*=X,I.x-=$*(B=P.weight+I.weight?P.weight/(P.weight+I.weight):.5),I.y-=T*B,P.x+=$*(B=1-B),P.y+=T*B);if((B=a*h)&&($=r[0]/2,T=r[1]/2,A=-1,B))for(;++A<x;)k=m[A],k.x+=($-k.x)*B,k.y+=(T-k.y)*B;if(s)for(wo(N=f.geom.quadtree(m),a,y),A=-1;++A<x;)(k=m[A]).fixed||N.visit(M(k));for(A=-1;++A<x;)k=m[A],k.fixed?(k.x=k.px,k.y=k.py):(k.x-=(k.px-(k.px=k.x))*o,k.y-=(k.py-(k.py=k.y))*o);e.tick({type:"tick",alpha:a})},t.nodes=function(x){return arguments.length?(m=x,t):m},t.links=function(x){return arguments.length?(b=x,t):b},t.size=function(x){return arguments.length?(r=x,t):r},t.linkDistance=function(x){return arguments.length?(u=typeof x=="function"?x:+x,t):u},t.distance=t.linkDistance,t.linkStrength=function(x){return arguments.length?(l=typeof x=="function"?x:+x,t):l},t.friction=function(x){return arguments.length?(o=+x,t):o},t.charge=function(x){return arguments.length?(s=typeof x=="function"?x:+x,t):s},t.chargeDistance=function(x){return arguments.length?(c=x*x,t):Math.sqrt(c)},t.gravity=function(x){return arguments.length?(h=+x,t):h},t.theta=function(x){return arguments.length?(g=x*x,t):Math.sqrt(g)},t.alpha=function(x){return arguments.length?(x=+x,a?x>0?a=x:(n.c=null,n.t=NaN,n=null,e.end({type:"end",alpha:a=0})):x>0&&(e.start({type:"start",alpha:a=x}),n=Qn(t.tick)),t):a},t.start=function(){var x,D=m.length,N=b.length,A=r[0],k=r[1],P,I;for(x=0;x<D;++x)(I=m[x]).index=x,I.weight=0;for(x=0;x<N;++x)I=b[x],typeof I.source=="number"&&(I.source=m[I.source]),typeof I.target=="number"&&(I.target=m[I.target]),++I.source.weight,++I.target.weight;for(x=0;x<D;++x)I=m[x],isNaN(I.x)&&(I.x=X("x",A)),isNaN(I.y)&&(I.y=X("y",k)),isNaN(I.px)&&(I.px=I.x),isNaN(I.py)&&(I.py=I.y);if(d=[],typeof u=="function")for(x=0;x<N;++x)d[x]=+u.call(this,b[x],x);else for(x=0;x<N;++x)d[x]=u;if(p=[],typeof l=="function")for(x=0;x<N;++x)p[x]=+l.call(this,b[x],x);else for(x=0;x<N;++x)p[x]=l;if(y=[],typeof s=="function")for(x=0;x<D;++x)y[x]=+s.call(this,m[x],x);else for(x=0;x<D;++x)y[x]=s;function X(B,$){if(!P){for(P=new Array(D),H=0;H<D;++H)P[H]=[];for(H=0;H<N;++H){var T=b[H];P[T.source.index].push(T.target),P[T.target.index].push(T.source)}}for(var C=P[x],H=-1,R=C.length,q;++H<R;)if(!isNaN(q=C[H][B]))return q;return Math.random()*$}return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){if(i||(i=f.behavior.drag().origin(ct).on("dragstart.force",Mc).on("drag.force",_).on("dragend.force",bc)),!arguments.length)return i;this.on("mouseover.force",wc).on("mouseout.force",Sc).call(i)};function _(x){x.px=f.event.x,x.py=f.event.y,t.resume()}return f.rebind(t,e,"on")};function Mc(t){t.fixed|=2}function bc(t){t.fixed&=-7}function wc(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Sc(t){t.fixed&=-5}function wo(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a=t.nodes,o=a.length,u=-1,l;++u<o;)l=a[u],l!=null&&(wo(l,e,n),t.charge+=l.charge,r+=l.charge*l.cx,i+=l.charge*l.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=e*n[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,i+=s*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}var Ec=20,kc=1,Nc=1/0;f.layout.hierarchy=function(){var t=Lc,e=Ac,n=Dc;function r(i){var a=[i],o=[],u;for(i.depth=0;(u=a.pop())!=null;)if(o.push(u),(s=e.call(r,u,u.depth))&&(l=s.length)){for(var l,s,c;--l>=0;)a.push(c=s[l]),c.parent=u,c.depth=u.depth+1;n&&(u.value=0),u.children=s}else n&&(u.value=+n.call(r,u,u.depth)||0),delete u.children;return re(i,function(h){var g,m;t&&(g=h.children)&&g.sort(t),n&&(m=h.parent)&&(m.value+=h.value)}),o}return r.sort=function(i){return arguments.length?(t=i,r):t},r.children=function(i){return arguments.length?(e=i,r):e},r.value=function(i){return arguments.length?(n=i,r):n},r.revalue=function(i){return n&&(En(i,function(a){a.children&&(a.value=0)}),re(i,function(a){var o;a.children||(a.value=+n.call(r,a,a.depth)||0),(o=a.parent)&&(o.value+=a.value)})),i},r};function Sn(t,e){return f.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=zc,t}function En(t,e){for(var n=[t];(t=n.pop())!=null;)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function re(t,e){for(var n=[t],r=[];(t=n.pop())!=null;)if(r.push(t),(o=t.children)&&(a=o.length))for(var i=-1,a,o;++i<a;)n.push(o[i]);for(;(t=r.pop())!=null;)e(t)}function Ac(t){return t.children}function Dc(t){return t.value}function Lc(t,e){return e.value-t.value}function zc(t){return f.merge(t.map(function(e){return(e.children||[]).map(function(n){return{source:e,target:n}})}))}f.layout.partition=function(){var t=f.layout.hierarchy(),e=[1,1];function n(a,o,u,l){var s=a.children;if(a.x=o,a.y=a.depth*l,a.dx=u,a.dy=l,s&&(h=s.length)){var c=-1,h,g,m;for(u=a.value?u/a.value:0;++c<h;)n(g=s[c],o,m=g.value*u,l),o+=m}}function r(a){var o=a.children,u=0;if(o&&(s=o.length))for(var l=-1,s;++l<s;)u=Math.max(u,r(o[l]));return 1+u}function i(a,o){var u=t.call(this,a,o);return n(u[0],0,e[0],e[1]/r(u[0])),u}return i.size=function(a){return arguments.length?(e=a,i):e},Sn(i,t)},f.layout.pie=function(){var t=Number,e=So,n=0,r=Pt,i=0;function a(o){var u=o.length,l=o.map(function(M,_){return+t.call(a,M,_)}),s=+(typeof n=="function"?n.apply(this,arguments):n),c=(typeof r=="function"?r.apply(this,arguments):r)-s,h=Math.min(Math.abs(c)/u,+(typeof i=="function"?i.apply(this,arguments):i)),g=h*(c<0?-1:1),m=f.sum(l),b=m?(c-u*g)/m:0,d=f.range(u),p=[],y;return e!=null&&d.sort(e===So?function(M,_){return l[_]-l[M]}:function(M,_){return e(o[M],o[_])}),d.forEach(function(M){p[M]={data:o[M],value:y=l[M],startAngle:s,endAngle:s+=y*b+g,padAngle:h}}),p}return a.value=function(o){return arguments.length?(t=o,a):t},a.sort=function(o){return arguments.length?(e=o,a):e},a.startAngle=function(o){return arguments.length?(n=o,a):n},a.endAngle=function(o){return arguments.length?(r=o,a):r},a.padAngle=function(o){return arguments.length?(i=o,a):i},a};var So={};f.layout.stack=function(){var t=ct,e=ea,n=na,r=Pc,i=Tc,a=Rc;function o(u,l){if(!(b=u.length))return u;var s=u.map(function(M,_){return t.call(o,M,_)}),c=s.map(function(M){return M.map(function(_,x){return[i.call(o,_,x),a.call(o,_,x)]})}),h=e.call(o,c,l);s=f.permute(s,h),c=f.permute(c,h);var g=n.call(o,c,l),m=s[0].length,b,d,p,y;for(p=0;p<m;++p)for(r.call(o,s[0][p],y=g[p],c[0][p][1]),d=1;d<b;++d)r.call(o,s[d][p],y+=c[d-1][p][1],c[d][p][1]);return u}return o.values=function(u){return arguments.length?(t=u,o):t},o.order=function(u){return arguments.length?(e=typeof u=="function"?u:Cc.get(u)||ea,o):e},o.offset=function(u){return arguments.length?(n=typeof u=="function"?u:Ic.get(u)||na,o):n},o.x=function(u){return arguments.length?(i=u,o):i},o.y=function(u){return arguments.length?(a=u,o):a},o.out=function(u){return arguments.length?(r=u,o):r},o};function Tc(t){return t.x}function Rc(t){return t.y}function Pc(t,e,n){t.y0=e,t.y=n}var Cc=f.map({"inside-out":function(t){var e=t.length,n,r,i=t.map(Oc),a=t.map(qc),o=f.range(e).sort(function(h,g){return i[h]-i[g]}),u=0,l=0,s=[],c=[];for(n=0;n<e;++n)r=o[n],u<l?(u+=a[r],s.push(r)):(l+=a[r],c.push(r));return c.reverse().concat(s)},reverse:function(t){return f.range(t.length).reverse()},default:ea}),Ic=f.map({silhouette:function(t){var e=t.length,n=t[0].length,r=[],i=0,a,o,u,l=[];for(o=0;o<n;++o){for(a=0,u=0;a<e;a++)u+=t[a][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)l[o]=(i-r[o])/2;return l},wiggle:function(t){var e=t.length,n=t[0],r=n.length,i,a,o,u,l,s,c,h,g,m=[];for(m[0]=h=g=0,a=1;a<r;++a){for(i=0,u=0;i<e;++i)u+=t[i][a][1];for(i=0,l=0,c=n[a][0]-n[a-1][0];i<e;++i){for(o=0,s=(t[i][a][1]-t[i][a-1][1])/(2*c);o<i;++o)s+=(t[o][a][1]-t[o][a-1][1])/c;l+=s*t[i][a][1]}m[a]=h-=u?l/u*c:0,h<g&&(g=h)}for(a=0;a<r;++a)m[a]-=g;return m},expand:function(t){var e=t.length,n=t[0].length,r=1/e,i,a,o,u=[];for(a=0;a<n;++a){for(i=0,o=0;i<e;i++)o+=t[i][a][1];if(o)for(i=0;i<e;i++)t[i][a][1]/=o;else for(i=0;i<e;i++)t[i][a][1]=r}for(a=0;a<n;++a)u[a]=0;return u},zero:na});function ea(t){return f.range(t.length)}function na(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Oc(t){for(var e=1,n=0,r=t[0][1],i,a=t.length;e<a;++e)(i=t[e][1])>r&&(n=e,r=i);return n}function qc(t){return t.reduce(Fc,0)}function Fc(t,e){return t+e[1]}f.layout.histogram=function(){var t=!0,e=Number,n=Bc,r=Hc;function i(a,g){for(var u=[],l=a.map(e,this),s=n.call(this,l,g),c=r.call(this,s,l,g),h,g=-1,m=l.length,b=c.length-1,d=t?1:1/m,p;++g<b;)h=u[g]=[],h.dx=c[g+1]-(h.x=c[g]),h.y=0;if(b>0)for(g=-1;++g<m;)p=l[g],p>=s[0]&&p<=s[1]&&(h=u[f.bisect(c,p,1,b)-1],h.y+=d,h.push(a[g]));return u}return i.value=function(a){return arguments.length?(e=a,i):e},i.range=function(a){return arguments.length?(n=ut(a),i):n},i.bins=function(a){return arguments.length?(r=typeof a=="number"?function(o){return Eo(o,a)}:ut(a),i):r},i.frequency=function(a){return arguments.length?(t=!!a,i):t},i};function Hc(t,e){return Eo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Eo(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function Bc(t){return[f.min(t),f.max(t)]}f.layout.pack=function(){var t=f.layout.hierarchy().sort(Uc),e=0,n=[1,1],r;function i(a,o){var u=t.call(this,a,o),l=u[0],s=n[0],c=n[1],h=r==null?Math.sqrt:typeof r=="function"?r:function(){return r};if(l.x=l.y=0,re(l,function(m){m.r=+h(m.value)}),re(l,Ao),e){var g=e*(r?1:Math.max(2*l.r/s,2*l.r/c))/2;re(l,function(m){m.r+=g}),re(l,Ao),re(l,function(m){m.r-=g})}return Do(l,s/2,c/2,r?1:1/Math.max(2*l.r/s,2*l.r/c)),u}return i.size=function(a){return arguments.length?(n=a,i):n},i.radius=function(a){return arguments.length?(r=a==null||typeof a=="function"?a:+a,i):r},i.padding=function(a){return arguments.length?(e=+a,i):e},Sn(i,t)};function Uc(t,e){return t.value-e.value}function ra(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ko(t,e){t._pack_next=e,e._pack_prev=t}function No(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return .999*i*i>n*n+r*r}function Ao(t){if(!(e=t.children)||!(g=e.length))return;var e,n=1/0,r=-1/0,i=1/0,a=-1/0,o,u,l,s,c,h,g;function m(x){n=Math.min(x.x-x.r,n),r=Math.max(x.x+x.r,r),i=Math.min(x.y-x.r,i),a=Math.max(x.y+x.r,a)}if(e.forEach(Yc),o=e[0],o.x=-o.r,o.y=0,m(o),g>1&&(u=e[1],u.x=u.r,u.y=0,m(u),g>2))for(l=e[2],Lo(o,u,l),m(l),ra(o,l),o._pack_prev=l,ra(l,u),u=o._pack_next,s=3;s<g;s++){Lo(o,u,l=e[s]);var b=0,d=1,p=1;for(c=u._pack_next;c!==u;c=c._pack_next,d++)if(No(c,l)){b=1;break}if(b==1)for(h=o._pack_prev;h!==c._pack_prev&&!No(h,l);h=h._pack_prev,p++);b?(d<p||d==p&&u.r<o.r?ko(o,u=c):ko(o=h,u),s--):(ra(o,l),u=l,m(l))}var y=(n+r)/2,M=(i+a)/2,_=0;for(s=0;s<g;s++)l=e[s],l.x-=y,l.y-=M,_=Math.max(_,l.r+Math.sqrt(l.x*l.x+l.y*l.y));t.r=_,e.forEach($c)}function Yc(t){t._pack_next=t._pack_prev=t}function $c(t){delete t._pack_next,delete t._pack_prev}function Do(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)Do(i[a],e,n,r)}function Lo(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,u=i*i+a*a;o*=o,r*=r;var l=.5+(r-o)/(2*u),s=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=t.x+l*i+s*a,n.y=t.y+l*a-s*i}else n.x=t.x+r,n.y=t.y}f.layout.tree=function(){var t=f.layout.hierarchy().sort(null).value(null),e=zo,n=[1,1],r=null;function i(c,h){var g=t.call(this,c,h),m=g[0],b=a(m);if(re(b,o),b.parent.m=-b.z,En(b,u),r)En(m,s);else{var d=m,p=m,y=m;En(m,function(D){D.x<d.x&&(d=D),D.x>p.x&&(p=D),D.depth>y.depth&&(y=D)});var M=e(d,p)/2-d.x,_=n[0]/(p.x+e(p,d)/2+M),x=n[1]/(y.depth||1);En(m,function(D){D.x=(D.x+M)*_,D.y=D.depth*x})}return g}function a(c){for(var h={A:null,children:[c]},g=[h],m;(m=g.pop())!=null;)for(var b=m.children,d,p=0,y=b.length;p<y;++p)g.push((b[p]=d={_:b[p],parent:m,children:(d=b[p].children)&&d.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:p}).a=d);return h.children[0]}function o(c){var h=c.children,g=c.parent.children,m=c.i?g[c.i-1]:null;if(h.length){jc(c);var b=(h[0].z+h[h.length-1].z)/2;m?(c.z=m.z+e(c._,m._),c.m=c.z-b):c.z=b}else m&&(c.z=m.z+e(c._,m._));c.parent.A=l(c,m,c.parent.A||g[0])}function u(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c,h,g){if(h){for(var m=c,b=c,d=h,p=m.parent.children[0],y=m.m,M=b.m,_=d.m,x=p.m,D;d=aa(d),m=ia(m),d&&m;)p=ia(p),b=aa(b),b.a=c,D=d.z+_-m.z-y+e(d._,m._),D>0&&(Xc(Gc(d,c,g),c,D),y+=D,M+=D),_+=d.m,y+=m.m,x+=p.m,M+=b.m;d&&!aa(b)&&(b.t=d,b.m+=_-M),m&&!ia(p)&&(p.t=m,p.m+=y-x,g=c)}return g}function s(c){c.x*=n[0],c.y=c.depth*n[1]}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=(n=c)==null?s:null,i):r?null:n},i.nodeSize=function(c){return arguments.length?(r=(n=c)==null?null:s,i):r?n:null},Sn(i,t)};function zo(t,e){return t.parent==e.parent?1:2}function ia(t){var e=t.children;return e.length?e[0]:t.t}function aa(t){var e=t.children,n;return(n=e.length)?e[n-1]:t.t}function Xc(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function jc(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function Gc(t,e,n){return t.a.parent===e.parent?t.a:n}f.layout.cluster=function(){var t=f.layout.hierarchy().sort(null).value(null),e=zo,n=[1,1],r=!1;function i(a,o){var u=t.call(this,a,o),l=u[0],s,c=0;re(l,function(d){var p=d.children;p&&p.length?(d.x=Zc(p),d.y=Wc(p)):(d.x=s?c+=e(d,s):0,d.y=0,s=d)});var h=To(l),g=Ro(l),m=h.x-e(h,g)/2,b=g.x+e(g,h)/2;return re(l,r?function(d){d.x=(d.x-l.x)*n[0],d.y=(l.y-d.y)*n[1]}:function(d){d.x=(d.x-m)/(b-m)*n[0],d.y=(1-(l.y?d.y/l.y:1))*n[1]}),u}return i.separation=function(a){return arguments.length?(e=a,i):e},i.size=function(a){return arguments.length?(r=(n=a)==null,i):r?null:n},i.nodeSize=function(a){return arguments.length?(r=(n=a)!=null,i):r?n:null},Sn(i,t)};function Wc(t){return 1+f.max(t,function(e){return e.y})}function Zc(t){return t.reduce(function(e,n){return e+n.x},0)/t.length}function To(t){var e=t.children;return e&&e.length?To(e[0]):t}function Ro(t){var e=t.children,n;return e&&(n=e.length)?Ro(e[n-1]):t}f.layout.treemap=function(){var t=f.layout.hierarchy(),e=Math.round,n=[1,1],r=null,i=ua,a=!1,o,u="squarify",l=.5*(1+Math.sqrt(5));function s(d,p){for(var y=-1,M=d.length,_,x;++y<M;)x=(_=d[y]).value*(p<0?0:p),_.area=isNaN(x)||x<=0?0:x}function c(d){var p=d.children;if(p&&p.length){var y=i(d),M=[],_=p.slice(),x,D=1/0,N,A=u==="slice"?y.dx:u==="dice"?y.dy:u==="slice-dice"?d.depth&1?y.dy:y.dx:Math.min(y.dx,y.dy),k;for(s(_,y.dx*y.dy/d.value),M.area=0;(k=_.length)>0;)M.push(x=_[k-1]),M.area+=x.area,u!=="squarify"||(N=g(M,A))<=D?(_.pop(),D=N):(M.area-=M.pop().area,m(M,A,y,!1),A=Math.min(y.dx,y.dy),M.length=M.area=0,D=1/0);M.length&&(m(M,A,y,!0),M.length=M.area=0),p.forEach(c)}}function h(d){var p=d.children;if(p&&p.length){var y=i(d),M=p.slice(),_,x=[];for(s(M,y.dx*y.dy/d.value),x.area=0;_=M.pop();)x.push(_),x.area+=_.area,_.z!=null&&(m(x,_.z?y.dx:y.dy,y,!M.length),x.length=x.area=0);p.forEach(h)}}function g(d,p){for(var y=d.area,M,_=0,x=1/0,D=-1,N=d.length;++D<N;)(M=d[D].area)&&(M<x&&(x=M),M>_&&(_=M));return y*=y,p*=p,y?Math.max(p*_*l/y,y/(p*x*l)):1/0}function m(d,p,y,M){var _=-1,x=d.length,D=y.x,N=y.y,A=p?e(d.area/p):0,k;if(p==y.dx){for((M||A>y.dy)&&(A=y.dy);++_<x;)k=d[_],k.x=D,k.y=N,k.dy=A,D+=k.dx=Math.min(y.x+y.dx-D,A?e(k.area/A):0);k.z=!0,k.dx+=y.x+y.dx-D,y.y+=A,y.dy-=A}else{for((M||A>y.dx)&&(A=y.dx);++_<x;)k=d[_],k.x=D,k.y=N,k.dx=A,N+=k.dy=Math.min(y.y+y.dy-N,A?e(k.area/A):0);k.z=!1,k.dy+=y.y+y.dy-N,y.x+=A,y.dx-=A}}function b(d){var p=o||t(d),y=p[0];return y.x=y.y=0,y.value?(y.dx=n[0],y.dy=n[1]):y.dx=y.dy=0,o&&t.revalue(y),s([y],y.dx*y.dy/y.value),(o?h:c)(y),a&&(o=p),p}return b.size=function(d){return arguments.length?(n=d,b):n},b.padding=function(d){if(!arguments.length)return r;function p(_){var x=d.call(b,_,_.depth);return x==null?ua(_):Po(_,typeof x=="number"?[x,x,x,x]:x)}function y(_){return Po(_,d)}var M;return i=(r=d)==null?ua:(M=typeof d)=="function"?p:(M==="number"&&(d=[d,d,d,d]),y),b},b.round=function(d){return arguments.length?(e=d?Math.round:Number,b):e!=Number},b.sticky=function(d){return arguments.length?(a=d,o=null,b):a},b.ratio=function(d){return arguments.length?(l=d,b):l},b.mode=function(d){return arguments.length?(u=d+"",b):u},Sn(b,t)};function ua(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Po(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}f.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var r,i,a;do r=Math.random()*2-1,i=Math.random()*2-1,a=r*r+i*i;while(!a||a>1);return t+e*r*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=f.random.normal.apply(f,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=f.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},f.scale={};function en(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Er(t){return t.rangeExtent?t.rangeExtent():en(t.range())}function Vc(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(o){return a(i(o))}}function kr(t,e){var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Co(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Jc}var Jc={floor:ct,ceil:ct};function Kc(t,e,n,r){var i=[],a=[],o=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=u;)i.push(n(t[o-1],t[o])),a.push(r(e[o-1],e[o]));return function(l){var s=f.bisect(t,l,1,u)-1;return a[s](i[s](l))}}f.scale.linear=function(){return Io([0,1],[0,1],Ie,!1)};function Io(t,e,n,r){var i,a;function o(){var l=Math.min(t.length,e.length)>2?Kc:Vc,s=r?yc:vc;return i=l(t,e,s,n),a=l(e,t,s,Ie),u}function u(l){return i(l)}return u.invert=function(l){return a(l)},u.domain=function(l){return arguments.length?(t=l.map(Number),o()):t},u.range=function(l){return arguments.length?(e=l,o()):e},u.rangeRound=function(l){return u.range(l).interpolate(vo)},u.clamp=function(l){return arguments.length?(r=l,o()):r},u.interpolate=function(l){return arguments.length?(n=l,o()):n},u.ticks=function(l){return la(t,l)},u.tickFormat=function(l,s){return sa(t,l,s)},u.nice=function(l){return Oo(t,l),o()},u.copy=function(){return Io(t,e,n,r)},o()}function oa(t,e){return f.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Oo(t,e){return kr(t,Co(nn(t,e)[2])),kr(t,Co(nn(t,e)[2])),t}function nn(t,e){e==null&&(e=10);var n=en(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function la(t,e){return f.range.apply(f,nn(t,e))}function sa(t,e,n){var r=nn(t,e);if(n){var i=fu.exec(n);if(i.shift(),i[8]==="s"){var a=f.formatPrefix(Math.max(V(r[0]),V(r[1])));return i[7]||(i[7]="."+Nr(a.scale(r[2]))),i[8]="f",n=f.format(i.join("")),function(o){return n(a.scale(o))+a.symbol}}i[7]||(i[7]="."+tf(i[8],r)),n=i.join("")}else n=",."+Nr(r[2])+"f";return f.format(n)}var Qc={s:1,g:1,p:1,r:1,e:1};function Nr(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function tf(t,e){var n=Nr(e[2]);return t in Qc?Math.abs(n-Nr(Math.max(V(e[0]),V(e[1]))))+ +(t!=="e"):n-(t==="%")*2}f.scale.log=function(){return qo(f.scale.linear().domain([0,1]),10,!0,[1,10])};function qo(t,e,n,r){function i(u){return(n?Math.log(u<0?0:u):-Math.log(u>0?0:-u))/Math.log(e)}function a(u){return n?Math.pow(e,u):-Math.pow(e,-u)}function o(u){return t(i(u))}return o.invert=function(u){return a(t.invert(u))},o.domain=function(u){return arguments.length?(n=u[0]>=0,t.domain((r=u.map(Number)).map(i)),o):r},o.base=function(u){return arguments.length?(e=+u,t.domain(r.map(i)),o):e},o.nice=function(){var u=kr(r.map(i),n?Math:ef);return t.domain(u),r=u.map(a),o},o.ticks=function(){var u=en(r),l=[],s=u[0],c=u[1],h=Math.floor(i(s)),g=Math.ceil(i(c)),m=e%1?2:e;if(isFinite(g-h)){if(n){for(;h<g;h++)for(var b=1;b<m;b++)l.push(a(h)*b);l.push(a(h))}else for(l.push(a(h));h++<g;)for(var b=m-1;b>0;b--)l.push(a(h)*b);for(h=0;l[h]<s;h++);for(g=l.length;l[g-1]>c;g--);l=l.slice(h,g)}return l},o.tickFormat=function(u,l){if(!arguments.length)return Fo;arguments.length<2?l=Fo:typeof l!="function"&&(l=f.format(l));var s=Math.max(1,e*u/o.ticks().length);return function(c){var h=c/a(Math.round(i(c)));return h*e<e-.5&&(h*=e),h<=s?l(c):""}},o.copy=function(){return qo(t.copy(),e,n,r)},oa(o,t)}var Fo=f.format(".0e"),ef={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};f.scale.pow=function(){return Ho(f.scale.linear(),1,[0,1])};function Ho(t,e,n){var r=Ar(e),i=Ar(1/e);function a(o){return t(r(o))}return a.invert=function(o){return i(t.invert(o))},a.domain=function(o){return arguments.length?(t.domain((n=o.map(Number)).map(r)),a):n},a.ticks=function(o){return la(n,o)},a.tickFormat=function(o,u){return sa(n,o,u)},a.nice=function(o){return a.domain(Oo(n,o))},a.exponent=function(o){return arguments.length?(r=Ar(e=o),i=Ar(1/e),t.domain(n.map(r)),a):e},a.copy=function(){return Ho(t.copy(),e,n)},oa(a,t)}function Ar(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}f.scale.sqrt=function(){return f.scale.pow().exponent(.5)},f.scale.ordinal=function(){return Bo([],{t:"range",a:[[]]})};function Bo(t,e){var n,r,i;function a(u){return r[((n.get(u)||(e.t==="range"?n.set(u,t.push(u)):NaN))-1)%r.length]}function o(u,l){return f.range(t.length).map(function(s){return u+l*s})}return a.domain=function(u){if(!arguments.length)return t;t=[],n=new Yt;for(var l=-1,s=u.length,c;++l<s;)n.has(c=u[l])||n.set(c,t.push(c));return a[e.t].apply(a,e.a)},a.range=function(u){return arguments.length?(r=u,i=0,e={t:"range",a:arguments},a):r},a.rangePoints=function(u,l){arguments.length<2&&(l=0);var s=u[0],c=u[1],h=t.length<2?(s=(s+c)/2,0):(c-s)/(t.length-1+l);return r=o(s+h*l/2,h),i=0,e={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(u,l){arguments.length<2&&(l=0);var s=u[0],c=u[1],h=t.length<2?(s=c=Math.round((s+c)/2),0):(c-s)/(t.length-1+l)|0;return r=o(s+Math.round(h*l/2+(c-s-(t.length-1+l)*h)/2),h),i=0,e={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(u,l,s){arguments.length<2&&(l=0),arguments.length<3&&(s=l);var c=u[1]<u[0],h=u[c-0],g=u[1-c],m=(g-h)/(t.length-l+2*s);return r=o(h+m*s,m),c&&r.reverse(),i=m*(1-l),e={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(u,l,s){arguments.length<2&&(l=0),arguments.length<3&&(s=l);var c=u[1]<u[0],h=u[c-0],g=u[1-c],m=Math.floor((g-h)/(t.length-l+2*s));return r=o(h+Math.round((g-h-(t.length-l)*m)/2),m),c&&r.reverse(),i=Math.round(m*(1-l)),e={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return i},a.rangeExtent=function(){return en(e.a[0])},a.copy=function(){return Bo(t,e)},a.domain(t)}f.scale.category10=function(){return f.scale.ordinal().range(nf)},f.scale.category20=function(){return f.scale.ordinal().range(rf)},f.scale.category20b=function(){return f.scale.ordinal().range(af)},f.scale.category20c=function(){return f.scale.ordinal().range(uf)};var nf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Xn),rf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Xn),af=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Xn),uf=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Xn);f.scale.quantile=function(){return Uo([],[])};function Uo(t,e){var n;function r(){var a=0,o=e.length;for(n=[];++a<o;)n[a-1]=f.quantile(t,a/o);return i}function i(a){if(!isNaN(a=+a))return e[f.bisect(n,a)]}return i.domain=function(a){return arguments.length?(t=a.map(rt).filter(lt).sort(et),r()):t},i.range=function(a){return arguments.length?(e=a,r()):e},i.quantiles=function(){return n},i.invertExtent=function(a){return a=e.indexOf(a),a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.copy=function(){return Uo(t,e)},r()}f.scale.quantize=function(){return Yo(0,1,[0,1])};function Yo(t,e,n){var r,i;function a(u){return n[Math.max(0,Math.min(i,Math.floor(r*(u-t))))]}function o(){return r=n.length/(e-t),i=n.length-1,a}return a.domain=function(u){return arguments.length?(t=+u[0],e=+u[u.length-1],o()):[t,e]},a.range=function(u){return arguments.length?(n=u,o()):n},a.invertExtent=function(u){return u=n.indexOf(u),u=u<0?NaN:u/r+t,[u,u+1/r]},a.copy=function(){return Yo(t,e,n)},o()}f.scale.threshold=function(){return $o([.5],[0,1])};function $o(t,e){function n(r){if(r<=r)return e[f.bisect(t,r)]}return n.domain=function(r){return arguments.length?(t=r,n):t},n.range=function(r){return arguments.length?(e=r,n):e},n.invertExtent=function(r){return r=e.indexOf(r),[t[r-1],t[r]]},n.copy=function(){return $o(t,e)},n}f.scale.identity=function(){return Xo([0,1])};function Xo(t){function e(n){return+n}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(n){return la(t,n)},e.tickFormat=function(n,r){return sa(t,n,r)},e.copy=function(){return Xo(t)},e}f.svg={};function of(){return 0}f.svg.arc=function(){var t=lf,e=sf,n=of,r=Dr,i=jo,a=Go,o=cf;function u(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),h=i.apply(this,arguments)-gt,g=a.apply(this,arguments)-gt,m=Math.abs(g-h),b=h>g?0:1;if(c<s&&(d=c,c=s,s=d),m>=$l)return l(c,b)+(s?l(s,1-b):"")+"Z";var d,p,y,M,_=0,x=0,D,N,A,k,P,I,X,B,$=[];if((M=(+o.apply(this,arguments)||0)/2)&&(y=r===Dr?Math.sqrt(s*s+c*c):+r.apply(this,arguments),b||(x*=-1),c&&(x=ve(y/c*Math.sin(M))),s&&(_=ve(y/s*Math.sin(M)))),c){D=c*Math.cos(h+x),N=c*Math.sin(h+x),A=c*Math.cos(g-x),k=c*Math.sin(g-x);var T=Math.abs(g-h-2*x)<=tt?0:1;if(x&&Lr(D,N,A,k)===b^T){var C=(h+g)/2;D=c*Math.cos(C),N=c*Math.sin(C),A=k=null}}else D=N=0;if(s){P=s*Math.cos(g-_),I=s*Math.sin(g-_),X=s*Math.cos(h+_),B=s*Math.sin(h+_);var H=Math.abs(h-g+2*_)<=tt?0:1;if(_&&Lr(P,I,X,B)===1-b^H){var R=(h+g)/2;P=s*Math.cos(R),I=s*Math.sin(R),X=B=null}}else P=I=0;if(m>j&&(d=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){p=s<c^b?0:1;var q=d,G=d;if(m<tt){var J=X==null?[P,I]:A==null?[D,N]:Gi([D,N],[X,B],[A,k],[P,I]),nt=D-J[0],at=N-J[1],ot=A-J[0],kt=k-J[1],Lt=1/Math.sin(Math.acos((nt*ot+at*kt)/(Math.sqrt(nt*nt+at*at)*Math.sqrt(ot*ot+kt*kt)))/2),Nt=Math.sqrt(J[0]*J[0]+J[1]*J[1]);G=Math.min(d,(s-Nt)/(Lt-1)),q=Math.min(d,(c-Nt)/(Lt+1))}if(A!=null){var Tt=zr(X==null?[P,I]:[X,B],[D,N],c,q,b),bt=zr([A,k],[P,I],c,q,b);d===q?$.push("M",Tt[0],"A",q,",",q," 0 0,",p," ",Tt[1],"A",c,",",c," 0 ",1-b^Lr(Tt[1][0],Tt[1][1],bt[1][0],bt[1][1]),",",b," ",bt[1],"A",q,",",q," 0 0,",p," ",bt[0]):$.push("M",Tt[0],"A",q,",",q," 0 1,",p," ",bt[0])}else $.push("M",D,",",N);if(X!=null){var Rt=zr([D,N],[X,B],s,-G,b),Fe=zr([P,I],A==null?[D,N]:[A,k],s,-G,b);d===G?$.push("L",Fe[0],"A",G,",",G," 0 0,",p," ",Fe[1],"A",s,",",s," 0 ",b^Lr(Fe[1][0],Fe[1][1],Rt[1][0],Rt[1][1]),",",1-b," ",Rt[1],"A",G,",",G," 0 0,",p," ",Rt[0]):$.push("L",Fe[0],"A",G,",",G," 0 0,",p," ",Rt[0])}else $.push("L",P,",",I)}else $.push("M",D,",",N),A!=null&&$.push("A",c,",",c," 0 ",T,",",b," ",A,",",k),$.push("L",P,",",I),X!=null&&$.push("A",s,",",s," 0 ",H,",",1-b," ",X,",",B);return $.push("Z"),$.join("")}function l(s,c){return"M0,"+s+"A"+s+","+s+" 0 1,"+c+" 0,"+-s+"A"+s+","+s+" 0 1,"+c+" 0,"+s}return u.innerRadius=function(s){return arguments.length?(t=ut(s),u):t},u.outerRadius=function(s){return arguments.length?(e=ut(s),u):e},u.cornerRadius=function(s){return arguments.length?(n=ut(s),u):n},u.padRadius=function(s){return arguments.length?(r=s==Dr?Dr:ut(s),u):r},u.startAngle=function(s){return arguments.length?(i=ut(s),u):i},u.endAngle=function(s){return arguments.length?(a=ut(s),u):a},u.padAngle=function(s){return arguments.length?(o=ut(s),u):o},u.centroid=function(){var s=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-gt;return[Math.cos(c)*s,Math.sin(c)*s]},u};var Dr="auto";function lf(t){return t.innerRadius}function sf(t){return t.outerRadius}function jo(t){return t.startAngle}function Go(t){return t.endAngle}function cf(t){return t&&t.padAngle}function Lr(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function zr(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],u=(i?r:-r)/Math.sqrt(a*a+o*o),l=u*o,s=-u*a,c=t[0]+l,h=t[1]+s,g=e[0]+l,m=e[1]+s,b=(c+g)/2,d=(h+m)/2,p=g-c,y=m-h,M=p*p+y*y,_=n-r,x=c*m-g*h,D=(y<0?-1:1)*Math.sqrt(Math.max(0,_*_*M-x*x)),N=(x*y-p*D)/M,A=(-x*p-y*D)/M,k=(x*y+p*D)/M,P=(-x*p+y*D)/M,I=N-b,X=A-d,B=k-b,$=P-d;return I*I+X*X>B*B+$*$&&(N=k,A=P),[[N-l,A-s],[N*n/_,A*n/_]]}function Wo(t){var e=Ze,n=yn,r=pn,i=Zt,a=i.key,o=.7;function u(l){var s=[],c=[],h=-1,g=l.length,m,b=ut(e),d=ut(n);function p(){s.push("M",i(t(c),o))}for(;++h<g;)r.call(this,m=l[h],h)?c.push([+b.call(this,m,h),+d.call(this,m,h)]):c.length&&(p(),c=[]);return c.length&&p(),s.length?s.join(""):null}return u.x=function(l){return arguments.length?(e=l,u):e},u.y=function(l){return arguments.length?(n=l,u):n},u.defined=function(l){return arguments.length?(r=l,u):r},u.interpolate=function(l){return arguments.length?(typeof l=="function"?a=i=l:a=(i=ca.get(l)||Zt).key,u):a},u.tension=function(l){return arguments.length?(o=l,u):o},u}f.svg.line=function(){return Wo(ct)};var ca=f.map({linear:Zt,"linear-closed":Zo,step:ff,"step-before":fa,"step-after":ha,basis:Vo,"basis-open":pf,"basis-closed":mf,bundle:vf,cardinal:df,"cardinal-open":hf,"cardinal-closed":gf,monotone:xf});ca.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});function Zt(t){return t.length>1?t.join("L"):t+"Z"}function Zo(t){return t.join("L")+"Z"}function ff(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function fa(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ha(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function hf(t,e){return t.length<4?Zt(t):t[1]+Tr(t.slice(1,-1),da(t,e))}function gf(t,e){return t.length<3?Zo(t):t[0]+Tr((t.push(t[0]),t),da([t[t.length-2]].concat(t,[t[1]]),e))}function df(t,e){return t.length<3?Zt(t):t[0]+Tr(t,da(t,e))}function Tr(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Zt(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],u=o,l=1;if(n&&(r+="Q"+(a[0]-o[0]*2/3)+","+(a[1]-o[1]*2/3)+","+a[0]+","+a[1],i=t[1],l=2),e.length>1){u=e[1],a=t[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1];for(var s=2;s<e.length;s++,l++)a=t[l],u=e[s],r+="S"+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1]}if(n){var c=t[l];r+="Q"+(a[0]+u[0]*2/3)+","+(a[1]+u[1]*2/3)+","+c[0]+","+c[1]}return r}function da(t,e){for(var n=[],r=(1-e)/2,i,a=t[0],o=t[1],u=1,l=t.length;++u<l;)i=a,a=o,o=t[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function Vo(t){if(t.length<3)return Zt(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],u=[a,a,a,r[1]],l=[i,",",a,"L",qt(we,o),",",qt(we,u)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),pa(l,o,u);return t.pop(),l.push("L",r),l.join("")}function pf(t){if(t.length<4)return Zt(t);for(var e=[],n=-1,r=t.length,i,a=[0],o=[0];++n<3;)i=t[n],a.push(i[0]),o.push(i[1]);for(e.push(qt(we,a)+","+qt(we,o)),--n;++n<r;)i=t[n],a.shift(),a.push(i[0]),o.shift(),o.push(i[1]),pa(e,a,o);return e.join("")}function mf(t){for(var e,n=-1,r=t.length,i=r+4,a,o=[],u=[];++n<4;)a=t[n%r],o.push(a[0]),u.push(a[1]);for(e=[qt(we,o),",",qt(we,u)],--n;++n<i;)a=t[n%r],o.shift(),o.push(a[0]),u.shift(),u.push(a[1]),pa(e,o,u);return e.join("")}function vf(t,e){var n=t.length-1;if(n)for(var r=t[0][0],i=t[0][1],a=t[n][0]-r,o=t[n][1]-i,u=-1,l,s;++u<=n;)l=t[u],s=u/n,l[0]=e*l[0]+(1-e)*(r+s*a),l[1]=e*l[1]+(1-e)*(i+s*o);return Vo(t)}function qt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}var Jo=[0,2/3,1/3,0],Ko=[0,1/3,2/3,0],we=[0,1/6,2/3,1/6];function pa(t,e,n){t.push("C",qt(Jo,e),",",qt(Jo,n),",",qt(Ko,e),",",qt(Ko,n),",",qt(we,e),",",qt(we,n))}function ma(t,e){return(e[1]-t[1])/(e[0]-t[0])}function yf(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=ma(i,a);++e<n;)r[e]=(o+(o=ma(i=a,a=t[e+1])))/2;return r[e]=o,r}function _f(t){for(var e=[],n,r,i,a,o=yf(t),u=-1,l=t.length-1;++u<l;)n=ma(t[u],t[u+1]),V(n)<j?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,a=r*r+i*i,a>9&&(a=n*3/Math.sqrt(a),o[u]=a*r,o[u+1]=a*i));for(u=-1;++u<=l;)a=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),e.push([a||0,o[u]*a||0]);return e}function xf(t){return t.length<3?Zt(t):t[0]+Tr(t,_f(t))}f.svg.line.radial=function(){var t=Wo(Qo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t};function Qo(t){for(var e,n=-1,r=t.length,i,a;++n<r;)e=t[n],i=e[0],a=e[1]-gt,e[0]=i*Math.cos(a),e[1]=i*Math.sin(a);return t}function tl(t){var e=Ze,n=Ze,r=0,i=yn,a=pn,o=Zt,u=o.key,l=o,s="L",c=.7;function h(g){var m=[],b=[],d=[],p=-1,y=g.length,M,_=ut(e),x=ut(r),D=e===n?function(){return A}:ut(n),N=r===i?function(){return k}:ut(i),A,k;function P(){m.push("M",o(t(d),c),s,l(t(b.reverse()),c),"Z")}for(;++p<y;)a.call(this,M=g[p],p)?(b.push([A=+_.call(this,M,p),k=+x.call(this,M,p)]),d.push([+D.call(this,M,p),+N.call(this,M,p)])):b.length&&(P(),b=[],d=[]);return b.length&&P(),m.length?m.join(""):null}return h.x=function(g){return arguments.length?(e=n=g,h):n},h.x0=function(g){return arguments.length?(e=g,h):e},h.x1=function(g){return arguments.length?(n=g,h):n},h.y=function(g){return arguments.length?(r=i=g,h):i},h.y0=function(g){return arguments.length?(r=g,h):r},h.y1=function(g){return arguments.length?(i=g,h):i},h.defined=function(g){return arguments.length?(a=g,h):a},h.interpolate=function(g){return arguments.length?(typeof g=="function"?u=o=g:u=(o=ca.get(g)||Zt).key,l=o.reverse||o,s=o.closed?"M":"L",h):u},h.tension=function(g){return arguments.length?(c=g,h):c},h}fa.reverse=ha,ha.reverse=fa,f.svg.area=function(){return tl(ct)},f.svg.area.radial=function(){var t=tl(Qo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},f.svg.chord=function(){var t=Ui,e=Yi,n=Mf,r=jo,i=Go;function a(c,h){var g=o(this,t,c,h),m=o(this,e,c,h);return"M"+g.p0+l(g.r,g.p1,g.a1-g.a0)+(u(g,m)?s(g.r,g.p1,g.r,g.p0):s(g.r,g.p1,m.r,m.p0)+l(m.r,m.p1,m.a1-m.a0)+s(m.r,m.p1,g.r,g.p0))+"Z"}function o(c,h,g,m){var b=h.call(c,g,m),d=n.call(c,b,m),p=r.call(c,b,m)-gt,y=i.call(c,b,m)-gt;return{r:d,a0:p,a1:y,p0:[d*Math.cos(p),d*Math.sin(p)],p1:[d*Math.cos(y),d*Math.sin(y)]}}function u(c,h){return c.a0==h.a0&&c.a1==h.a1}function l(c,h,g){return"A"+c+","+c+" 0 "+ +(g>tt)+",1 "+h}function s(c,h,g,m){return"Q 0,0 "+m}return a.radius=function(c){return arguments.length?(n=ut(c),a):n},a.source=function(c){return arguments.length?(t=ut(c),a):t},a.target=function(c){return arguments.length?(e=ut(c),a):e},a.startAngle=function(c){return arguments.length?(r=ut(c),a):r},a.endAngle=function(c){return arguments.length?(i=ut(c),a):i},a};function Mf(t){return t.radius}f.svg.diagonal=function(){var t=Ui,e=Yi,n=el;function r(i,a){var o=t.call(this,i,a),u=e.call(this,i,a),l=(o.y+u.y)/2,s=[o,{x:o.x,y:l},{x:u.x,y:l},u];return s=s.map(n),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}return r.source=function(i){return arguments.length?(t=ut(i),r):t},r.target=function(i){return arguments.length?(e=ut(i),r):e},r.projection=function(i){return arguments.length?(n=i,r):n},r};function el(t){return[t.x,t.y]}f.svg.diagonal.radial=function(){var t=f.svg.diagonal(),e=el,n=t.projection;return t.projection=function(r){return arguments.length?n(bf(e=r)):e},t};function bf(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-gt;return[n*Math.cos(r),n*Math.sin(r)]}}f.svg.symbol=function(){var t=Sf,e=wf;function n(r,i){return(rl.get(t.call(this,r,i))||nl)(e.call(this,r,i))}return n.type=function(r){return arguments.length?(t=ut(r),n):t},n.size=function(r){return arguments.length?(e=ut(r),n):e},n};function wf(){return 64}function Sf(){return"circle"}function nl(t){var e=Math.sqrt(t/tt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}var rl=f.map({circle:nl,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*il)),n=e*il;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Rr),n=e*Rr/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Rr),n=e*Rr/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});f.svg.symbolTypes=rl.keys();var Rr=Math.sqrt(3),il=Math.tan(30*Q);it.transition=function(t){for(var e=Oe||++ul,n=ya(t),r=[],i,a,o=Cr||{time:Date.now(),ease:tc,delay:0,duration:250},u=-1,l=this.length;++u<l;){r.push(i=[]);for(var s=this[u],c=-1,h=s.length;++c<h;)(a=s[c])&&Ir(a,c,n,e,o),i.push(a)}return kn(r,n,e)},it.interrupt=function(t){return this.each(t==null?Pr:al(ya(t)))};var Pr=al(ya());function al(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function kn(t,e,n){return Fn(t,mt),t.namespace=e,t.id=n,t}var mt=[],ul=0,Oe,Cr;mt.call=it.call,mt.empty=it.empty,mt.node=it.node,mt.size=it.size,f.transition=function(t,e){return t&&t.transition?Oe?t.transition(e):t:f.selection().transition(t)},f.transition.prototype=mt,mt.select=function(t){var e=this.id,n=this.namespace,r=[],i,a,o;t=si(t);for(var u=-1,l=this.length;++u<l;){r.push(i=[]);for(var s=this[u],c=-1,h=s.length;++c<h;)(o=s[c])&&(a=t.call(o,o.__data__,c,u))?("__data__"in o&&(a.__data__=o.__data__),Ir(a,c,n,e,o[n][e]),i.push(a)):i.push(null)}return kn(r,n,e)},mt.selectAll=function(t){var e=this.id,n=this.namespace,r=[],i,a,o,u,l;t=Pa(t);for(var s=-1,c=this.length;++s<c;)for(var h=this[s],g=-1,m=h.length;++g<m;)if(o=h[g]){l=o[n][e],a=t.call(o,o.__data__,g,s),r.push(i=[]);for(var b=-1,d=a.length;++b<d;)(u=a[b])&&Ir(u,b,n,e,l),i.push(u)}return kn(r,n,e)},mt.filter=function(t){var e=[],n,r,i;typeof t!="function"&&(t=Ya(t));for(var a=0,o=this.length;a<o;a++){e.push(n=[]);for(var r=this[a],u=0,l=r.length;u<l;u++)(i=r[u])&&t.call(i,i.__data__,u,a)&&n.push(i)}return kn(e,this.namespace,this.id)},mt.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):le(this,e==null?function(i){i[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})};function va(t,e,n,r){var i=t.id,a=t.namespace;return le(t,typeof n=="function"?function(o,u,l){o[a][i].tween.set(e,r(n.call(o,o.__data__,u,l)))}:(n=r(n),function(o){o[a][i].tween.set(e,n)}))}mt.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n=t=="transform"?Mo:Ie,r=f.ns.qualify(t);function i(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}function o(l){return l==null?i:(l+="",function(){var s=this.getAttribute(r),c;return s!==l&&(c=n(s,l),function(h){this.setAttribute(r,c(h))})})}function u(l){return l==null?a:(l+="",function(){var s=this.getAttributeNS(r.space,r.local),c;return s!==l&&(c=n(s,l),function(h){this.setAttributeNS(r.space,r.local,c(h))})})}return va(this,"attr."+t,e,r.local?u:o)},mt.attrTween=function(t,e){var n=f.ns.qualify(t);function r(a,o){var u=e.call(this,a,o,this.getAttribute(n));return u&&function(l){this.setAttribute(n,u(l))}}function i(a,o){var u=e.call(this,a,o,this.getAttributeNS(n.space,n.local));return u&&function(l){this.setAttributeNS(n.space,n.local,u(l))}}return this.tween("attr."+t,n.local?i:r)},mt.style=function(t,e,n){var r=arguments.length;if(r<3){if(typeof t!="string"){r<2&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function a(o){return o==null?i:(o+="",function(){var u=E(this).getComputedStyle(this,null).getPropertyValue(t),l;return u!==o&&(l=Ie(u,o),function(s){this.style.setProperty(t,l(s),n)})})}return va(this,"style."+t,e,a)},mt.styleTween=function(t,e,n){arguments.length<3&&(n="");function r(i,a){var o=e.call(this,i,a,E(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(u){this.style.setProperty(t,o(u),n)}}return this.tween("style."+t,r)},mt.text=function(t){return va(this,"text",t,Ef)};function Ef(t){return t==null&&(t=""),function(){this.textContent=t}}mt.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},mt.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:(typeof t!="function"&&(t=f.ease.apply(f,arguments)),le(this,function(r){r[n][e].ease=t}))},mt.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:le(this,typeof t=="function"?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},mt.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:le(this,typeof t=="function"?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},mt.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Cr,a=Oe;try{Oe=n,le(this,function(o,u,l){Cr=o[r][n],t.call(o,o.__data__,u,l)})}finally{Cr=i,Oe=a}}else le(this,function(o){var u=o[r][n];(u.event||(u.event=f.dispatch("start","end","interrupt"))).on(t,e)});return this},mt.transition=function(){for(var t=this.id,e=++ul,n=this.namespace,r=[],i,a,o,u,l=0,s=this.length;l<s;l++){r.push(i=[]);for(var a=this[l],c=0,h=a.length;c<h;c++)(o=a[c])&&(u=o[n][t],Ir(o,c,n,e,{time:u.time,ease:u.ease,delay:u.delay+u.duration,duration:u.duration})),i.push(o)}return kn(r,n,e)};function ya(t){return t==null?"__transition__":"__transition_"+t+"__"}function Ir(t,e,n,r,i){var a=t[n]||(t[n]={active:0,count:0}),o=a[r],u,l,s,c,h;function g(d){var p=o.delay;if(l.t=p+u,p<=d)return m(d-p);l.c=m}function m(d){var p=a.active,y=a[p];y&&(y.timer.c=null,y.timer.t=NaN,--a.count,delete a[p],y.event&&y.event.interrupt.call(t,t.__data__,y.index));for(var M in a)if(+M<r){var _=a[M];_.timer.c=null,_.timer.t=NaN,--a.count,delete a[M]}l.c=b,Qn(function(){return l.c&&b(d||1)&&(l.c=null,l.t=NaN),1},0,u),a.active=r,o.event&&o.event.start.call(t,t.__data__,e),h=[],o.tween.forEach(function(x,D){(D=D.call(t,t.__data__,e))&&h.push(D)}),c=o.ease,s=o.duration}function b(d){for(var p=d/s,y=c(p),M=h.length;M>0;)h[--M].call(t,y);if(p>=1)return o.event&&o.event.end.call(t,t.__data__,e),--a.count?delete a[r]:delete t[n],1}o||(u=i.time,l=Qn(g,0,u),o=a[r]={tween:new Yt,time:u,timer:l,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++a.count)}f.svg.axis=function(){var t=f.scale.linear(),e=ol,n=6,r=6,i=3,a=[10],o=null,u;function l(s){s.each(function(){var c=f.select(this),h=this.__chart__||t,g=this.__chart__=t.copy(),m=o??(g.ticks?g.ticks.apply(g,a):g.domain()),b=u??(g.tickFormat?g.tickFormat.apply(g,a):ct),d=c.selectAll(".tick").data(m,g),p=d.enter().insert("g",".domain").attr("class","tick").style("opacity",j),y=f.transition(d.exit()).style("opacity",j).remove(),M=f.transition(d.order()).style("opacity",1),_=Math.max(n,0)+i,x,D=Er(g),N=c.selectAll(".domain").data([0]),A=(N.enter().append("path").attr("class","domain"),f.transition(N));p.append("line"),p.append("text");var k=p.select("line"),P=M.select("line"),I=d.select("text").text(b),X=p.select("text"),B=M.select("text"),$=e==="top"||e==="left"?-1:1,T,C,H,R;if(e==="bottom"||e==="top"?(x=Nf,T="x",H="y",C="x2",R="y2",I.attr("dy",$<0?"0em":".71em").style("text-anchor","middle"),A.attr("d","M"+D[0]+","+$*r+"V0H"+D[1]+"V"+$*r)):(x=Af,T="y",H="x",C="y2",R="x2",I.attr("dy",".32em").style("text-anchor",$<0?"end":"start"),A.attr("d","M"+$*r+","+D[0]+"H0V"+D[1]+"H"+$*r)),k.attr(R,$*n),X.attr(H,$*_),P.attr(C,0).attr(R,$*n),B.attr(T,0).attr(H,$*_),g.rangeBand){var q=g,G=q.rangeBand()/2;h=g=function(J){return q(J)+G}}else h.rangeBand?h=g:y.call(x,g,h);p.call(x,h,g),M.call(x,g,g)})}return l.scale=function(s){return arguments.length?(t=s,l):t},l.orient=function(s){return arguments.length?(e=s in kf?s+"":ol,l):e},l.ticks=function(){return arguments.length?(a=w(arguments),l):a},l.tickValues=function(s){return arguments.length?(o=s,l):o},l.tickFormat=function(s){return arguments.length?(u=s,l):u},l.tickSize=function(s){var c=arguments.length;return c?(n=+s,r=+arguments[c-1],l):n},l.innerTickSize=function(s){return arguments.length?(n=+s,l):n},l.outerTickSize=function(s){return arguments.length?(r=+s,l):r},l.tickPadding=function(s){return arguments.length?(i=+s,l):i},l.tickSubdivide=function(){return arguments.length&&l},l};var ol="bottom",kf={top:1,right:1,bottom:1,left:1};function Nf(t,e,n){t.attr("transform",function(r){var i=e(r);return"translate("+(isFinite(i)?i:n(r))+",0)"})}function Af(t,e,n){t.attr("transform",function(r){var i=e(r);return"translate(0,"+(isFinite(i)?i:n(r))+")"})}f.svg.brush=function(){var t=ui(c,"brushstart","brush","brushend"),e=null,n=null,r=[0,0],i=[0,0],a,o,u=!0,l=!0,s=_a[0];function c(d){d.each(function(){var p=f.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",b).on("touchstart.brush",b),y=p.selectAll(".background").data([0]);y.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),p.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var M=p.selectAll(".resize").data(s,ct);M.exit().remove(),M.enter().append("g").attr("class",function(N){return"resize "+N}).style("cursor",function(N){return Df[N]}).append("rect").attr("x",function(N){return/[ew]$/.test(N)?-3:null}).attr("y",function(N){return/^[ns]/.test(N)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),M.style("display",c.empty()?"none":null);var _=f.transition(p),x=f.transition(y),D;e&&(D=Er(e),x.attr("x",D[0]).attr("width",D[1]-D[0]),g(_)),n&&(D=Er(n),x.attr("y",D[0]).attr("height",D[1]-D[0]),m(_)),h(_)})}c.event=function(d){d.each(function(){var p=t.of(this,arguments),y={x:r,y:i,i:a,j:o},M=this.__chart__||y;this.__chart__=y,Oe?f.select(this).transition().each("start.brush",function(){a=M.i,o=M.j,r=M.x,i=M.y,p({type:"brushstart"})}).tween("brush:brush",function(){var _=Sr(r,y.x),x=Sr(i,y.y);return a=o=null,function(D){r=y.x=_(D),i=y.y=x(D),p({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=y.i,o=y.j,p({type:"brush",mode:"resize"}),p({type:"brushend"})}):(p({type:"brushstart"}),p({type:"brush",mode:"resize"}),p({type:"brushend"}))})};function h(d){d.selectAll(".resize").attr("transform",function(p){return"translate("+r[+/e$/.test(p)]+","+i[+/^s/.test(p)]+")"})}function g(d){d.select(".extent").attr("x",r[0]),d.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function m(d){d.select(".extent").attr("y",i[0]),d.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function b(){var d=this,p=f.select(f.event.target),y=t.of(d,arguments),M=f.select(d),_=p.datum(),x=!/^(n|s)$/.test(_)&&e,D=!/^(e|w)$/.test(_)&&n,N=p.classed("extent"),A=Bn(d),k,P=f.mouse(d),I,X=f.select(E(d)).on("keydown.brush",T).on("keyup.brush",C);if(f.event.changedTouches?X.on("touchmove.brush",H).on("touchend.brush",q):X.on("mousemove.brush",H).on("mouseup.brush",q),M.interrupt().selectAll("*").interrupt(),N)P[0]=r[0]-P[0],P[1]=i[0]-P[1];else if(_){var B=+/w$/.test(_),$=+/^n/.test(_);I=[r[1-B]-P[0],i[1-$]-P[1]],P[0]=r[B],P[1]=i[$]}else f.event.altKey&&(k=P.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),f.select("body").style("cursor",p.style("cursor")),y({type:"brushstart"}),H();function T(){f.event.keyCode==32&&(N||(k=null,P[0]-=r[1],P[1]-=i[1],N=2),pe())}function C(){f.event.keyCode==32&&N==2&&(P[0]+=r[1],P[1]+=i[1],N=0,pe())}function H(){var G=f.mouse(d),J=!1;I&&(G[0]+=I[0],G[1]+=I[1]),N||(f.event.altKey?(k||(k=[(r[0]+r[1])/2,(i[0]+i[1])/2]),P[0]=r[+(G[0]<k[0])],P[1]=i[+(G[1]<k[1])]):k=null),x&&R(G,e,0)&&(g(M),J=!0),D&&R(G,n,1)&&(m(M),J=!0),J&&(h(M),y({type:"brush",mode:N?"move":"resize"}))}function R(G,J,nt){var at=Er(J),ot=at[0],kt=at[1],Lt=P[nt],Nt=nt?i:r,Tt=Nt[1]-Nt[0],bt,Rt;if(N&&(ot-=Lt,kt-=Tt+Lt),bt=(nt?l:u)?Math.max(ot,Math.min(kt,G[nt])):G[nt],N?Rt=(bt+=Lt)+Tt:(k&&(Lt=Math.max(ot,Math.min(kt,2*k[nt]-bt))),Lt<bt?(Rt=bt,bt=Lt):Rt=Lt),Nt[0]!=bt||Nt[1]!=Rt)return nt?o=null:a=null,Nt[0]=bt,Nt[1]=Rt,!0}function q(){H(),M.style("pointer-events","all").selectAll(".resize").style("display",c.empty()?"none":null),f.select("body").style("cursor",null),X.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),y({type:"brushend"})}}return c.x=function(d){return arguments.length?(e=d,s=_a[!e<<1|!n],c):e},c.y=function(d){return arguments.length?(n=d,s=_a[!e<<1|!n],c):n},c.clamp=function(d){return arguments.length?(e&&n?(u=!!d[0],l=!!d[1]):e?u=!!d:n&&(l=!!d),c):e&&n?[u,l]:e?u:n?l:null},c.extent=function(d){var p,y,M,_,x;return arguments.length?(e&&(p=d[0],y=d[1],n&&(p=p[0],y=y[0]),a=[p,y],e.invert&&(p=e(p),y=e(y)),y<p&&(x=p,p=y,y=x),(p!=r[0]||y!=r[1])&&(r=[p,y])),n&&(M=d[0],_=d[1],e&&(M=M[1],_=_[1]),o=[M,_],n.invert&&(M=n(M),_=n(_)),_<M&&(x=M,M=_,_=x),(M!=i[0]||_!=i[1])&&(i=[M,_])),c):(e&&(a?(p=a[0],y=a[1]):(p=r[0],y=r[1],e.invert&&(p=e.invert(p),y=e.invert(y)),y<p&&(x=p,p=y,y=x))),n&&(o?(M=o[0],_=o[1]):(M=i[0],_=i[1],n.invert&&(M=n.invert(M),_=n.invert(_)),_<M&&(x=M,M=_,_=x))),e&&n?[[p,M],[y,_]]:e?[p,y]:n&&[M,_])},c.clear=function(){return c.empty()||(r=[0,0],i=[0,0],a=o=null),c},c.empty=function(){return!!e&&r[0]==r[1]||!!n&&i[0]==i[1]},f.rebind(c,t,"on")};var Df={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_a=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],xa=W.format=mu.timeFormat,ll=xa.utc,sl=ll("%Y-%m-%dT%H:%M:%S.%LZ");xa.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ma:sl;function Ma(t){return t.toISOString()}Ma.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ma.toString=sl.toString,W.second=De(function(t){return new Mt(Math.floor(t/1e3)*1e3)},function(t,e){t.setTime(t.getTime()+Math.floor(e)*1e3)},function(t){return t.getSeconds()}),W.seconds=W.second.range,W.seconds.utc=W.second.utc.range,W.minute=De(function(t){return new Mt(Math.floor(t/6e4)*6e4)},function(t,e){t.setTime(t.getTime()+Math.floor(e)*6e4)},function(t){return t.getMinutes()}),W.minutes=W.minute.range,W.minutes.utc=W.minute.utc.range,W.hour=De(function(t){var e=t.getTimezoneOffset()/60;return new Mt((Math.floor(t/36e5-e)+e)*36e5)},function(t,e){t.setTime(t.getTime()+Math.floor(e)*36e5)},function(t){return t.getHours()}),W.hours=W.hour.range,W.hours.utc=W.hour.utc.range,W.month=De(function(t){return t=W.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),W.months=W.month.range,W.months.utc=W.month.utc.range;function ba(t,e,n){function r(a){return t(a)}r.invert=function(a){return qe(t.invert(a))},r.domain=function(a){return arguments.length?(t.domain(a),r):t.domain().map(qe)};function i(a,o){var u=a[1]-a[0],l=u/o,s=f.bisect(Or,l);return s==Or.length?[e.year,nn(a.map(function(c){return c/31536e6}),o)[2]]:s?e[l/Or[s-1]<Or[s]/l?s-1:s]:[zf,nn(a,o)[2]]}return r.nice=function(a,o){var u=r.domain(),l=en(u),s=a==null?i(l,10):typeof a=="number"&&i(l,a);s&&(a=s[0],o=s[1]);function c(h){return!isNaN(h)&&!a.range(h,qe(+h+1),o).length}return r.domain(kr(u,o>1?{floor:function(h){for(;c(h=a.floor(h));)h=qe(h-1);return h},ceil:function(h){for(;c(h=a.ceil(h));)h=qe(+h+1);return h}}:a))},r.ticks=function(a,o){var u=en(r.domain()),l=a==null?i(u,10):typeof a=="number"?i(u,a):!a.range&&[{range:a},o];return l&&(a=l[0],o=l[1]),a.range(u[0],qe(+u[1]+1),o<1?1:o)},r.tickFormat=function(){return n},r.copy=function(){return ba(t.copy(),e,n)},oa(r,t)}function qe(t){return new Date(t)}var Or=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],wa=[[W.second,1],[W.second,5],[W.second,15],[W.second,30],[W.minute,1],[W.minute,5],[W.minute,15],[W.minute,30],[W.hour,1],[W.hour,3],[W.hour,6],[W.hour,12],[W.day,1],[W.day,2],[W.week,1],[W.month,1],[W.month,3],[W.year,1]],Lf=xa.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&t.getDate()!=1}],["%b %d",function(t){return t.getDate()!=1}],["%B",function(t){return t.getMonth()}],["%Y",pn]]),zf={range:function(t,e,n){return f.range(Math.ceil(t/n)*n,+e,n).map(qe)},floor:ct,ceil:ct};wa.year=W.year,W.scale=function(){return ba(f.scale.linear(),wa,Lf)};var cl=wa.map(function(t){return[t[0].utc,t[1]]}),Tf=ll.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&t.getUTCDate()!=1}],["%b %d",function(t){return t.getUTCDate()!=1}],["%B",function(t){return t.getUTCMonth()}],["%Y",pn]]);cl.year=W.year.utc,W.scale.utc=function(){return ba(f.scale.linear(),cl,Tf)},f.text=Di(function(t){return t.responseText}),f.json=function(t,e){return Wn(t,"application/json",Rf,e)};function Rf(t){return JSON.parse(t.responseText)}f.html=function(t,e){return Wn(t,"text/html",Pf,e)};function Pf(t){var e=S.createRange();return e.selectNode(S.body),e.createContextualFragment(t.responseText)}f.xml=Di(function(t){return t.responseXML}),typeof define=="function"&&define.amd?(this.d3=f,define(f)):typeof Hr=="object"&&Hr.exports?Hr.exports=f:this.d3=f})()});var Sa=class{id;inputLinks=[];bias=.1;outputs=[];totalInput;output;outputDer=0;inputDer=0;accInputDer=0;numAccumulatedDers=0;activation;constructor(v,w,S){this.id=v,this.activation=w,S&&(this.bias=0)}updateOutput(){this.totalInput=this.bias;for(let v=0;v<this.inputLinks.length;v++){let w=this.inputLinks[v];this.totalInput+=w.weight*w.source.output}return this.output=this.activation.output(this.totalInput),this.output}},An=class{static SQUARE={error:(v,w)=>.5*Math.pow(v-w,2),der:(v,w)=>v-w}};Math.tanh=Math.tanh||function(f){if(f===1/0)return 1;if(f===-1/0)return-1;{let v=Math.exp(2*f);return(v-1)/(v+1)}};var Jt=class f{static TANH={output:v=>Math.tanh(v),der:v=>{let w=f.TANH.output(v);return 1-w*w}};static RELU={output:v=>Math.max(0,v),der:v=>v<=0?0:1};static SIGMOID={output:v=>1/(1+Math.exp(-v)),der:v=>{let w=f.SIGMOID.output(v);return w*(1-w)}};static LINEAR={output:v=>v,der:v=>1}},an=class{static L1={output:v=>Math.abs(v),der:v=>v<0?-1:v>0?1:0};static L2={output:v=>.5*v*v,der:v=>v}},Ea=class{id;source;dest;weight=Math.random()-.5;isDead=!1;errorDer=0;accErrorDer=0;numAccumulatedDers=0;regularization;constructor(v,w,S,L){this.id=v.id+"-"+w.id,this.source=v,this.dest=w,this.regularization=S,L&&(this.weight=0)}};function gl(f,v,w,S,L,E){let z=f.length,O=1,F=[];for(let Z=0;Z<z;Z++){let K=Z===z-1,et=Z===0,rt=[];F.push(rt);let lt=f[Z];for(let vt=0;vt<lt;vt++){let xt=O.toString();et?xt=L[vt]:O++;let Et=new Sa(xt,K?w:v,E);if(rt.push(Et),Z>=1)for(let V=0;V<F[Z-1].length;V++){let Qt=F[Z-1][V],It=new Ea(Qt,Et,S,E);Qt.outputs.push(It),Et.inputLinks.push(It)}}}return F}function Fr(f,v){let w=f[0];if(v.length!==w.length)throw new Error("The number of inputs must match the number of nodes in the input layer");for(let S=0;S<w.length;S++){let L=w[S];L.output=v[S]}for(let S=1;S<f.length;S++){let L=f[S];for(let E=0;E<L.length;E++)L[E].updateOutput()}return f[f.length-1][0].output}function dl(f,v,w){let S=f[f.length-1][0];S.outputDer=w.der(S.output,v);for(let L=f.length-1;L>=1;L--){let E=f[L];for(let O=0;O<E.length;O++){let F=E[O];F.inputDer=F.outputDer*F.activation.der(F.totalInput),F.accInputDer+=F.inputDer,F.numAccumulatedDers++}for(let O=0;O<E.length;O++){let F=E[O];for(let Z=0;Z<F.inputLinks.length;Z++){let K=F.inputLinks[Z];K.isDead||(K.errorDer=F.inputDer*K.source.output,K.accErrorDer+=K.errorDer,K.numAccumulatedDers++)}}if(L===1)continue;let z=f[L-1];for(let O=0;O<z.length;O++){let F=z[O];F.outputDer=0;for(let Z=0;Z<F.outputs.length;Z++){let K=F.outputs[Z];F.outputDer+=K.weight*K.dest.inputDer}}}}function pl(f,v,w){for(let S=1;S<f.length;S++){let L=f[S];for(let E=0;E<L.length;E++){let z=L[E];z.numAccumulatedDers>0&&(z.bias-=v*z.accInputDer/z.numAccumulatedDers,z.accInputDer=0,z.numAccumulatedDers=0);for(let O=0;O<z.inputLinks.length;O++){let F=z.inputLinks[O];if(F.isDead)continue;let Z=F.regularization?F.regularization.der(F.weight):0;if(F.numAccumulatedDers>0){F.weight=F.weight-v/F.numAccumulatedDers*F.accErrorDer;let K=F.weight-v*w*Z;F.regularization===an.L1&&F.weight*K<0?(F.weight=0,F.isDead=!0):F.weight=K,F.accErrorDer=0,F.numAccumulatedDers=0}}}}}function Dn(f,v,w){for(let S=v?1:0;S<f.length;S++){let L=f[S];for(let E=0;E<L.length;E++){let z=L[E];w(z)}}}function ka(f){return f[f.length-1][0]}var Bt=Nn(un()),Yf=30,Br=class{settings={showAxes:!1,noSvg:!1};xScale;yScale;numSamples;color;canvas;svg;constructor(v,w,S,L,E,z){this.numSamples=w;let O=v,F=z.showAxes?20:0;if(z!=null)for(let et in z)this.settings[et]=z[et];this.xScale=Bt.scale.linear().domain(S).range([0,v-2*F]),this.yScale=Bt.scale.linear().domain(L).range([O-2*F,0]);let Z=Bt.scale.linear().domain([0,.5,1]).range(["#f59322","#e8eaeb","#0877bd"]).clamp(!0),K=Bt.range(0,1+1e-9,1/Yf).map(et=>Z(et));if(this.color=Bt.scale.quantize().domain([-1,1]).range(K),E=E.append("div").style({width:`${v}px`,height:`${O}px`,position:"relative",top:`-${F}px`,left:`-${F}px`}),this.canvas=E.append("canvas").attr("width",w).attr("height",w).style("width",v-2*F+"px").style("height",O-2*F+"px").style("position","absolute").style("top",`${F}px`).style("left",`${F}px`),this.settings.noSvg||(this.svg=E.append("svg").attr({width:v,height:O}).style({position:"absolute",left:"0",top:"0"}).append("g").attr("transform",`translate(${F},${F})`),this.svg.append("g").attr("class","train"),this.svg.append("g").attr("class","test")),this.settings.showAxes){let et=Bt.svg.axis().scale(this.xScale).orient("bottom"),rt=Bt.svg.axis().scale(this.yScale).orient("right");this.svg.append("g").attr("class","x axis").attr("transform",`translate(0,${O-2*F})`).call(et),this.svg.append("g").attr("class","y axis").attr("transform","translate("+(v-2*F)+",0)").call(rt)}}updateTestPoints(v){if(this.settings.noSvg)throw Error("Can't add points since noSvg=true");this.updateCircles(this.svg.select("g.test"),v)}updatePoints(v){if(this.settings.noSvg)throw Error("Can't add points since noSvg=true");this.updateCircles(this.svg.select("g.train"),v)}updateBackground(v,w){let S=v[0].length,L=v.length;if(S!==this.numSamples||L!==this.numSamples)throw new Error("The provided data matrix must be of size numSamples X numSamples");let E=this.canvas.node().getContext("2d"),z=E.createImageData(S,L);for(let O=0,F=-1;O<L;++O)for(let Z=0;Z<S;++Z){let K=v[Z][O];w&&(K=K>=0?1:-1);let et=Bt.rgb(this.color(K));z.data[++F]=et.r,z.data[++F]=et.g,z.data[++F]=et.b,z.data[++F]=160}E.putImageData(z,0,0)}updateCircles(v,w){let S=this.xScale.domain(),L=this.yScale.domain();w=w.filter(z=>z.x>=S[0]&&z.x<=S[1]&&z.y>=L[0]&&z.y<=L[1]);let E=v.selectAll("circle").data(w);E.enter().append("circle").attr("r",3),E.attr({cx:z=>this.xScale(z.x),cy:z=>this.yScale(z.y)}).style("fill",z=>this.color(z.label)),E.exit().remove()}};function vl(f,v){if(f.length!==f[0].length)throw new Error("The provided matrix must be a square matrix");if(f.length%v!==0)throw new Error("The width/height of the matrix must be divisible by the reduction factor");let w=new Array(f.length/v);for(let S=0;S<f.length;S+=v){w[S/v]=new Array(f.length/v);for(let L=0;L<f.length;L+=v){let E=0;for(let z=0;z<v;z++)for(let O=0;O<v;O++)E+=f[S+z][L+O];E/=v*v,w[S/v][L/v]=E}}return w}var Ln=Nn(un()),$f=.42,Xf=.22,jf=2.6,Gf=2,Ur=class{width;height;numSamples;xDomain;yDomain;canvas;context;devicePixelRatio;color;surfaceData=null;discretize=!1;trainPoints=[];testPoints=[];zMin=-1;zMax=1;azimuth=-Math.PI/4;elevation=Math.PI/5;dragging=!1;dragX=0;dragY=0;scale;constructor(v,w,S,L,E){this.width=v,this.height=v,this.numSamples=w,this.xDomain=S,this.yDomain=L,this.scale=v*.34,this.color=Ln.scale.linear().domain([-1,0,1]).range(["#f59322","#e8eaeb","#0877bd"]).clamp(!0);let z=E.append("div").attr("class","surface-3d").style({width:`${v}px`,height:`${this.height}px`,position:"relative"});this.canvas=z.append("canvas").style("width",`${v}px`).style("height",`${this.height}px`),this.devicePixelRatio=Math.max(1,window.devicePixelRatio||1);let O=this.canvas.node();O.width=Math.floor(v*this.devicePixelRatio),O.height=Math.floor(this.height*this.devicePixelRatio),this.context=O.getContext("2d"),this.context.setTransform(this.devicePixelRatio,0,0,this.devicePixelRatio,0,0),this.attachInteraction(O),this.render()}updatePoints(v){this.trainPoints=this.filterPointsInDomain(v),this.updateZRange(),this.render()}updateTestPoints(v){this.testPoints=this.filterPointsInDomain(v),this.updateZRange(),this.render()}updateBackground(v,w){let S=v[0].length,L=v.length;if(S!==this.numSamples||L!==this.numSamples)throw new Error("The provided data matrix must be of size numSamples X numSamples");this.surfaceData=v,this.discretize=w,this.updateZRange(),this.render()}attachInteraction(v){v.addEventListener("mousedown",w=>{this.dragging=!0,this.dragX=w.clientX,this.dragY=w.clientY}),window.addEventListener("mouseup",()=>{this.dragging=!1}),window.addEventListener("mousemove",w=>{if(!this.dragging)return;let S=w.clientX-this.dragX,L=w.clientY-this.dragY;this.dragX=w.clientX,this.dragY=w.clientY,this.azimuth+=S*.01,this.elevation-=L*.01,this.elevation=Math.max(.15,Math.min(1.3,this.elevation)),this.render()})}render(){if(this.context==null)return;let v=this.context;if(v.clearRect(0,0,this.width,this.height),v.fillStyle="#f7f7f7",v.fillRect(0,0,this.width,this.height),this.surfaceData==null){this.drawAxes();return}this.drawSurface(),this.drawAxes(),this.drawPoints(this.trainPoints,!1),this.drawPoints(this.testPoints,!0),v.fillStyle="rgba(70, 70, 70, 0.75)",v.font="11px Helvetica, Arial, sans-serif",v.fillText("Drag to rotate",8,this.height-10)}drawSurface(){let v=[],w=Math.max(1,Gf);for(let L=0;L<this.numSamples-w;L+=w)for(let E=0;E<this.numSamples-w;E+=w){let z=this.toDisplayValue(this.surfaceData[L][E]),O=this.toDisplayValue(this.surfaceData[L+w][E]),F=this.toDisplayValue(this.surfaceData[L+w][E+w]),Z=this.toDisplayValue(this.surfaceData[L][E+w]),K=(z+O+F+Z)/4,et=this.gridPoint(L,E,z),rt=this.gridPoint(L+w,E,O),lt=this.gridPoint(L+w,E+w,F),vt=this.gridPoint(L,E+w,Z),xt=(et.depth+rt.depth+lt.depth+vt.depth)/4;v.push({points:[et,rt,lt,vt],depth:xt,value:K})}v.sort((L,E)=>L.depth-E.depth);let S=this.context;for(let L=0;L<v.length;L++){let E=v[L],z=Ln.rgb(this.color(this.normalizeZ(E.value)));S.beginPath(),S.moveTo(E.points[0].x,E.points[0].y),S.lineTo(E.points[1].x,E.points[1].y),S.lineTo(E.points[2].x,E.points[2].y),S.lineTo(E.points[3].x,E.points[3].y),S.closePath(),S.fillStyle=`rgba(${z.r}, ${z.g}, ${z.b}, ${$f})`,S.fill(),S.strokeStyle=`rgba(255, 255, 255, ${Xf})`,S.lineWidth=.7,S.stroke()}}drawAxes(){let v=this.project(-1,-1,-1),w=this.project(1.1,-1,-1),S=this.project(-1,1.1,-1),L=this.project(-1,-1,1.15),E=this.context;this.drawAxisLine(v,w,"#666"),this.drawAxisLine(v,S,"#666"),this.drawAxisLine(v,L,"#555"),E.fillStyle="#333",E.font="12px Helvetica, Arial, sans-serif",E.fillText("x1",w.x+4,w.y+2),E.fillText("x2",S.x-14,S.y+2),E.fillText("y",L.x+5,L.y-2)}drawAxisLine(v,w,S){let L=this.context;L.beginPath(),L.moveTo(v.x,v.y),L.lineTo(w.x,w.y),L.strokeStyle=S,L.lineWidth=1.4,L.stroke()}drawPoints(v,w){let S=this.context;for(let L=0;L<v.length;L++){let E=v[L],z=this.toDisplayValue(E.label),O=this.project(this.normalizeAxis(E.x,this.xDomain),this.normalizeAxis(E.y,this.yDomain),this.normalizeZ(z)),F=Ln.rgb(this.color(this.normalizeZ(z)));S.beginPath(),S.arc(O.x,O.y,jf,0,Math.PI*2),w?(S.fillStyle="rgba(255, 255, 255, 0.95)",S.fill(),S.strokeStyle=`rgba(${F.r}, ${F.g}, ${F.b}, 1)`,S.lineWidth=1.3,S.stroke()):(S.fillStyle=`rgba(${F.r}, ${F.g}, ${F.b}, 0.95)`,S.fill(),S.strokeStyle="rgba(20, 20, 20, 0.55)",S.lineWidth=.7,S.stroke())}}gridPoint(v,w,S){let L=v/(this.numSamples-1),E=w/(this.numSamples-1),z=this.xDomain[0]+L*(this.xDomain[1]-this.xDomain[0]),O=this.yDomain[1]-E*(this.yDomain[1]-this.yDomain[0]);return this.project(this.normalizeAxis(z,this.xDomain),this.normalizeAxis(O,this.yDomain),this.normalizeZ(S))}normalizeAxis(v,w){let S=w[0],L=w[1];return L===S?0:(v-S)/(L-S)*2-1}normalizeZ(v){let w=this.zMin,S=this.zMax;return S===w?0:(Math.max(w,Math.min(S,v))-w)/(S-w)*2-1}project(v,w,S){let L=Math.cos(this.azimuth),E=Math.sin(this.azimuth),z=v*L-w*E,O=v*E+w*L,F=Math.cos(this.elevation),Z=Math.sin(this.elevation),K=O*F-S*Z,et=O*Z+S*F,rt=4,lt=rt/(rt-et);return{x:this.width*.5+z*this.scale*lt,y:this.height*.62-K*this.scale*lt,depth:et}}toDisplayValue(v){return this.discretize?v>=0?1:-1:v}updateZRange(){if(this.surfaceData==null)return;let v=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY;for(let E=0;E<this.surfaceData.length;E++)for(let z=0;z<this.surfaceData[E].length;z++){let O=this.toDisplayValue(this.surfaceData[E][z]);v=Math.min(v,O),w=Math.max(w,O)}let S=this.trainPoints.concat(this.testPoints);for(let E=0;E<S.length;E++){let z=this.toDisplayValue(S[E].label);v=Math.min(v,z),w=Math.max(w,z)}(!isFinite(v)||!isFinite(w))&&(v=-1,w=1),Math.abs(w-v)<1e-6&&(v-=1,w+=1);let L=(w-v)*.08;this.zMin=v-L,this.zMax=w+L}filterPointsInDomain(v){let w=this.xDomain[0],S=this.xDomain[1],L=this.yDomain[0],E=this.yDomain[1];return v.filter(z=>z.x>=w&&z.x<=S&&z.y>=L&&z.y<=E)}};var Yr=Nn(un());function _l(f){let v=f.length,w=0,S=0;for(;v>0;)S=Math.floor(Math.random()*v),v--,w=f[v],f[v]=f[S],f[S]=w}function xl(f,v){let w=[],L=Yr.scale.linear().domain([0,.5]).range([.5,4])(v);function E(z,O,F){for(let Z=0;Z<f/2;Z++){let K=yl(z,L),et=yl(O,L);w.push({x:K,y:et,label:F})}}return E(2,2,1),E(-2,-2,-1),w}function Na(f,v){let w=6,S=Yr.scale.linear().domain([-10,10]).range([-1,1]),L=(z,O)=>S(z+O),E=[];for(let z=0;z<f;z++){let O=pt(-w,w),F=pt(-w,w),Z=pt(-w,w)*v,K=pt(-w,w)*v,et=L(O+Z,F+K);E.push({x:O,y:F,label:et})}return E}function Ml(f,v){let w=[],S=Yr.scale.linear().domain([0,2]).range([1,0]).clamp(!0),L=[[-4,2.5,1],[0,2.5,-1],[4,2.5,1],[-4,-2.5,-1],[0,-2.5,1],[4,-2.5,-1]];function E(O,F){let Z=0;return L.forEach(([K,et,rt])=>{let lt=rt*S(Sl({x:O,y:F},{x:K,y:et}));Math.abs(lt)>Math.abs(Z)&&(Z=lt)}),Z}let z=6;for(let O=0;O<f;O++){let F=pt(-z,z),Z=pt(-z,z),K=pt(-z,z)*v,et=pt(-z,z)*v,rt=E(F+K,Z+et);w.push({x:F,y:Z,label:rt})}return w}function bl(f,v){let w=[],S=f/2;function L(E,z){for(let O=0;O<S;O++){let F=O/S*5,Z=1.75*O/S*2*Math.PI+E,K=F*Math.sin(Z)+pt(-1,1)*v,et=F*Math.cos(Z)+pt(-1,1)*v;w.push({x:K,y:et,label:z})}}return L(0,1),L(Math.PI,-1),w}function Aa(f,v){let w=[],S=5;function L(E,z){return Sl(E,z)<S*.5?1:-1}for(let E=0;E<f/2;E++){let z=pt(0,S*.5),O=pt(0,2*Math.PI),F=z*Math.sin(O),Z=z*Math.cos(O),K=pt(-S,S)*v,et=pt(-S,S)*v,rt=L({x:F+K,y:Z+et},{x:0,y:0});w.push({x:F,y:Z,label:rt})}for(let E=0;E<f/2;E++){let z=pt(S*.7,S),O=pt(0,2*Math.PI),F=z*Math.sin(O),Z=z*Math.cos(O),K=pt(-S,S)*v,et=pt(-S,S)*v,rt=L({x:F+K,y:Z+et},{x:0,y:0});w.push({x:F,y:Z,label:rt})}return w}function wl(f,v){function w(L){return L.x*L.y>=0?1:-1}let S=[];for(let L=0;L<f;L++){let E=pt(-5,5),z=.3;E+=E>0?z:-z;let O=pt(-5,5);O+=O>0?z:-z;let F=pt(-5,5)*v,Z=pt(-5,5)*v,K=w({x:E+F,y:O+Z});S.push({x:E,y:O,label:K})}return S}function pt(f,v){return Math.random()*(v-f)+f}function yl(f=0,v=1){let w,S,L;do w=2*Math.random()-1,S=2*Math.random()-1,L=w*w+S*S;while(L>1);let E=Math.sqrt(-2*Math.log(L)/L)*w;return f+Math.sqrt(v)*E}function Sl(f,v){let w=f.x-v.x,S=f.y-v.y;return Math.sqrt(w*w+S*S)}var $r="_hide",jr={relu:Jt.RELU,tanh:Jt.TANH,sigmoid:Jt.SIGMOID,linear:Jt.LINEAR},Gr={none:null,L1:an.L1,L2:an.L2},on={circle:Aa,xor:wl,gauss:xl,spiral:bl},ln={"reg-plane":Na,"reg-gauss":Ml};function Be(f,v){for(let w in f)if(f[w]===v)return w}function kl(f,v){return f.substr(-v.length)===v}function El(f){let v=[];for(let w in f)kl(w,$r)&&v.push(w);return v}var Wr={classification:0,regression:1},Xr=class f{static PROPS=[{name:"activation",type:5,keyMap:jr},{name:"regularization",type:5,keyMap:Gr},{name:"batchSize",type:1},{name:"dataset",type:5,keyMap:on},{name:"regDataset",type:5,keyMap:ln},{name:"learningRate",type:1},{name:"regularizationRate",type:1},{name:"noise",type:1},{name:"networkShape",type:2},{name:"seed",type:0},{name:"showTestData",type:4},{name:"discretize",type:4},{name:"percTrainData",type:1},{name:"x",type:4},{name:"y",type:4},{name:"xTimesY",type:4},{name:"xSquared",type:4},{name:"ySquared",type:4},{name:"cosX",type:4},{name:"sinX",type:4},{name:"cosY",type:4},{name:"sinY",type:4},{name:"collectStats",type:4},{name:"tutorial",type:0},{name:"problem",type:5,keyMap:Wr},{name:"initZero",type:4},{name:"hideText",type:4}];learningRate=.03;regularizationRate=0;showTestData=!1;noise=0;batchSize=10;discretize=!1;tutorial=null;percTrainData=50;activation=Jt.TANH;regularization=null;problem=0;initZero=!1;hideText=!1;collectStats=!1;numHiddenLayers=1;hiddenLayerControls=[];networkShape=[4,2];x=!0;y=!0;xTimesY=!1;xSquared=!1;ySquared=!1;cosX=!1;sinX=!1;cosY=!1;sinY=!1;dataset=Aa;regDataset=Na;seed;static deserializeState(){let v={};for(let E of window.location.hash.slice(1).split("&")){let[z,O]=E.split("=");v[z]=O}let w=new f;function S(E){return E in v&&v[E]!=null&&v[E].trim()!==""}function L(E){return E.trim()===""?[]:E.split(",")}return f.PROPS.forEach(({name:E,type:z,keyMap:O})=>{switch(z){case 5:if(O==null)throw Error("A key-value map must be provided for state variables of type Object");S(E)&&v[E]in O&&(w[E]=O[v[E]]);break;case 1:S(E)&&(w[E]=+v[E]);break;case 0:S(E)&&(w[E]=v[E]);break;case 4:S(E)&&(w[E]=v[E]!=="false");break;case 2:E in v&&(w[E]=L(v[E]).map(Number));break;case 3:E in v&&(w[E]=L(v[E]));break;default:throw Error("Encountered an unknown type for a state variable")}}),El(v).forEach(E=>{w[E]=v[E]==="true"}),w.numHiddenLayers=w.networkShape.length,w.seed==null&&(w.seed=Math.random().toFixed(5)),Math.seedrandom(w.seed),w}serialize(){let v=[];f.PROPS.forEach(({name:w,type:S,keyMap:L})=>{let E=this[w];E!=null&&(S===5?E=Be(L,E):(S===2||S===3)&&(E=E.join(",")),v.push(`${w}=${E}`))}),El(this).forEach(w=>{v.push(`${w}=${this[w]}`)}),window.location.hash=v.join("&")}getHiddenProps(){let v=[];for(let w in this)kl(w,$r)&&String(this[w])==="true"&&v.push(w.replace($r,""));return v}setHideProperty(v,w){this[v+$r]=w}};var zn=Nn(un()),Zr=class{numLines;data=[];svg;xScale;yScale;paths;lineColors;minY=Number.MAX_VALUE;maxY=Number.MIN_VALUE;constructor(v,w){this.lineColors=w,this.numLines=w.length;let S=v.node(),L=S.offsetWidth,E=S.offsetHeight,z={top:2,right:0,bottom:2,left:2},O=L-z.left-z.right,F=E-z.top-z.bottom;this.xScale=zn.scale.linear().domain([0,0]).range([0,O]),this.yScale=zn.scale.linear().domain([0,0]).range([F,0]),this.svg=v.append("svg").attr("width",O+z.left+z.right).attr("height",F+z.top+z.bottom).append("g").attr("transform",`translate(${z.left},${z.top})`),this.paths=new Array(this.numLines);for(let Z=0;Z<this.numLines;Z++)this.paths[Z]=this.svg.append("path").attr("class","line").style({fill:"none",stroke:w[Z],"stroke-width":"1.5px"})}reset(){this.data=[],this.redraw(),this.minY=Number.MAX_VALUE,this.maxY=Number.MIN_VALUE}addDataPoint(v){if(v.length!==this.numLines)throw Error("Length of dataPoint must equal number of lines");v.forEach(w=>{this.minY=Math.min(this.minY,w),this.maxY=Math.max(this.maxY,w)}),this.data.push({x:this.data.length+1,y:v}),this.redraw()}redraw(){this.xScale.domain([1,this.data.length]),this.yScale.domain([this.minY,this.maxY]);let v=w=>zn.svg.line().x(S=>this.xScale(S.x)).y(S=>this.yScale(S.y[w]));for(let w=0;w<this.numLines;w++)this.paths[w].datum(this.data).attr("d",v(w))}};var Y=Nn(un()),Nl;Y.select(".more button").on("click",function(){Y.transition().duration(1e3).tween("scroll",Zf(800))});function Zf(f){return function(){let v=Y.interpolateNumber(window.pageYOffset||document.documentElement.scrollTop,f);return function(w){scrollTo(0,v(w))}}}var wt=30,Vr=5,Vf=500,Jf=1200,ae=100;var Ut={x:{f:(f,v)=>f,label:"X_1"},y:{f:(f,v)=>v,label:"X_2"},xSquared:{f:(f,v)=>f*f,label:"X_1^2"},ySquared:{f:(f,v)=>v*v,label:"X_2^2"},xTimesY:{f:(f,v)=>f*v,label:"X_1X_2"},sinX:{f:(f,v)=>Math.sin(f),label:"sin(X_1)"},sinY:{f:(f,v)=>Math.sin(v),label:"sin(X_2)"}},Kf=[["Show test data","showTestData"],["Discretize output","discretize"],["Play button","playButton"],["Step button","stepButton"],["Reset button","resetButton"],["Learning rate","learningRate"],["Activation","activation"],["Regularization","regularization"],["Regularization rate","regularizationRate"],["Problem type","problem"],["Which dataset","dataset"],["Ratio train data","percTrainData"],["Noise level","noise"],["Batch size","batchSize"],["# of hidden layers","numHiddenLayers"]],La=class{timerIndex=0;isPlaying=!1;callback=null;playOrPause(){this.isPlaying?(this.isPlaying=!1,this.pause()):(this.isPlaying=!0,fn===0&&Cl(),this.play())}onPlayPause(v){this.callback=v}play(){this.pause(),this.isPlaying=!0,this.callback&&this.callback(this.isPlaying),this.start(this.timerIndex)}pause(){this.timerIndex++,this.isPlaying=!1,this.callback&&this.callback(this.isPlaying)}start(v){Y.timer(()=>v<this.timerIndex?!0:(Rl(),!1),0)}},U=Xr.deserializeState();U.getHiddenProps().forEach(f=>{f in Ut&&delete Ut[f]});var Kt={},Kr=null,sn=[-6,6],cn=new Ur(300,ae,sn,sn,Y.select("#heatmap")),Qf=Y.scale.linear().domain([0,5]).range([1,10]).clamp(!0),Ta=Y.scale.linear().domain([-1,0,1]).range(["#f59322","#e8eaeb","#0877bd"]).clamp(!0),fn=0,Tn=[],Rn=[],St=null,Qr=0,ti=0,Jr=new La,zl=new Zr(Y.select("#linechart"),["#777","black"]);function th(){Y.select("#reset-button").on("click",()=>{At(),de(),Y.select("#play-pause-button")}),Y.select("#play-pause-button").on("click",function(){de(),Jr.playOrPause()}),Jr.onPlayPause(V=>{Y.select("#play-pause-button").classed("playing",V)}),Y.select("#next-step-button").on("click",()=>{Jr.pause(),de(),fn===0&&Cl(),Rl()}),Y.select("#data-regen-button").on("click",()=>{Ue(),_t=!0});let f=Y.selectAll("canvas[data-dataset]");f.on("click",function(){let V=on[this.dataset.dataset];V!==U.dataset&&(U.dataset=V,f.classed("selected",!1),Y.select(this).classed("selected",!0),Ue(),_t=!0,At())});let v=Be(on,U.dataset);Y.select(`canvas[data-dataset=${v}]`).classed("selected",!0);let w=Y.selectAll("canvas[data-regDataset]");w.on("click",function(){let V=ln[this.dataset.regdataset];V!==U.regDataset&&(U.regDataset=V,w.classed("selected",!1),Y.select(this).classed("selected",!0),Ue(),_t=!0,At())});let S=Be(ln,U.regDataset);Y.select(`canvas[data-regDataset=${S}]`).classed("selected",!0),Y.select("#add-layers").on("click",()=>{U.numHiddenLayers>=6||(U.networkShape[U.numHiddenLayers]=2,U.numHiddenLayers++,_t=!0,At())}),Y.select("#remove-layers").on("click",()=>{U.numHiddenLayers<=0||(U.numHiddenLayers--,U.networkShape.splice(U.numHiddenLayers),_t=!0,At())}),Y.select("#show-test-data").on("change",function(){U.showTestData=this.checked,U.serialize(),de(),cn.updateTestPoints(U.showTestData?Rn:[])}).property("checked",U.showTestData),Y.select("#discretize").on("change",function(){U.discretize=this.checked,U.serialize(),de(),Cn()}).property("checked",U.discretize),Y.select("#percTrainData").on("input",function(){U.percTrainData=this.value,Y.select("label[for='percTrainData'] .value").text(this.value),Ue(),_t=!0,At()}).property("value",U.percTrainData),Y.select("label[for='percTrainData'] .value").text(U.percTrainData);let O=Y.select("#noise").on("input",function(){U.noise=this.value,Y.select("label[for='noise'] .value").text(this.value),Ue(),_t=!0,At()}),F=parseInt(O.property("max"));U.noise>F?U.noise<=80?O.property("max",U.noise):U.noise=50:U.noise<0&&(U.noise=0),O.property("value",U.noise),Y.select("label[for='noise'] .value").text(U.noise),Y.select("#batchSize").on("input",function(){U.batchSize=this.value,Y.select("label[for='batchSize'] .value").text(this.value),_t=!0,At()}).property("value",U.batchSize),Y.select("label[for='batchSize'] .value").text(U.batchSize),Y.select("#activations").on("change",function(){U.activation=jr[this.value],_t=!0,At()}).property("value",Be(jr,U.activation)),Y.select("#learningRate").on("change",function(){U.learningRate=+this.value,U.serialize(),de(),_t=!0}).property("value",U.learningRate),Y.select("#regularizations").on("change",function(){U.regularization=Gr[this.value],_t=!0,At()}).property("value",Be(Gr,U.regularization)),Y.select("#regularRate").on("change",function(){U.regularizationRate=+this.value,_t=!0,At()}).property("value",U.regularizationRate),Y.select("#problem").on("change",function(){U.problem=Wr[this.value],Ue(),Pl(),_t=!0,At()}).property("value",Be(Wr,U.problem));let xt=Y.scale.linear().domain([-1,1]).range([0,144]),Et=Y.svg.axis().scale(xt).orient("bottom").tickValues([-1,0,1]).tickFormat(Y.format("d"));Y.select("#colormap g.core").append("g").attr("class","x axis").attr("transform","translate(0,10)").call(Et),window.addEventListener("resize",()=>{let V=document.querySelector("#main-part").getBoundingClientRect().width;V!==Nl&&(Nl=V,Tl(St),Cn(!0))}),U.hideText&&(Y.select("#article-text").style("display","none"),Y.select("div.more").style("display","none"),Y.select("header").style("display","none"))}function eh(f){Dn(f,!0,v=>{Y.select(`rect#bias-${v.id}`).style("fill",Ta(v.bias))})}function nh(f,v){for(let w=1;w<f.length;w++){let S=f[w];for(let L=0;L<S.length;L++){let E=S[L];for(let z=0;z<E.inputLinks.length;z++){let O=E.inputLinks[z];v.select(`#link${O.source.id}-${O.dest.id}`).style({"stroke-dashoffset":-fn/3,"stroke-width":Qf(Math.abs(O.weight)),stroke:Ta(O.weight)}).datum(O)}}}}function Al(f,v,w,S,L,E){let z=f-wt/2,O=v-wt/2,F=L.append("g").attr({class:"node",id:`node${w}`,transform:`translate(${z},${O})`});F.append("rect").attr({x:0,y:0,width:wt,height:wt});let Z=U[w]?"active":"inactive";if(S){let rt=Ut[w].label!=null?Ut[w].label:w,lt=F.append("text").attr({class:"main-label",x:-10,y:wt/2,"text-anchor":"end"});if(/[_^]/.test(rt)){let vt=/(.*?)([_^])(.)/g,xt,Et;for(;(xt=vt.exec(rt))!=null;){Et=vt.lastIndex;let V=xt[1],Qt=xt[2],It=xt[3];V&&lt.append("tspan").text(V),lt.append("tspan").attr("baseline-shift",Qt==="_"?"sub":"super").style("font-size","9px").text(It)}rt.substring(Et)&&lt.append("tspan").text(rt.substring(Et))}else lt.append("tspan").text(rt);F.classed(Z,!0)}S||F.append("rect").attr({id:`bias-${w}`,x:-Vr-2,y:wt-Vr+3,width:Vr,height:Vr}).on("mouseenter",function(){Pn(0,E,Y.mouse(L.node()))}).on("mouseleave",function(){Pn(null)});let K=Y.select("#network").insert("div",":first-child").attr({id:`canvas-${w}`,class:"canvas"}).style({position:"absolute",left:`${z+3}px`,top:`${O+3}px`}).on("mouseenter",function(){Kr=w,K.classed("hovered",!0),F.classed("hovered",!0),za(St,!1),cn.updateBackground(Kt[w],U.discretize)}).on("mouseleave",function(){Kr=null,K.classed("hovered",!1),F.classed("hovered",!1),za(St,!1),cn.updateBackground(Kt[ka(St).id],U.discretize)});S&&(K.on("click",function(){U[w]=!U[w],_t=!0,At()}),K.style("cursor","pointer")),S&&K.classed(Z,!0);let et=new Br(wt,ae/10,sn,sn,K,{noSvg:!0});K.datum({heatmap:et,id:w})}function Tl(f){let v=Y.select("#svg");v.select("g.core").remove(),Y.select("#network").selectAll("div.canvas").remove(),Y.select("#network").selectAll("div.plus-minus-neurons").remove();let w=3,S=Y.select(".column.output").node(),L=Y.select(".column.features").node(),E=S.offsetLeft-L.offsetLeft;v.attr("width",E);let z={},O=v.append("g").classed("core",!0).attr("transform",`translate(${w},${w})`),F=f.length,K=Y.scale.ordinal().domain(Y.range(1,F-1)).rangePoints([118,E-wt],.7),et=ht=>ht*(wt+25),rt=Y.select(".callout.thumbnail").style("display","none"),lt=Y.select(".callout.weights").style("display","none"),vt=null,xt=null,Et=wt/2+50,V=Object.keys(Ut),Qt=et(V.length);V.forEach((ht,Ot)=>{let $t=et(Ot)+wt/2;z[ht]={cx:Et,cy:$t},Al(Et,$t,ht,!0,O)});for(let ht=1;ht<F-1;ht++){let Ot=f[ht].length,$t=K(ht)+wt/2;Qt=Math.max(Qt,et(Ot)),rh(K(ht),ht);for(let ue=0;ue<Ot;ue++){let te=f[ht][ue],Ye=et(ue)+wt/2;z[te.id]={cx:$t,cy:Ye},Al($t,Ye,te.id,!1,O,te);let Ee=f[ht].length,In=f[ht+1].length;vt==null&&ue===Ee-1&&In<=Ee&&(rt.style({display:null,top:`${23+Ye}px`,left:`${$t}px`}),vt=te.id);for(let oe=0;oe<te.inputLinks.length;oe++){let ct=te.inputLinks[oe],On=Dl(ct,z,f,O,oe===0,oe,te.inputLinks.length).node(),ke=f[ht-1],qn=ke[ke.length-1];if(xt==null&&ue===Ee-1&&ct.source.id===qn.id&&(ct.source.id!==vt||F<=5)&&ct.dest.id!==vt&&ke.length>=Ee){let ft=On.getPointAtLength(On.getTotalLength()*.7);lt.style({display:null,top:`${ft.y+5}px`,left:`${ft.x+3}px`}),xt=ct.dest.id}}}}Et=E+wt/2;let It=f[F-1][0],Yt=et(0)+wt/2;z[It.id]={cx:Et,cy:Yt};for(let ht=0;ht<It.inputLinks.length;ht++){let Ot=It.inputLinks[ht];Dl(Ot,z,f,O,ht===0,ht,It.inputLinks.length)}v.attr("height",Qt);let ri=Math.max(Da(rt),Da(lt),Da(Y.select("#network")));Y.select(".column.features").style("height",ri+"px")}function Da(f){let v=f.node();return v.offsetHeight+v.offsetTop}function rh(f,v){let w=Y.select("#network").append("div").classed("plus-minus-neurons",!0).style("left",`${f-10}px`),S=v-1,L=w.append("div").attr("class",`ui-numNodes${v}`);L.append("button").attr("class","mdl-button mdl-js-button mdl-button--icon").on("click",()=>{U.networkShape[S]>=8||(U.networkShape[S]++,_t=!0,At())}).append("i").attr("class","material-icons").text("add"),L.append("button").attr("class","mdl-button mdl-js-button mdl-button--icon").on("click",()=>{U.networkShape[S]<=1||(U.networkShape[S]--,_t=!0,At())}).append("i").attr("class","material-icons").text("remove");let E=U.networkShape[S]>1?"s":"";w.append("div").text(U.networkShape[S]+" neuron"+E)}function Pn(f,v,w){let S=Y.select("#hovercard");if(f==null){S.style("display","none"),Y.select("#svg").on("click",null);return}Y.select("#svg").on("click",()=>{S.select(".value").style("display","none");let z=S.select("input");z.style("display",null),z.on("input",function(){this.value!=null&&this.value!==""&&(f===1?v.weight=+this.value:v.bias=+this.value,Cn())}),z.on("keypress",()=>{Y.event.keyCode===13&&Pn(f,v,w)}),z.node().focus()});let L=f===1?v.weight:v.bias,E=f===1?"Weight":"Bias";S.style({left:`${w[0]+20}px`,top:`${w[1]}px`,display:"block"}),S.select(".type").text(E),S.select(".value").style("display",null).text(L.toPrecision(2)),S.select("input").property("value",L.toPrecision(2)).style("display","none")}function Dl(f,v,w,S,L,E,z){let O=S.insert("path",":first-child"),F=v[f.source.id],Z=v[f.dest.id],K={source:{y:F.cx+wt/2+2,x:F.cy},target:{y:Z.cx-wt/2,x:Z.cy+(E-(z-1)/2)/z*12}},et=Y.svg.diagonal().projection(rt=>[rt.y,rt.x]);return O.attr({"marker-start":"url(#markerArrow)",class:"link",id:"link"+f.source.id+"-"+f.dest.id,d:et(K,0)}),S.append("path").attr("d",et(K,0)).attr("class","link-hover").on("mouseenter",function(){Pn(1,f,Y.mouse(this))}).on("mouseleave",function(){Pn(null)}),O}function za(f,v){if(v){Kt={},Dn(f,!0,z=>{Kt[z.id]=new Array(ae)});for(let z in Ut)Kt[z]=new Array(ae)}let w=Y.scale.linear().domain([0,ae-1]).range(sn),S=Y.scale.linear().domain([ae-1,0]).range(sn),L=0,E=0;for(L=0;L<ae;L++){if(v){Dn(f,!0,z=>{Kt[z.id][L]=new Array(ae)});for(let z in Ut)Kt[z][L]=new Array(ae)}for(E=0;E<ae;E++){let z=w(L),O=S(E),F=ni(z,O);if(Fr(f,F),Dn(f,!0,Z=>{Kt[Z.id][L][E]=Z.output}),v)for(let Z in Ut)Kt[Z][L][E]=Ut[Z].f(z,O)}}}function ei(f,v){let w=0;for(let S=0;S<v.length;S++){let L=v[S],E=ni(L.x,L.y),z=Fr(f,E);w+=An.SQUARE.error(z,L.label)}return w/v.length}function Cn(f=!1){nh(St,Y.select("g.core")),eh(St),za(St,f);let v=Kr??ka(St).id;cn.updateBackground(Kt[v],U.discretize),Y.select("#network").selectAll("div.canvas").each(function(E){E.heatmap.updateBackground(vl(Kt[E.id],10),U.discretize)});function w(E){let z="000000";return(z+E).slice(-z.length)}function S(E){return E.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function L(E){return E.toFixed(3)}Y.select("#loss-train").text(L(Qr)),Y.select("#loss-test").text(L(ti)),Y.select("#iter-number").text(S(w(fn))),zl.addDataPoint([Qr,ti])}function ih(){let f=[];for(let v in Ut)U[v]&&f.push(v);return f}function ni(f,v){let w=[];for(let S in Ut)U[S]&&w.push(Ut[S].f(f,v));return w}function Rl(){fn++,Tn.forEach((f,v)=>{let w=ni(f.x,f.y);Fr(St,w),dl(St,f.label,An.SQUARE),(v+1)%U.batchSize===0&&pl(St,U.learningRate,U.regularizationRate)}),Qr=ei(St,Tn),ti=ei(St,Rn),Cn()}function xh(f){let v=[];for(let w=0;w<f.length-1;w++){let S=f[w];for(let L=0;L<S.length;L++){let E=S[L];for(let z=0;z<E.outputs.length;z++){let O=E.outputs[z];v.push(O.weight)}}}return v}function At(f=!1){zl.reset(),U.serialize(),f||de(),Jr.pause();let v=U.numHiddenLayers!==1?"s":"";Y.select("#layers-label").text("Hidden layer"+v),Y.select("#num-layers").text(U.numHiddenLayers),fn=0;let S=[ni(0,0).length].concat(U.networkShape).concat([1]),L=U.problem===1?Jt.LINEAR:Jt.TANH;St=gl(S,U.activation,L,U.regularization,ih(),U.initZero),Qr=ei(St,Tn),ti=ei(St,Rn),Tl(St),Cn(!0)}function ah(){if(U.tutorial==null||U.tutorial===""||U.hideText)return;Y.selectAll("article div.l--body").remove();let f=Y.select("article").append("div").attr("class","l--body");Y.html(`tutorials/${U.tutorial}.html`,(v,w)=>{if(v)throw v;f.node().appendChild(w);let S=f.select("title");S.size()&&(Y.select("header h1").style({"margin-top":"20px","margin-bottom":"20px"}).text(S.text()),document.title=S.text())})}function Pl(){function f(v,w){let S=100,L=100;v.setAttribute("width",S),v.setAttribute("height",L);let E=v.getContext("2d");w(200,0).forEach(function(O){E.fillStyle=Ta(O.label),E.fillRect(S*(O.x+6)/12,L*(O.y+6)/12,4,4)}),Y.select(v.parentNode).style("display",null)}if(Y.selectAll(".dataset").style("display","none"),U.problem===0)for(let v in on){let w=document.querySelector(`canvas[data-dataset=${v}]`),S=on[v];f(w,S)}if(U.problem===1)for(let v in ln){let w=document.querySelector(`canvas[data-regDataset=${v}]`),S=ln[v];f(w,S)}}function uh(){let f=U.getHiddenProps();f.forEach(w=>{let S=Y.selectAll(`.ui-${w}`);S.size()===0&&console.warn(`0 html elements found with class .ui-${w}`),S.style("display","none")});let v=Y.select(".hide-controls");Kf.forEach(([w,S])=>{let L=v.append("label").attr("class","mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect"),E=L.append("input").attr({type:"checkbox",class:"mdl-checkbox__input"});f.indexOf(S)===-1&&E.attr("checked","true"),E.on("change",function(){U.setHideProperty(S,!this.checked),U.serialize(),de(),Y.select(".hide-controls-link").attr("href",window.location.href)}),L.append("span").attr("class","mdl-checkbox__label label").text(w)}),Y.select(".hide-controls-link").attr("href",window.location.href)}function Ue(f=!1){f||(U.seed=Math.random().toFixed(5),U.serialize(),de()),Math.seedrandom(U.seed);let v=U.problem===1?Jf:Vf,S=(U.problem===0?U.dataset:U.regDataset)(v,U.noise/100);_l(S);let L=Math.floor(S.length*U.percTrainData/100);Tn=S.slice(0,L),Rn=S.slice(L),cn.updatePoints(Tn),cn.updateTestPoints(U.showTestData?Rn:[])}var Ll=!0,_t=!1;function de(){if(!Ll)return;Ll=!1;let f="index";U.tutorial!=null&&U.tutorial!==""&&(f=`/v/tutorials/${U.tutorial}`),ga("set","page",f),ga("send","pageview",{sessionControl:"start"})}function Cl(){ga("send",{hitType:"event",eventCategory:"Starting Simulation",eventAction:_t?"changed":"unchanged",eventLabel:U.tutorial==null?"":U.tutorial}),_t=!1}Pl();ah();th();Ue(!0);At(!0);uh();})();
